;;; this file is automatically generated, do not edit
#||
Copyright 2015-2021 The Khronos Group Inc.

SPDX-License-Identifier: Apache-2.0 OR MIT
||#

(in-package :vk)

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-base-out-structure) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next)
       ,ptr
       (:struct %vk:base-out-structure))
    (setf %vk:s-type (vk:s-type ,value)
          %vk:p-next (cffi:null-pointer))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-base-in-structure) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next)
       ,ptr
       (:struct %vk:base-in-structure))
    (setf %vk:s-type (vk:s-type ,value)
          %vk:p-next (cffi:null-pointer))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-offset-2d) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y)
       ,ptr
       (:struct %vk:offset-2d))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-offset-3d) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y
        %vk:z)
       ,ptr
       (:struct %vk:offset-3d))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value)
          %vk:z (vk:z ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-extent-2d) ptr)
  `(cffi:with-foreign-slots
      ((%vk:width
        %vk:height)
       ,ptr
       (:struct %vk:extent-2d))
    (setf %vk:width (vk:width ,value)
          %vk:height (vk:height ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-extent-3d) ptr)
  `(cffi:with-foreign-slots
      ((%vk:width
        %vk:height
        %vk:depth)
       ,ptr
       (:struct %vk:extent-3d))
    (setf %vk:width (vk:width ,value)
          %vk:height (vk:height ,value)
          %vk:depth (vk:depth ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-viewport) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y
        %vk:width
        %vk:height
        %vk:min-depth
        %vk:max-depth)
       ,ptr
       (:struct %vk:viewport))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value)
          %vk:width (vk:width ,value)
          %vk:height (vk:height ,value)
          %vk:min-depth (vk:min-depth ,value)
          %vk:max-depth (vk:max-depth ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-rect-2d) ptr)
  `(cffi:with-foreign-slots
      ((%vk:offset
        %vk:extent)
       ,ptr
       (:struct %vk:rect-2d))
    (setf %vk:offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-clear-rect) ptr)
  `(cffi:with-foreign-slots
      ((%vk:rect
        %vk:base-array-layer
        %vk:layer-count)
       ,ptr
       (:struct %vk:clear-rect))
    (setf %vk:rect (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:rect ,value) ,ptr)
          %vk:base-array-layer (vk:base-array-layer ,value)
          %vk:layer-count (vk:layer-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-component-mapping) ptr)
  `(cffi:with-foreign-slots
      ((%vk:r
        %vk:g
        %vk:b
        %vk:a)
       ,ptr
       (:struct %vk:component-mapping))
    (setf %vk:r (vk:r ,value)
          %vk:g (vk:g ,value)
          %vk:b (vk:b ,value)
          %vk:a (vk:a ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:api-version
        %vk:driver-version
        %vk:vendor-id
        %vk:device-id
        %vk:device-type
        %vk:device-name
        %vk:pipeline-cache-uuid
        %vk:limits
        %vk:sparse-properties)
       ,ptr
       (:struct %vk:physical-device-properties))
    (setf %vk:api-version (vk:api-version ,value)
          %vk:driver-version (vk:driver-version ,value)
          %vk:vendor-id (vk:vendor-id ,value)
          %vk:device-id (vk:device-id ,value)
          %vk:device-type (vk:device-type ,value)
          %vk:device-name (vk:device-name ,value)
          %vk:limits (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-limits) (vk:limits ,value) ,ptr)
          %vk:sparse-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-sparse-properties) (vk:sparse-properties ,value) ,ptr))
    (cffi:lisp-array-to-foreign (vk:pipeline-cache-uuid ,value) %vk:pipeline-cache-uuid '(:array :uint8 vk_uuid_size))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-extension-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:extension-name
        %vk:spec-version)
       ,ptr
       (:struct %vk:extension-properties))
    (setf %vk:extension-name (vk:extension-name ,value)
          %vk:spec-version (vk:spec-version ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-layer-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:layer-name
        %vk:spec-version
        %vk:implementation-version
        %vk:description)
       ,ptr
       (:struct %vk:layer-properties))
    (setf %vk:layer-name (vk:layer-name ,value)
          %vk:spec-version (vk:spec-version ,value)
          %vk:implementation-version (vk:implementation-version ,value)
          %vk:description (vk:description ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-application-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-application-name
        %vk:application-version
        %vk:p-engine-name
        %vk:engine-version
        %vk:api-version)
       ,ptr
       (:struct %vk:application-info))
    (setf %vk:s-type :application-info
          %vk:p-next (cffi:null-pointer)
          %vk:p-application-name (vk:application-name ,value)
          %vk:application-version (vk:application-version ,value)
          %vk:p-engine-name (vk:engine-name ,value)
          %vk:engine-version (vk:engine-version ,value)
          %vk:api-version (vk:api-version ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-allocation-callbacks) ptr)
  `(cffi:with-foreign-slots
      ((%vk:p-user-data
        %vk:pfn-allocation
        %vk:pfn-reallocation
        %vk:pfn-free
        %vk:pfn-internal-allocation
        %vk:pfn-internal-free)
       ,ptr
       (:struct %vk:allocation-callbacks))
    (setf %vk:p-user-data (if (vk:user-data ,value) (vk:user-data ,value) (cffi:null-pointer))
          %vk:pfn-allocation (vk:pfn-allocation ,value)
          %vk:pfn-reallocation (vk:pfn-reallocation ,value)
          %vk:pfn-free (vk:pfn-free ,value)
          %vk:pfn-internal-allocation (vk:pfn-internal-allocation ,value)
          %vk:pfn-internal-free (vk:pfn-internal-free ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-queue-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:queue-family-index
        %vk:queue-count
        %vk:p-queue-priorities)
       ,ptr
       (:struct %vk:device-queue-create-info))
    (setf %vk:s-type :device-queue-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:queue-family-index (vk:queue-family-index ,value)
          %vk:queue-count (length (vk:queue-priorities ,value))
          %vk:p-queue-priorities (vk-alloc:foreign-allocate-and-fill :float (vk:queue-priorities ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:queue-create-info-count
        %vk:p-queue-create-infos
        %vk:enabled-layer-count
        %vk:pp-enabled-layer-names
        %vk:enabled-extension-count
        %vk:pp-enabled-extension-names
        %vk:p-enabled-features)
       ,ptr
       (:struct %vk:device-create-info))
    (setf %vk:s-type :device-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:queue-create-info-count (length (vk:queue-create-infos ,value))
          %vk:p-queue-create-infos (vk-alloc:foreign-allocate-and-fill '(:struct %vk:device-queue-create-info) (vk:queue-create-infos ,value) ,ptr)
          %vk:enabled-layer-count (length (vk:enabled-layer-names ,value))
          %vk:pp-enabled-layer-names (vk-alloc:foreign-allocate-and-fill :string (vk:enabled-layer-names ,value) ,ptr)
          %vk:enabled-extension-count (length (vk:enabled-extension-names ,value))
          %vk:pp-enabled-extension-names (vk-alloc:foreign-allocate-and-fill :string (vk:enabled-extension-names ,value) ,ptr)
          %vk:p-enabled-features (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-features) (vk:enabled-features ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-instance-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-application-info
        %vk:enabled-layer-count
        %vk:pp-enabled-layer-names
        %vk:enabled-extension-count
        %vk:pp-enabled-extension-names)
       ,ptr
       (:struct %vk:instance-create-info))
    (setf %vk:s-type :instance-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:p-application-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:application-info) (vk:application-info ,value) ,ptr)
          %vk:enabled-layer-count (length (vk:enabled-layer-names ,value))
          %vk:pp-enabled-layer-names (vk-alloc:foreign-allocate-and-fill :string (vk:enabled-layer-names ,value) ,ptr)
          %vk:enabled-extension-count (length (vk:enabled-extension-names ,value))
          %vk:pp-enabled-extension-names (vk-alloc:foreign-allocate-and-fill :string (vk:enabled-extension-names ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-queue-family-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:queue-flags
        %vk:queue-count
        %vk:timestamp-valid-bits
        %vk:min-image-transfer-granularity)
       ,ptr
       (:struct %vk:queue-family-properties))
    (setf %vk:queue-flags (vk:queue-flags ,value)
          %vk:queue-count (vk:queue-count ,value)
          %vk:timestamp-valid-bits (vk:timestamp-valid-bits ,value)
          %vk:min-image-transfer-granularity (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:min-image-transfer-granularity ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-memory-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:memory-type-count
        %vk:memory-types
        %vk:memory-heap-count
        %vk:memory-heaps)
       ,ptr
       (:struct %vk:physical-device-memory-properties))
    (setf %vk:memory-type-count (vk:memory-type-count ,value)
          %vk:memory-types (vk-alloc:foreign-allocate-and-fill '(:struct %vk:memory-type) (vk:memory-types ,value) ,ptr)
          %vk:memory-heap-count (vk:memory-heap-count ,value)
          %vk:memory-heaps (vk-alloc:foreign-allocate-and-fill '(:struct %vk:memory-heap) (vk:memory-heaps ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:allocation-size
        %vk:memory-type-index)
       ,ptr
       (:struct %vk:memory-allocate-info))
    (setf %vk:s-type :memory-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:allocation-size (vk:allocation-size ,value)
          %vk:memory-type-index (vk:memory-type-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-requirements) ptr)
  `(cffi:with-foreign-slots
      ((%vk:size
        %vk:alignment
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:memory-requirements))
    (setf %vk:size (vk:size ,value)
          %vk:alignment (vk:alignment ,value)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-format-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:aspect-mask
        %vk:image-granularity
        %vk:flags)
       ,ptr
       (:struct %vk:sparse-image-format-properties))
    (setf %vk:aspect-mask (vk:aspect-mask ,value)
          %vk:image-granularity (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:image-granularity ,value) ,ptr)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-memory-requirements) ptr)
  `(cffi:with-foreign-slots
      ((%vk:format-properties
        %vk:image-mip-tail-first-lod
        %vk:image-mip-tail-size
        %vk:image-mip-tail-offset
        %vk:image-mip-tail-stride)
       ,ptr
       (:struct %vk:sparse-image-memory-requirements))
    (setf %vk:format-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-format-properties) (vk:format-properties ,value) ,ptr)
          %vk:image-mip-tail-first-lod (vk:image-mip-tail-first-lod ,value)
          %vk:image-mip-tail-size (vk:image-mip-tail-size ,value)
          %vk:image-mip-tail-offset (vk:image-mip-tail-offset ,value)
          %vk:image-mip-tail-stride (vk:image-mip-tail-stride ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-type) ptr)
  `(cffi:with-foreign-slots
      ((%vk:property-flags
        %vk:heap-index)
       ,ptr
       (:struct %vk:memory-type))
    (setf %vk:property-flags (vk:property-flags ,value)
          %vk:heap-index (vk:heap-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-heap) ptr)
  `(cffi:with-foreign-slots
      ((%vk:size
        %vk:flags)
       ,ptr
       (:struct %vk:memory-heap))
    (setf %vk:size (vk:size ,value)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-mapped-memory-range) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory
        %vk:offset
        %vk:size)
       ,ptr
       (:struct %vk:mapped-memory-range))
    (setf %vk:s-type :mapped-memory-range
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-format-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:linear-tiling-features
        %vk:optimal-tiling-features
        %vk:buffer-features)
       ,ptr
       (:struct %vk:format-properties))
    (setf %vk:linear-tiling-features (vk:linear-tiling-features ,value)
          %vk:optimal-tiling-features (vk:optimal-tiling-features ,value)
          %vk:buffer-features (vk:buffer-features ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-format-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:max-extent
        %vk:max-mip-levels
        %vk:max-array-layers
        %vk:sample-counts
        %vk:max-resource-size)
       ,ptr
       (:struct %vk:image-format-properties))
    (setf %vk:max-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:max-extent ,value) ,ptr)
          %vk:max-mip-levels (vk:max-mip-levels ,value)
          %vk:max-array-layers (vk:max-array-layers ,value)
          %vk:sample-counts (vk:sample-counts ,value)
          %vk:max-resource-size (vk:max-resource-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-buffer-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer
        %vk:offset
        %vk:range)
       ,ptr
       (:struct %vk:descriptor-buffer-info))
    (setf %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:range (vk:range ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-image-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:sampler
        %vk:image-view
        %vk:image-layout)
       ,ptr
       (:struct %vk:descriptor-image-info))
    (setf %vk:sampler (if (vk:sampler ,value) (vk:sampler ,value) (cffi:null-pointer))
          %vk:image-view (if (vk:image-view ,value) (vk:image-view ,value) (cffi:null-pointer))
          %vk:image-layout (vk:image-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-write-descriptor-set) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:dst-set
        %vk:dst-binding
        %vk:dst-array-element
        %vk:descriptor-count
        %vk:descriptor-type
        %vk:p-image-info
        %vk:p-buffer-info
        %vk:p-texel-buffer-view)
       ,ptr
       (:struct %vk:write-descriptor-set))
    (setf %vk:s-type :write-descriptor-set
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:dst-set (if (vk:dst-set ,value) (vk:dst-set ,value) (cffi:null-pointer))
          %vk:dst-binding (vk:dst-binding ,value)
          %vk:dst-array-element (vk:dst-array-element ,value)
          %vk:descriptor-count (reduce #'max (list (length (vk:image-info ,value))(length (vk:buffer-info ,value))(length (vk:texel-buffer-view ,value))))
          %vk:descriptor-type (vk:descriptor-type ,value)
          %vk:p-image-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:descriptor-image-info) (vk:image-info ,value) ,ptr)
          %vk:p-buffer-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:descriptor-buffer-info) (vk:buffer-info ,value) ,ptr)
          %vk:p-texel-buffer-view (vk-alloc:foreign-allocate-and-fill '%vk:buffer-view (vk:texel-buffer-view ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-descriptor-set) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-set
        %vk:src-binding
        %vk:src-array-element
        %vk:dst-set
        %vk:dst-binding
        %vk:dst-array-element
        %vk:descriptor-count)
       ,ptr
       (:struct %vk:copy-descriptor-set))
    (setf %vk:s-type :copy-descriptor-set
          %vk:p-next (cffi:null-pointer)
          %vk:src-set (if (vk:src-set ,value) (vk:src-set ,value) (cffi:null-pointer))
          %vk:src-binding (vk:src-binding ,value)
          %vk:src-array-element (vk:src-array-element ,value)
          %vk:dst-set (if (vk:dst-set ,value) (vk:dst-set ,value) (cffi:null-pointer))
          %vk:dst-binding (vk:dst-binding ,value)
          %vk:dst-array-element (vk:dst-array-element ,value)
          %vk:descriptor-count (vk:descriptor-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:size
        %vk:usage
        %vk:sharing-mode
        %vk:queue-family-index-count
        %vk:p-queue-family-indices)
       ,ptr
       (:struct %vk:buffer-create-info))
    (setf %vk:s-type :buffer-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:size (vk:size ,value)
          %vk:usage (vk:usage ,value)
          %vk:sharing-mode (vk:sharing-mode ,value)
          %vk:queue-family-index-count (length (vk:queue-family-indices ,value))
          %vk:p-queue-family-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:queue-family-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-view-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:buffer
        %vk:format
        %vk:offset
        %vk:range)
       ,ptr
       (:struct %vk:buffer-view-create-info))
    (setf %vk:s-type :buffer-view-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:format (vk:format ,value)
          %vk:offset (vk:offset ,value)
          %vk:range (vk:range ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-subresource) ptr)
  `(cffi:with-foreign-slots
      ((%vk:aspect-mask
        %vk:mip-level
        %vk:array-layer)
       ,ptr
       (:struct %vk:image-subresource))
    (setf %vk:aspect-mask (vk:aspect-mask ,value)
          %vk:mip-level (vk:mip-level ,value)
          %vk:array-layer (vk:array-layer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-subresource-layers) ptr)
  `(cffi:with-foreign-slots
      ((%vk:aspect-mask
        %vk:mip-level
        %vk:base-array-layer
        %vk:layer-count)
       ,ptr
       (:struct %vk:image-subresource-layers))
    (setf %vk:aspect-mask (vk:aspect-mask ,value)
          %vk:mip-level (vk:mip-level ,value)
          %vk:base-array-layer (vk:base-array-layer ,value)
          %vk:layer-count (vk:layer-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-subresource-range) ptr)
  `(cffi:with-foreign-slots
      ((%vk:aspect-mask
        %vk:base-mip-level
        %vk:level-count
        %vk:base-array-layer
        %vk:layer-count)
       ,ptr
       (:struct %vk:image-subresource-range))
    (setf %vk:aspect-mask (vk:aspect-mask ,value)
          %vk:base-mip-level (vk:base-mip-level ,value)
          %vk:level-count (vk:level-count ,value)
          %vk:base-array-layer (vk:base-array-layer ,value)
          %vk:layer-count (vk:layer-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-barrier) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-access-mask
        %vk:dst-access-mask)
       ,ptr
       (:struct %vk:memory-barrier))
    (setf %vk:s-type :memory-barrier
          %vk:p-next (cffi:null-pointer)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-memory-barrier) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-access-mask
        %vk:dst-access-mask
        %vk:src-queue-family-index
        %vk:dst-queue-family-index
        %vk:buffer
        %vk:offset
        %vk:size)
       ,ptr
       (:struct %vk:buffer-memory-barrier))
    (setf %vk:s-type :buffer-memory-barrier
          %vk:p-next (cffi:null-pointer)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:src-queue-family-index (vk:src-queue-family-index ,value)
          %vk:dst-queue-family-index (vk:dst-queue-family-index ,value)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-memory-barrier) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-access-mask
        %vk:dst-access-mask
        %vk:old-layout
        %vk:new-layout
        %vk:src-queue-family-index
        %vk:dst-queue-family-index
        %vk:image
        %vk:subresource-range)
       ,ptr
       (:struct %vk:image-memory-barrier))
    (setf %vk:s-type :image-memory-barrier
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:old-layout (vk:old-layout ,value)
          %vk:new-layout (vk:new-layout ,value)
          %vk:src-queue-family-index (vk:src-queue-family-index ,value)
          %vk:dst-queue-family-index (vk:dst-queue-family-index ,value)
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:subresource-range (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-range) (vk:subresource-range ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:image-type
        %vk:format
        %vk:extent
        %vk:mip-levels
        %vk:array-layers
        %vk:samples
        %vk:tiling
        %vk:usage
        %vk:sharing-mode
        %vk:queue-family-index-count
        %vk:p-queue-family-indices
        %vk:initial-layout)
       ,ptr
       (:struct %vk:image-create-info))
    (setf %vk:s-type :image-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:image-type (vk:image-type ,value)
          %vk:format (vk:format ,value)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr)
          %vk:mip-levels (vk:mip-levels ,value)
          %vk:array-layers (vk:array-layers ,value)
          %vk:samples (vk:samples ,value)
          %vk:tiling (vk:tiling ,value)
          %vk:usage (vk:usage ,value)
          %vk:sharing-mode (vk:sharing-mode ,value)
          %vk:queue-family-index-count (length (vk:queue-family-indices ,value))
          %vk:p-queue-family-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:queue-family-indices ,value) ,ptr)
          %vk:initial-layout (vk:initial-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subresource-layout) ptr)
  `(cffi:with-foreign-slots
      ((%vk:offset
        %vk:size
        %vk:row-pitch
        %vk:array-pitch
        %vk:depth-pitch)
       ,ptr
       (:struct %vk:subresource-layout))
    (setf %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value)
          %vk:row-pitch (vk:row-pitch ,value)
          %vk:array-pitch (vk:array-pitch ,value)
          %vk:depth-pitch (vk:depth-pitch ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-view-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:image
        %vk:view-type
        %vk:format
        %vk:components
        %vk:subresource-range)
       ,ptr
       (:struct %vk:image-view-create-info))
    (setf %vk:s-type :image-view-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:view-type (vk:view-type ,value)
          %vk:format (vk:format ,value)
          %vk:components (vk-alloc:foreign-allocate-and-fill '(:struct %vk:component-mapping) (vk:components ,value) ,ptr)
          %vk:subresource-range (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-range) (vk:subresource-range ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-copy) ptr)
  `(cffi:with-foreign-slots
      ((%vk:src-offset
        %vk:dst-offset
        %vk:size)
       ,ptr
       (:struct %vk:buffer-copy))
    (setf %vk:src-offset (vk:src-offset ,value)
          %vk:dst-offset (vk:dst-offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-memory-bind) ptr)
  `(cffi:with-foreign-slots
      ((%vk:resource-offset
        %vk:size
        %vk:memory
        %vk:memory-offset
        %vk:flags)
       ,ptr
       (:struct %vk:sparse-memory-bind))
    (setf %vk:resource-offset (vk:resource-offset ,value)
          %vk:size (vk:size ,value)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-memory-bind) ptr)
  `(cffi:with-foreign-slots
      ((%vk:subresource
        %vk:offset
        %vk:extent
        %vk:memory
        %vk:memory-offset
        %vk:flags)
       ,ptr
       (:struct %vk:sparse-image-memory-bind))
    (setf %vk:subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource) (vk:subresource ,value) ,ptr)
          %vk:offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-buffer-memory-bind-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer
        %vk:bind-count
        %vk:p-binds)
       ,ptr
       (:struct %vk:sparse-buffer-memory-bind-info))
    (setf %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:bind-count (length (vk:binds ,value))
          %vk:p-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-memory-bind) (vk:binds ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-opaque-memory-bind-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:image
        %vk:bind-count
        %vk:p-binds)
       ,ptr
       (:struct %vk:sparse-image-opaque-memory-bind-info))
    (setf %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:bind-count (length (vk:binds ,value))
          %vk:p-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-memory-bind) (vk:binds ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-memory-bind-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:image
        %vk:bind-count
        %vk:p-binds)
       ,ptr
       (:struct %vk:sparse-image-memory-bind-info))
    (setf %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:bind-count (length (vk:binds ,value))
          %vk:p-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-memory-bind) (vk:binds ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-sparse-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-count
        %vk:p-wait-semaphores
        %vk:buffer-bind-count
        %vk:p-buffer-binds
        %vk:image-opaque-bind-count
        %vk:p-image-opaque-binds
        %vk:image-bind-count
        %vk:p-image-binds
        %vk:signal-semaphore-count
        %vk:p-signal-semaphores)
       ,ptr
       (:struct %vk:bind-sparse-info))
    (setf %vk:s-type :bind-sparse-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-count (length (vk:p-wait-semaphores ,value))
          %vk:p-wait-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:p-wait-semaphores ,value) ,ptr)
          %vk:buffer-bind-count (length (vk:buffer-binds ,value))
          %vk:p-buffer-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-buffer-memory-bind-info) (vk:buffer-binds ,value) ,ptr)
          %vk:image-opaque-bind-count (length (vk:image-opaque-binds ,value))
          %vk:p-image-opaque-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-opaque-memory-bind-info) (vk:image-opaque-binds ,value) ,ptr)
          %vk:image-bind-count (length (vk:image-binds ,value))
          %vk:p-image-binds (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-memory-bind-info) (vk:image-binds ,value) ,ptr)
          %vk:signal-semaphore-count (length (vk:signal-semaphores ,value))
          %vk:p-signal-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:signal-semaphores ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-copy) ptr)
  `(cffi:with-foreign-slots
      ((%vk:src-subresource
        %vk:src-offset
        %vk:dst-subresource
        %vk:dst-offset
        %vk:extent)
       ,ptr
       (:struct %vk:image-copy))
    (setf %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offset ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-blit) ptr)
  `(cffi:with-foreign-slots
      ((%vk:src-subresource
        %vk:src-offsets
        %vk:dst-subresource
        %vk:dst-offsets)
       ,ptr
       (:struct %vk:image-blit))
    (setf %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offsets (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offsets ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offsets (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offsets ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-image-copy) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer-offset
        %vk:buffer-row-length
        %vk:buffer-image-height
        %vk:image-subresource
        %vk:image-offset
        %vk:image-extent)
       ,ptr
       (:struct %vk:buffer-image-copy))
    (setf %vk:buffer-offset (vk:buffer-offset ,value)
          %vk:buffer-row-length (vk:buffer-row-length ,value)
          %vk:buffer-image-height (vk:buffer-image-height ,value)
          %vk:image-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:image-subresource ,value) ,ptr)
          %vk:image-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:image-offset ,value) ,ptr)
          %vk:image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:image-extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-resolve) ptr)
  `(cffi:with-foreign-slots
      ((%vk:src-subresource
        %vk:src-offset
        %vk:dst-subresource
        %vk:dst-offset
        %vk:extent)
       ,ptr
       (:struct %vk:image-resolve))
    (setf %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offset ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shader-module-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:code-size
        %vk:p-code)
       ,ptr
       (:struct %vk:shader-module-create-info))
    (setf %vk:s-type :shader-module-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:code-size (* 4 (length (vk:code ,value)))
          %vk:p-code (vk-alloc:foreign-allocate-and-fill :uint32 (vk:code ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-layout-binding) ptr)
  `(cffi:with-foreign-slots
      ((%vk:binding
        %vk:descriptor-type
        %vk:descriptor-count
        %vk:stage-flags
        %vk:p-immutable-samplers)
       ,ptr
       (:struct %vk:descriptor-set-layout-binding))
    (setf %vk:binding (vk:binding ,value)
          %vk:descriptor-type (vk:descriptor-type ,value)
          %vk:descriptor-count (vk:descriptor-count ,value)
          %vk:stage-flags (vk:stage-flags ,value)
          %vk:p-immutable-samplers (if (vk:immutable-samplers ,value) (vk:immutable-samplers ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-layout-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:binding-count
        %vk:p-bindings)
       ,ptr
       (:struct %vk:descriptor-set-layout-create-info))
    (setf %vk:s-type :descriptor-set-layout-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:binding-count (length (vk:bindings ,value))
          %vk:p-bindings (vk-alloc:foreign-allocate-and-fill '(:struct %vk:descriptor-set-layout-binding) (vk:bindings ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-pool-size) ptr)
  `(cffi:with-foreign-slots
      ((%vk:type
        %vk:descriptor-count)
       ,ptr
       (:struct %vk:descriptor-pool-size))
    (setf %vk:type (vk:type ,value)
          %vk:descriptor-count (vk:descriptor-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-pool-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:max-sets
        %vk:pool-size-count
        %vk:p-pool-sizes)
       ,ptr
       (:struct %vk:descriptor-pool-create-info))
    (setf %vk:s-type :descriptor-pool-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:max-sets (vk:max-sets ,value)
          %vk:pool-size-count (length (vk:pool-sizes ,value))
          %vk:p-pool-sizes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:descriptor-pool-size) (vk:pool-sizes ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:descriptor-pool
        %vk:descriptor-set-count
        %vk:p-set-layouts)
       ,ptr
       (:struct %vk:descriptor-set-allocate-info))
    (setf %vk:s-type :descriptor-set-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:descriptor-pool (if (vk:descriptor-pool ,value) (vk:descriptor-pool ,value) (cffi:null-pointer))
          %vk:descriptor-set-count (length (vk:set-layouts ,value))
          %vk:p-set-layouts (vk-alloc:foreign-allocate-and-fill '%vk:descriptor-set-layout (vk:set-layouts ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-specialization-map-entry) ptr)
  `(cffi:with-foreign-slots
      ((%vk:constant-id
        %vk:offset
        %vk:size)
       ,ptr
       (:struct %vk:specialization-map-entry))
    (setf %vk:constant-id (vk:constant-id ,value)
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-specialization-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:map-entry-count
        %vk:p-map-entries
        %vk:data-size
        %vk:p-data)
       ,ptr
       (:struct %vk:specialization-info))
    (setf %vk:map-entry-count (length (vk:map-entries ,value))
          %vk:p-map-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:specialization-map-entry) (vk:map-entries ,value) ,ptr)
          %vk:data-size (vk:data-size ,value)
          %vk:p-data (if (vk:data ,value) (vk:data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-shader-stage-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stage
        %vk:module
        %vk:p-name
        %vk:p-specialization-info)
       ,ptr
       (:struct %vk:pipeline-shader-stage-create-info))
    (setf %vk:s-type :pipeline-shader-stage-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:stage (vk:stage ,value)
          %vk:module (if (vk:module ,value) (vk:module ,value) (cffi:null-pointer))
          %vk:p-name (vk:name ,value)
          %vk:p-specialization-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:specialization-info) (vk:specialization-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-compute-pipeline-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stage
        %vk:layout
        %vk:base-pipeline-handle
        %vk:base-pipeline-index)
       ,ptr
       (:struct %vk:compute-pipeline-create-info))
    (setf %vk:s-type :compute-pipeline-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:stage (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-shader-stage-create-info) (vk:stage ,value) ,ptr)
          %vk:layout (if (vk:layout ,value) (vk:layout ,value) (cffi:null-pointer))
          %vk:base-pipeline-handle (if (vk:base-pipeline-handle ,value) (vk:base-pipeline-handle ,value) (cffi:null-pointer))
          %vk:base-pipeline-index (vk:base-pipeline-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vertex-input-binding-description) ptr)
  `(cffi:with-foreign-slots
      ((%vk:binding
        %vk:stride
        %vk:input-rate)
       ,ptr
       (:struct %vk:vertex-input-binding-description))
    (setf %vk:binding (vk:binding ,value)
          %vk:stride (vk:stride ,value)
          %vk:input-rate (vk:input-rate ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vertex-input-attribute-description) ptr)
  `(cffi:with-foreign-slots
      ((%vk:location
        %vk:binding
        %vk:format
        %vk:offset)
       ,ptr
       (:struct %vk:vertex-input-attribute-description))
    (setf %vk:location (vk:location ,value)
          %vk:binding (vk:binding ,value)
          %vk:format (vk:format ,value)
          %vk:offset (vk:offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-vertex-input-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:vertex-binding-description-count
        %vk:p-vertex-binding-descriptions
        %vk:vertex-attribute-description-count
        %vk:p-vertex-attribute-descriptions)
       ,ptr
       (:struct %vk:pipeline-vertex-input-state-create-info))
    (setf %vk:s-type :pipeline-vertex-input-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:vertex-binding-description-count (length (vk:vertex-binding-descriptions ,value))
          %vk:p-vertex-binding-descriptions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:vertex-input-binding-description) (vk:vertex-binding-descriptions ,value) ,ptr)
          %vk:vertex-attribute-description-count (length (vk:vertex-attribute-descriptions ,value))
          %vk:p-vertex-attribute-descriptions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:vertex-input-attribute-description) (vk:vertex-attribute-descriptions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-input-assembly-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:topology
        %vk:primitive-restart-enable)
       ,ptr
       (:struct %vk:pipeline-input-assembly-state-create-info))
    (setf %vk:s-type :pipeline-input-assembly-state-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:topology (vk:topology ,value)
          %vk:primitive-restart-enable (vk:primitive-restart-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-tessellation-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:patch-control-points)
       ,ptr
       (:struct %vk:pipeline-tessellation-state-create-info))
    (setf %vk:s-type :pipeline-tessellation-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:patch-control-points (vk:patch-control-points ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:viewport-count
        %vk:p-viewports
        %vk:scissor-count
        %vk:p-scissors)
       ,ptr
       (:struct %vk:pipeline-viewport-state-create-info))
    (setf %vk:s-type :pipeline-viewport-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:viewport-count (length (vk:viewports ,value))
          %vk:p-viewports (vk-alloc:foreign-allocate-and-fill '(:struct %vk:viewport) (vk:viewports ,value) ,ptr)
          %vk:scissor-count (length (vk:scissors ,value))
          %vk:p-scissors (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:scissors ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:depth-clamp-enable
        %vk:rasterizer-discard-enable
        %vk:polygon-mode
        %vk:cull-mode
        %vk:front-face
        %vk:depth-bias-enable
        %vk:depth-bias-constant-factor
        %vk:depth-bias-clamp
        %vk:depth-bias-slope-factor
        %vk:line-width)
       ,ptr
       (:struct %vk:pipeline-rasterization-state-create-info))
    (setf %vk:s-type :pipeline-rasterization-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:depth-clamp-enable (vk:depth-clamp-enable ,value)
          %vk:rasterizer-discard-enable (vk:rasterizer-discard-enable ,value)
          %vk:polygon-mode (vk:polygon-mode ,value)
          %vk:cull-mode (vk:cull-mode ,value)
          %vk:front-face (vk:front-face ,value)
          %vk:depth-bias-enable (vk:depth-bias-enable ,value)
          %vk:depth-bias-constant-factor (vk:depth-bias-constant-factor ,value)
          %vk:depth-bias-clamp (vk:depth-bias-clamp ,value)
          %vk:depth-bias-slope-factor (vk:depth-bias-slope-factor ,value)
          %vk:line-width (vk:line-width ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-multisample-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:rasterization-samples
        %vk:sample-shading-enable
        %vk:min-sample-shading
        %vk:p-sample-mask
        %vk:alpha-to-coverage-enable
        %vk:alpha-to-one-enable)
       ,ptr
       (:struct %vk:pipeline-multisample-state-create-info))
    (setf %vk:s-type :pipeline-multisample-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:rasterization-samples (vk:rasterization-samples ,value)
          %vk:sample-shading-enable (vk:sample-shading-enable ,value)
          %vk:min-sample-shading (vk:min-sample-shading ,value)
          %vk:p-sample-mask (if (vk:sample-mask ,value) (vk:sample-mask ,value) (cffi:null-pointer))
          %vk:alpha-to-coverage-enable (vk:alpha-to-coverage-enable ,value)
          %vk:alpha-to-one-enable (vk:alpha-to-one-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-color-blend-attachment-state) ptr)
  `(cffi:with-foreign-slots
      ((%vk:blend-enable
        %vk:src-color-blend-factor
        %vk:dst-color-blend-factor
        %vk:color-blend-op
        %vk:src-alpha-blend-factor
        %vk:dst-alpha-blend-factor
        %vk:alpha-blend-op
        %vk:color-write-mask)
       ,ptr
       (:struct %vk:pipeline-color-blend-attachment-state))
    (setf %vk:blend-enable (vk:blend-enable ,value)
          %vk:src-color-blend-factor (vk:src-color-blend-factor ,value)
          %vk:dst-color-blend-factor (vk:dst-color-blend-factor ,value)
          %vk:color-blend-op (vk:color-blend-op ,value)
          %vk:src-alpha-blend-factor (vk:src-alpha-blend-factor ,value)
          %vk:dst-alpha-blend-factor (vk:dst-alpha-blend-factor ,value)
          %vk:alpha-blend-op (vk:alpha-blend-op ,value)
          %vk:color-write-mask (vk:color-write-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-color-blend-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:logic-op-enable
        %vk:logic-op
        %vk:attachment-count
        %vk:p-attachments
        %vk:blend-constants)
       ,ptr
       (:struct %vk:pipeline-color-blend-state-create-info))
    (setf %vk:s-type :pipeline-color-blend-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:logic-op-enable (vk:logic-op-enable ,value)
          %vk:logic-op (vk:logic-op ,value)
          %vk:attachment-count (length (vk:attachments ,value))
          %vk:p-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-color-blend-attachment-state) (vk:attachments ,value) ,ptr))
    (cffi:lisp-array-to-foreign (vk:blend-constants ,value) %vk:blend-constants '(:array :float 4))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-dynamic-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:dynamic-state-count
        %vk:p-dynamic-states)
       ,ptr
       (:struct %vk:pipeline-dynamic-state-create-info))
    (setf %vk:s-type :pipeline-dynamic-state-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:dynamic-state-count (length (vk:dynamic-states ,value))
          %vk:p-dynamic-states (vk-alloc:foreign-allocate-and-fill '%vk:dynamic-state (vk:dynamic-states ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-stencil-op-state) ptr)
  `(cffi:with-foreign-slots
      ((%vk:fail-op
        %vk:pass-op
        %vk:depth-fail-op
        %vk:compare-op
        %vk:compare-mask
        %vk:write-mask
        %vk:reference)
       ,ptr
       (:struct %vk:stencil-op-state))
    (setf %vk:fail-op (vk:fail-op ,value)
          %vk:pass-op (vk:pass-op ,value)
          %vk:depth-fail-op (vk:depth-fail-op ,value)
          %vk:compare-op (vk:compare-op ,value)
          %vk:compare-mask (vk:compare-mask ,value)
          %vk:write-mask (vk:write-mask ,value)
          %vk:reference (vk:reference ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-depth-stencil-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:depth-test-enable
        %vk:depth-write-enable
        %vk:depth-compare-op
        %vk:depth-bounds-test-enable
        %vk:stencil-test-enable
        %vk:front
        %vk:back
        %vk:min-depth-bounds
        %vk:max-depth-bounds)
       ,ptr
       (:struct %vk:pipeline-depth-stencil-state-create-info))
    (setf %vk:s-type :pipeline-depth-stencil-state-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:depth-test-enable (vk:depth-test-enable ,value)
          %vk:depth-write-enable (vk:depth-write-enable ,value)
          %vk:depth-compare-op (vk:depth-compare-op ,value)
          %vk:depth-bounds-test-enable (vk:depth-bounds-test-enable ,value)
          %vk:stencil-test-enable (vk:stencil-test-enable ,value)
          %vk:front (vk-alloc:foreign-allocate-and-fill '(:struct %vk:stencil-op-state) (vk:front ,value) ,ptr)
          %vk:back (vk-alloc:foreign-allocate-and-fill '(:struct %vk:stencil-op-state) (vk:back ,value) ,ptr)
          %vk:min-depth-bounds (vk:min-depth-bounds ,value)
          %vk:max-depth-bounds (vk:max-depth-bounds ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-graphics-pipeline-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stage-count
        %vk:p-stages
        %vk:p-vertex-input-state
        %vk:p-input-assembly-state
        %vk:p-tessellation-state
        %vk:p-viewport-state
        %vk:p-rasterization-state
        %vk:p-multisample-state
        %vk:p-depth-stencil-state
        %vk:p-color-blend-state
        %vk:p-dynamic-state
        %vk:layout
        %vk:render-pass
        %vk:subpass
        %vk:base-pipeline-handle
        %vk:base-pipeline-index)
       ,ptr
       (:struct %vk:graphics-pipeline-create-info))
    (setf %vk:s-type :graphics-pipeline-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:stage-count (length (vk:stages ,value))
          %vk:p-stages (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-shader-stage-create-info) (vk:stages ,value) ,ptr)
          %vk:p-vertex-input-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-vertex-input-state-create-info) (vk:vertex-input-state ,value) ,ptr)
          %vk:p-input-assembly-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-input-assembly-state-create-info) (vk:input-assembly-state ,value) ,ptr)
          %vk:p-tessellation-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-tessellation-state-create-info) (vk:tessellation-state ,value) ,ptr)
          %vk:p-viewport-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-viewport-state-create-info) (vk:viewport-state ,value) ,ptr)
          %vk:p-rasterization-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-rasterization-state-create-info) (vk:rasterization-state ,value) ,ptr)
          %vk:p-multisample-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-multisample-state-create-info) (vk:multisample-state ,value) ,ptr)
          %vk:p-depth-stencil-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-depth-stencil-state-create-info) (vk:depth-stencil-state ,value) ,ptr)
          %vk:p-color-blend-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-color-blend-state-create-info) (vk:color-blend-state ,value) ,ptr)
          %vk:p-dynamic-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-dynamic-state-create-info) (vk:dynamic-state ,value) ,ptr)
          %vk:layout (if (vk:layout ,value) (vk:layout ,value) (cffi:null-pointer))
          %vk:render-pass (if (vk:render-pass ,value) (vk:render-pass ,value) (cffi:null-pointer))
          %vk:subpass (vk:subpass ,value)
          %vk:base-pipeline-handle (if (vk:base-pipeline-handle ,value) (vk:base-pipeline-handle ,value) (cffi:null-pointer))
          %vk:base-pipeline-index (vk:base-pipeline-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-cache-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:initial-data-size
        %vk:p-initial-data)
       ,ptr
       (:struct %vk:pipeline-cache-create-info))
    (setf %vk:s-type :pipeline-cache-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:initial-data-size (vk:initial-data-size ,value)
          %vk:p-initial-data (if (vk:initial-data ,value) (vk:initial-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-push-constant-range) ptr)
  `(cffi:with-foreign-slots
      ((%vk:stage-flags
        %vk:offset
        %vk:size)
       ,ptr
       (:struct %vk:push-constant-range))
    (setf %vk:stage-flags (vk:stage-flags ,value)
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-layout-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:set-layout-count
        %vk:p-set-layouts
        %vk:push-constant-range-count
        %vk:p-push-constant-ranges)
       ,ptr
       (:struct %vk:pipeline-layout-create-info))
    (setf %vk:s-type :pipeline-layout-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:set-layout-count (length (vk:set-layouts ,value))
          %vk:p-set-layouts (vk-alloc:foreign-allocate-and-fill '%vk:descriptor-set-layout (vk:set-layouts ,value) ,ptr)
          %vk:push-constant-range-count (length (vk:push-constant-ranges ,value))
          %vk:p-push-constant-ranges (vk-alloc:foreign-allocate-and-fill '(:struct %vk:push-constant-range) (vk:push-constant-ranges ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:mag-filter
        %vk:min-filter
        %vk:mipmap-mode
        %vk:address-mode-u
        %vk:address-mode-v
        %vk:address-mode-w
        %vk:mip-lod-bias
        %vk:anisotropy-enable
        %vk:max-anisotropy
        %vk:compare-enable
        %vk:compare-op
        %vk:min-lod
        %vk:max-lod
        %vk:border-color
        %vk:unnormalized-coordinates)
       ,ptr
       (:struct %vk:sampler-create-info))
    (setf %vk:s-type :sampler-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:mag-filter (vk:mag-filter ,value)
          %vk:min-filter (vk:min-filter ,value)
          %vk:mipmap-mode (vk:mipmap-mode ,value)
          %vk:address-mode-u (vk:address-mode-u ,value)
          %vk:address-mode-v (vk:address-mode-v ,value)
          %vk:address-mode-w (vk:address-mode-w ,value)
          %vk:mip-lod-bias (vk:mip-lod-bias ,value)
          %vk:anisotropy-enable (vk:anisotropy-enable ,value)
          %vk:max-anisotropy (vk:max-anisotropy ,value)
          %vk:compare-enable (vk:compare-enable ,value)
          %vk:compare-op (vk:compare-op ,value)
          %vk:min-lod (vk:min-lod ,value)
          %vk:max-lod (vk:max-lod ,value)
          %vk:border-color (vk:border-color ,value)
          %vk:unnormalized-coordinates (vk:unnormalized-coordinates ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-pool-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:queue-family-index)
       ,ptr
       (:struct %vk:command-pool-create-info))
    (setf %vk:s-type :command-pool-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:queue-family-index (vk:queue-family-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:command-pool
        %vk:level
        %vk:command-buffer-count)
       ,ptr
       (:struct %vk:command-buffer-allocate-info))
    (setf %vk:s-type :command-buffer-allocate-info
          %vk:p-next (cffi:null-pointer)
          %vk:command-pool (if (vk:command-pool ,value) (vk:command-pool ,value) (cffi:null-pointer))
          %vk:level (vk:level ,value)
          %vk:command-buffer-count (vk:command-buffer-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-inheritance-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:render-pass
        %vk:subpass
        %vk:framebuffer
        %vk:occlusion-query-enable
        %vk:query-flags
        %vk:pipeline-statistics)
       ,ptr
       (:struct %vk:command-buffer-inheritance-info))
    (setf %vk:s-type :command-buffer-inheritance-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:render-pass (if (vk:render-pass ,value) (vk:render-pass ,value) (cffi:null-pointer))
          %vk:subpass (vk:subpass ,value)
          %vk:framebuffer (if (vk:framebuffer ,value) (vk:framebuffer ,value) (cffi:null-pointer))
          %vk:occlusion-query-enable (vk:occlusion-query-enable ,value)
          %vk:query-flags (vk:query-flags ,value)
          %vk:pipeline-statistics (vk:pipeline-statistics ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-inheritance-info)
       ,ptr
       (:struct %vk:command-buffer-begin-info))
    (setf %vk:s-type :command-buffer-begin-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:p-inheritance-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:command-buffer-inheritance-info) (vk:inheritance-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:render-pass
        %vk:framebuffer
        %vk:render-area
        %vk:clear-value-count
        %vk:p-clear-values)
       ,ptr
       (:struct %vk:render-pass-begin-info))
    (setf %vk:s-type :render-pass-begin-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:render-pass (if (vk:render-pass ,value) (vk:render-pass ,value) (cffi:null-pointer))
          %vk:framebuffer (if (vk:framebuffer ,value) (vk:framebuffer ,value) (cffi:null-pointer))
          %vk:render-area (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:render-area ,value) ,ptr)
          %vk:clear-value-count (length (vk:clear-values ,value))
          %vk:p-clear-values (vk-alloc:foreign-allocate-and-fill '(:union %vk:clear-value) (vk:clear-values ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory ((value vk:clear-color-value) type ptr)
  `(cond
    ((slot-boundp ,value 'vk:float-32)
     (cffi:lisp-array-to-foreign (vk:float-32 ,value) ,ptr '(:array :float 4)))
    ((slot-boundp ,value 'vk:int-32)
     (cffi:lisp-array-to-foreign (vk:int-32 ,value) ,ptr '(:array :int32 4)))
    ((slot-boundp ,value 'vk:uint-32)
     (cffi:lisp-array-to-foreign (vk:uint-32 ,value) ,ptr '(:array :uint32 4)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-clear-depth-stencil-value) ptr)
  `(cffi:with-foreign-slots
      ((%vk:depth
        %vk:stencil)
       ,ptr
       (:struct %vk:clear-depth-stencil-value))
    (setf %vk:depth (vk:depth ,value)
          %vk:stencil (vk:stencil ,value))))

(defmethod cffi:expand-into-foreign-memory ((value vk:clear-value) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:color
        %vk:depth-stencil)
       ,ptr
       (:union %vk:clear-value))
     (cond
      ((slot-boundp ,value 'vk:color)
       (setf %vk:color
             (vk-alloc:foreign-allocate-and-fill '(:union %vk:clear-color-value)
                                                  (vk:color ,value)
                                                  ,ptr)))
      ((slot-boundp ,value 'vk:depth-stencil)
       (setf %vk:depth-stencil
             (vk-alloc:foreign-allocate-and-fill '(:struct %vk:clear-depth-stencil-value)
                                                  (vk:depth-stencil ,value)
                                                  ,ptr))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-clear-attachment) ptr)
  `(cffi:with-foreign-slots
      ((%vk:aspect-mask
        %vk:color-attachment
        %vk:clear-value)
       ,ptr
       (:struct %vk:clear-attachment))
    (setf %vk:aspect-mask (vk:aspect-mask ,value)
          %vk:color-attachment (vk:color-attachment ,value)
          %vk:clear-value (vk-alloc:foreign-allocate-and-fill '(:union %vk:clear-value) (vk:clear-value ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-description) ptr)
  `(cffi:with-foreign-slots
      ((%vk:flags
        %vk:format
        %vk:samples
        %vk:load-op
        %vk:store-op
        %vk:stencil-load-op
        %vk:stencil-store-op
        %vk:initial-layout
        %vk:final-layout)
       ,ptr
       (:struct %vk:attachment-description))
    (setf %vk:flags (vk:flags ,value)
          %vk:format (vk:format ,value)
          %vk:samples (vk:samples ,value)
          %vk:load-op (vk:load-op ,value)
          %vk:store-op (vk:store-op ,value)
          %vk:stencil-load-op (vk:stencil-load-op ,value)
          %vk:stencil-store-op (vk:stencil-store-op ,value)
          %vk:initial-layout (vk:initial-layout ,value)
          %vk:final-layout (vk:final-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-reference) ptr)
  `(cffi:with-foreign-slots
      ((%vk:attachment
        %vk:layout)
       ,ptr
       (:struct %vk:attachment-reference))
    (setf %vk:attachment (vk:attachment ,value)
          %vk:layout (vk:layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-description) ptr)
  `(cffi:with-foreign-slots
      ((%vk:flags
        %vk:pipeline-bind-point
        %vk:input-attachment-count
        %vk:p-input-attachments
        %vk:color-attachment-count
        %vk:p-color-attachments
        %vk:p-resolve-attachments
        %vk:p-depth-stencil-attachment
        %vk:preserve-attachment-count
        %vk:p-preserve-attachments)
       ,ptr
       (:struct %vk:subpass-description))
    (setf %vk:flags (vk:flags ,value)
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:input-attachment-count (length (vk:input-attachments ,value))
          %vk:p-input-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference) (vk:input-attachments ,value) ,ptr)
          %vk:color-attachment-count (reduce #'max (list (length (vk:color-attachments ,value))(length (vk:resolve-attachments ,value))))
          %vk:p-color-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference) (vk:color-attachments ,value) ,ptr)
          %vk:p-resolve-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference) (vk:resolve-attachments ,value) ,ptr)
          %vk:p-depth-stencil-attachment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference) (vk:depth-stencil-attachment ,value) ,ptr)
          %vk:preserve-attachment-count (length (vk:preserve-attachments ,value))
          %vk:p-preserve-attachments (vk-alloc:foreign-allocate-and-fill :uint32 (vk:preserve-attachments ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-dependency) ptr)
  `(cffi:with-foreign-slots
      ((%vk:src-subpass
        %vk:dst-subpass
        %vk:src-stage-mask
        %vk:dst-stage-mask
        %vk:src-access-mask
        %vk:dst-access-mask
        %vk:dependency-flags)
       ,ptr
       (:struct %vk:subpass-dependency))
    (setf %vk:src-subpass (vk:src-subpass ,value)
          %vk:dst-subpass (vk:dst-subpass ,value)
          %vk:src-stage-mask (vk:src-stage-mask ,value)
          %vk:dst-stage-mask (vk:dst-stage-mask ,value)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:dependency-flags (vk:dependency-flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:attachment-count
        %vk:p-attachments
        %vk:subpass-count
        %vk:p-subpasses
        %vk:dependency-count
        %vk:p-dependencies)
       ,ptr
       (:struct %vk:render-pass-create-info))
    (setf %vk:s-type :render-pass-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:attachment-count (length (vk:attachments ,value))
          %vk:p-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-description) (vk:attachments ,value) ,ptr)
          %vk:subpass-count (length (vk:subpasses ,value))
          %vk:p-subpasses (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subpass-description) (vk:subpasses ,value) ,ptr)
          %vk:dependency-count (length (vk:dependencies ,value))
          %vk:p-dependencies (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subpass-dependency) (vk:dependencies ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-event-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:event-create-info))
    (setf %vk:s-type :event-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-fence-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:fence-create-info))
    (setf %vk:s-type :fence-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:robust-buffer-access
        %vk:full-draw-index-uint-32
        %vk:image-cube-array
        %vk:independent-blend
        %vk:geometry-shader
        %vk:tessellation-shader
        %vk:sample-rate-shading
        %vk:dual-src-blend
        %vk:logic-op
        %vk:multi-draw-indirect
        %vk:draw-indirect-first-instance
        %vk:depth-clamp
        %vk:depth-bias-clamp
        %vk:fill-mode-non-solid
        %vk:depth-bounds
        %vk:wide-lines
        %vk:large-points
        %vk:alpha-to-one
        %vk:multi-viewport
        %vk:sampler-anisotropy
        %vk:texture-compression-etc2
        %vk:texture-compression-astc_-ldr
        %vk:texture-compression-bc
        %vk:occlusion-query-precise
        %vk:pipeline-statistics-query
        %vk:vertex-pipeline-stores-and-atomics
        %vk:fragment-stores-and-atomics
        %vk:shader-tessellation-and-geometry-point-size
        %vk:shader-image-gather-extended
        %vk:shader-storage-image-extended-formats
        %vk:shader-storage-image-multisample
        %vk:shader-storage-image-read-without-format
        %vk:shader-storage-image-write-without-format
        %vk:shader-uniform-buffer-array-dynamic-indexing
        %vk:shader-sampled-image-array-dynamic-indexing
        %vk:shader-storage-buffer-array-dynamic-indexing
        %vk:shader-storage-image-array-dynamic-indexing
        %vk:shader-clip-distance
        %vk:shader-cull-distance
        %vk:shader-float-64
        %vk:shader-int-64
        %vk:shader-int-16
        %vk:shader-resource-residency
        %vk:shader-resource-min-lod
        %vk:sparse-binding
        %vk:sparse-residency-buffer
        %vk:sparse-residency-image-2d
        %vk:sparse-residency-image-3d
        %vk:sparse-residency-2-samples
        %vk:sparse-residency-4-samples
        %vk:sparse-residency-8-samples
        %vk:sparse-residency-16-samples
        %vk:sparse-residency-aliased
        %vk:variable-multisample-rate
        %vk:inherited-queries)
       ,ptr
       (:struct %vk:physical-device-features))
    (setf %vk:robust-buffer-access (vk:robust-buffer-access ,value)
          %vk:full-draw-index-uint-32 (vk:full-draw-index-uint-32 ,value)
          %vk:image-cube-array (vk:image-cube-array ,value)
          %vk:independent-blend (vk:independent-blend ,value)
          %vk:geometry-shader (vk:geometry-shader ,value)
          %vk:tessellation-shader (vk:tessellation-shader ,value)
          %vk:sample-rate-shading (vk:sample-rate-shading ,value)
          %vk:dual-src-blend (vk:dual-src-blend ,value)
          %vk:logic-op (vk:logic-op ,value)
          %vk:multi-draw-indirect (vk:multi-draw-indirect ,value)
          %vk:draw-indirect-first-instance (vk:draw-indirect-first-instance ,value)
          %vk:depth-clamp (vk:depth-clamp ,value)
          %vk:depth-bias-clamp (vk:depth-bias-clamp ,value)
          %vk:fill-mode-non-solid (vk:fill-mode-non-solid ,value)
          %vk:depth-bounds (vk:depth-bounds ,value)
          %vk:wide-lines (vk:wide-lines ,value)
          %vk:large-points (vk:large-points ,value)
          %vk:alpha-to-one (vk:alpha-to-one ,value)
          %vk:multi-viewport (vk:multi-viewport ,value)
          %vk:sampler-anisotropy (vk:sampler-anisotropy ,value)
          %vk:texture-compression-etc2 (vk:texture-compression-etc2 ,value)
          %vk:texture-compression-astc_-ldr (vk:texture-compression-astc_-ldr ,value)
          %vk:texture-compression-bc (vk:texture-compression-bc ,value)
          %vk:occlusion-query-precise (vk:occlusion-query-precise ,value)
          %vk:pipeline-statistics-query (vk:pipeline-statistics-query ,value)
          %vk:vertex-pipeline-stores-and-atomics (vk:vertex-pipeline-stores-and-atomics ,value)
          %vk:fragment-stores-and-atomics (vk:fragment-stores-and-atomics ,value)
          %vk:shader-tessellation-and-geometry-point-size (vk:shader-tessellation-and-geometry-point-size ,value)
          %vk:shader-image-gather-extended (vk:shader-image-gather-extended ,value)
          %vk:shader-storage-image-extended-formats (vk:shader-storage-image-extended-formats ,value)
          %vk:shader-storage-image-multisample (vk:shader-storage-image-multisample ,value)
          %vk:shader-storage-image-read-without-format (vk:shader-storage-image-read-without-format ,value)
          %vk:shader-storage-image-write-without-format (vk:shader-storage-image-write-without-format ,value)
          %vk:shader-uniform-buffer-array-dynamic-indexing (vk:shader-uniform-buffer-array-dynamic-indexing ,value)
          %vk:shader-sampled-image-array-dynamic-indexing (vk:shader-sampled-image-array-dynamic-indexing ,value)
          %vk:shader-storage-buffer-array-dynamic-indexing (vk:shader-storage-buffer-array-dynamic-indexing ,value)
          %vk:shader-storage-image-array-dynamic-indexing (vk:shader-storage-image-array-dynamic-indexing ,value)
          %vk:shader-clip-distance (vk:shader-clip-distance ,value)
          %vk:shader-cull-distance (vk:shader-cull-distance ,value)
          %vk:shader-float-64 (vk:shader-float-64 ,value)
          %vk:shader-int-64 (vk:shader-int-64 ,value)
          %vk:shader-int-16 (vk:shader-int-16 ,value)
          %vk:shader-resource-residency (vk:shader-resource-residency ,value)
          %vk:shader-resource-min-lod (vk:shader-resource-min-lod ,value)
          %vk:sparse-binding (vk:sparse-binding ,value)
          %vk:sparse-residency-buffer (vk:sparse-residency-buffer ,value)
          %vk:sparse-residency-image-2d (vk:sparse-residency-image-2d ,value)
          %vk:sparse-residency-image-3d (vk:sparse-residency-image-3d ,value)
          %vk:sparse-residency-2-samples (vk:sparse-residency-2-samples ,value)
          %vk:sparse-residency-4-samples (vk:sparse-residency-4-samples ,value)
          %vk:sparse-residency-8-samples (vk:sparse-residency-8-samples ,value)
          %vk:sparse-residency-16-samples (vk:sparse-residency-16-samples ,value)
          %vk:sparse-residency-aliased (vk:sparse-residency-aliased ,value)
          %vk:variable-multisample-rate (vk:variable-multisample-rate ,value)
          %vk:inherited-queries (vk:inherited-queries ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-sparse-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:residency-standard-2d-block-shape
        %vk:residency-standard-2d-multisample-block-shape
        %vk:residency-standard-3d-block-shape
        %vk:residency-aligned-mip-size
        %vk:residency-non-resident-strict)
       ,ptr
       (:struct %vk:physical-device-sparse-properties))
    (setf %vk:residency-standard-2d-block-shape (vk:residency-standard-2d-block-shape ,value)
          %vk:residency-standard-2d-multisample-block-shape (vk:residency-standard-2d-multisample-block-shape ,value)
          %vk:residency-standard-3d-block-shape (vk:residency-standard-3d-block-shape ,value)
          %vk:residency-aligned-mip-size (vk:residency-aligned-mip-size ,value)
          %vk:residency-non-resident-strict (vk:residency-non-resident-strict ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-limits) ptr)
  `(cffi:with-foreign-slots
      ((%vk:max-image-dimension-1d
        %vk:max-image-dimension-2d
        %vk:max-image-dimension-3d
        %vk:max-image-dimension-cube
        %vk:max-image-array-layers
        %vk:max-texel-buffer-elements
        %vk:max-uniform-buffer-range
        %vk:max-storage-buffer-range
        %vk:max-push-constants-size
        %vk:max-memory-allocation-count
        %vk:max-sampler-allocation-count
        %vk:buffer-image-granularity
        %vk:sparse-address-space-size
        %vk:max-bound-descriptor-sets
        %vk:max-per-stage-descriptor-samplers
        %vk:max-per-stage-descriptor-uniform-buffers
        %vk:max-per-stage-descriptor-storage-buffers
        %vk:max-per-stage-descriptor-sampled-images
        %vk:max-per-stage-descriptor-storage-images
        %vk:max-per-stage-descriptor-input-attachments
        %vk:max-per-stage-resources
        %vk:max-descriptor-set-samplers
        %vk:max-descriptor-set-uniform-buffers
        %vk:max-descriptor-set-uniform-buffers-dynamic
        %vk:max-descriptor-set-storage-buffers
        %vk:max-descriptor-set-storage-buffers-dynamic
        %vk:max-descriptor-set-sampled-images
        %vk:max-descriptor-set-storage-images
        %vk:max-descriptor-set-input-attachments
        %vk:max-vertex-input-attributes
        %vk:max-vertex-input-bindings
        %vk:max-vertex-input-attribute-offset
        %vk:max-vertex-input-binding-stride
        %vk:max-vertex-output-components
        %vk:max-tessellation-generation-level
        %vk:max-tessellation-patch-size
        %vk:max-tessellation-control-per-vertex-input-components
        %vk:max-tessellation-control-per-vertex-output-components
        %vk:max-tessellation-control-per-patch-output-components
        %vk:max-tessellation-control-total-output-components
        %vk:max-tessellation-evaluation-input-components
        %vk:max-tessellation-evaluation-output-components
        %vk:max-geometry-shader-invocations
        %vk:max-geometry-input-components
        %vk:max-geometry-output-components
        %vk:max-geometry-output-vertices
        %vk:max-geometry-total-output-components
        %vk:max-fragment-input-components
        %vk:max-fragment-output-attachments
        %vk:max-fragment-dual-src-attachments
        %vk:max-fragment-combined-output-resources
        %vk:max-compute-shared-memory-size
        %vk:max-compute-work-group-count
        %vk:max-compute-work-group-invocations
        %vk:max-compute-work-group-size
        %vk:sub-pixel-precision-bits
        %vk:sub-texel-precision-bits
        %vk:mipmap-precision-bits
        %vk:max-draw-indexed-index-value
        %vk:max-draw-indirect-count
        %vk:max-sampler-lod-bias
        %vk:max-sampler-anisotropy
        %vk:max-viewports
        %vk:max-viewport-dimensions
        %vk:viewport-bounds-range
        %vk:viewport-sub-pixel-bits
        %vk:min-memory-map-alignment
        %vk:min-texel-buffer-offset-alignment
        %vk:min-uniform-buffer-offset-alignment
        %vk:min-storage-buffer-offset-alignment
        %vk:min-texel-offset
        %vk:max-texel-offset
        %vk:min-texel-gather-offset
        %vk:max-texel-gather-offset
        %vk:min-interpolation-offset
        %vk:max-interpolation-offset
        %vk:sub-pixel-interpolation-offset-bits
        %vk:max-framebuffer-width
        %vk:max-framebuffer-height
        %vk:max-framebuffer-layers
        %vk:framebuffer-color-sample-counts
        %vk:framebuffer-depth-sample-counts
        %vk:framebuffer-stencil-sample-counts
        %vk:framebuffer-no-attachments-sample-counts
        %vk:max-color-attachments
        %vk:sampled-image-color-sample-counts
        %vk:sampled-image-integer-sample-counts
        %vk:sampled-image-depth-sample-counts
        %vk:sampled-image-stencil-sample-counts
        %vk:storage-image-sample-counts
        %vk:max-sample-mask-words
        %vk:timestamp-compute-and-graphics
        %vk:timestamp-period
        %vk:max-clip-distances
        %vk:max-cull-distances
        %vk:max-combined-clip-and-cull-distances
        %vk:discrete-queue-priorities
        %vk:point-size-range
        %vk:line-width-range
        %vk:point-size-granularity
        %vk:line-width-granularity
        %vk:strict-lines
        %vk:standard-sample-locations
        %vk:optimal-buffer-copy-offset-alignment
        %vk:optimal-buffer-copy-row-pitch-alignment
        %vk:non-coherent-atom-size)
       ,ptr
       (:struct %vk:physical-device-limits))
    (setf %vk:max-image-dimension-1d (vk:max-image-dimension-1d ,value)
          %vk:max-image-dimension-2d (vk:max-image-dimension-2d ,value)
          %vk:max-image-dimension-3d (vk:max-image-dimension-3d ,value)
          %vk:max-image-dimension-cube (vk:max-image-dimension-cube ,value)
          %vk:max-image-array-layers (vk:max-image-array-layers ,value)
          %vk:max-texel-buffer-elements (vk:max-texel-buffer-elements ,value)
          %vk:max-uniform-buffer-range (vk:max-uniform-buffer-range ,value)
          %vk:max-storage-buffer-range (vk:max-storage-buffer-range ,value)
          %vk:max-push-constants-size (vk:max-push-constants-size ,value)
          %vk:max-memory-allocation-count (vk:max-memory-allocation-count ,value)
          %vk:max-sampler-allocation-count (vk:max-sampler-allocation-count ,value)
          %vk:buffer-image-granularity (vk:buffer-image-granularity ,value)
          %vk:sparse-address-space-size (vk:sparse-address-space-size ,value)
          %vk:max-bound-descriptor-sets (vk:max-bound-descriptor-sets ,value)
          %vk:max-per-stage-descriptor-samplers (vk:max-per-stage-descriptor-samplers ,value)
          %vk:max-per-stage-descriptor-uniform-buffers (vk:max-per-stage-descriptor-uniform-buffers ,value)
          %vk:max-per-stage-descriptor-storage-buffers (vk:max-per-stage-descriptor-storage-buffers ,value)
          %vk:max-per-stage-descriptor-sampled-images (vk:max-per-stage-descriptor-sampled-images ,value)
          %vk:max-per-stage-descriptor-storage-images (vk:max-per-stage-descriptor-storage-images ,value)
          %vk:max-per-stage-descriptor-input-attachments (vk:max-per-stage-descriptor-input-attachments ,value)
          %vk:max-per-stage-resources (vk:max-per-stage-resources ,value)
          %vk:max-descriptor-set-samplers (vk:max-descriptor-set-samplers ,value)
          %vk:max-descriptor-set-uniform-buffers (vk:max-descriptor-set-uniform-buffers ,value)
          %vk:max-descriptor-set-uniform-buffers-dynamic (vk:max-descriptor-set-uniform-buffers-dynamic ,value)
          %vk:max-descriptor-set-storage-buffers (vk:max-descriptor-set-storage-buffers ,value)
          %vk:max-descriptor-set-storage-buffers-dynamic (vk:max-descriptor-set-storage-buffers-dynamic ,value)
          %vk:max-descriptor-set-sampled-images (vk:max-descriptor-set-sampled-images ,value)
          %vk:max-descriptor-set-storage-images (vk:max-descriptor-set-storage-images ,value)
          %vk:max-descriptor-set-input-attachments (vk:max-descriptor-set-input-attachments ,value)
          %vk:max-vertex-input-attributes (vk:max-vertex-input-attributes ,value)
          %vk:max-vertex-input-bindings (vk:max-vertex-input-bindings ,value)
          %vk:max-vertex-input-attribute-offset (vk:max-vertex-input-attribute-offset ,value)
          %vk:max-vertex-input-binding-stride (vk:max-vertex-input-binding-stride ,value)
          %vk:max-vertex-output-components (vk:max-vertex-output-components ,value)
          %vk:max-tessellation-generation-level (vk:max-tessellation-generation-level ,value)
          %vk:max-tessellation-patch-size (vk:max-tessellation-patch-size ,value)
          %vk:max-tessellation-control-per-vertex-input-components (vk:max-tessellation-control-per-vertex-input-components ,value)
          %vk:max-tessellation-control-per-vertex-output-components (vk:max-tessellation-control-per-vertex-output-components ,value)
          %vk:max-tessellation-control-per-patch-output-components (vk:max-tessellation-control-per-patch-output-components ,value)
          %vk:max-tessellation-control-total-output-components (vk:max-tessellation-control-total-output-components ,value)
          %vk:max-tessellation-evaluation-input-components (vk:max-tessellation-evaluation-input-components ,value)
          %vk:max-tessellation-evaluation-output-components (vk:max-tessellation-evaluation-output-components ,value)
          %vk:max-geometry-shader-invocations (vk:max-geometry-shader-invocations ,value)
          %vk:max-geometry-input-components (vk:max-geometry-input-components ,value)
          %vk:max-geometry-output-components (vk:max-geometry-output-components ,value)
          %vk:max-geometry-output-vertices (vk:max-geometry-output-vertices ,value)
          %vk:max-geometry-total-output-components (vk:max-geometry-total-output-components ,value)
          %vk:max-fragment-input-components (vk:max-fragment-input-components ,value)
          %vk:max-fragment-output-attachments (vk:max-fragment-output-attachments ,value)
          %vk:max-fragment-dual-src-attachments (vk:max-fragment-dual-src-attachments ,value)
          %vk:max-fragment-combined-output-resources (vk:max-fragment-combined-output-resources ,value)
          %vk:max-compute-shared-memory-size (vk:max-compute-shared-memory-size ,value)
          %vk:max-compute-work-group-invocations (vk:max-compute-work-group-invocations ,value)
          %vk:sub-pixel-precision-bits (vk:sub-pixel-precision-bits ,value)
          %vk:sub-texel-precision-bits (vk:sub-texel-precision-bits ,value)
          %vk:mipmap-precision-bits (vk:mipmap-precision-bits ,value)
          %vk:max-draw-indexed-index-value (vk:max-draw-indexed-index-value ,value)
          %vk:max-draw-indirect-count (vk:max-draw-indirect-count ,value)
          %vk:max-sampler-lod-bias (vk:max-sampler-lod-bias ,value)
          %vk:max-sampler-anisotropy (vk:max-sampler-anisotropy ,value)
          %vk:max-viewports (vk:max-viewports ,value)
          %vk:viewport-sub-pixel-bits (vk:viewport-sub-pixel-bits ,value)
          %vk:min-memory-map-alignment (vk:min-memory-map-alignment ,value)
          %vk:min-texel-buffer-offset-alignment (vk:min-texel-buffer-offset-alignment ,value)
          %vk:min-uniform-buffer-offset-alignment (vk:min-uniform-buffer-offset-alignment ,value)
          %vk:min-storage-buffer-offset-alignment (vk:min-storage-buffer-offset-alignment ,value)
          %vk:min-texel-offset (vk:min-texel-offset ,value)
          %vk:max-texel-offset (vk:max-texel-offset ,value)
          %vk:min-texel-gather-offset (vk:min-texel-gather-offset ,value)
          %vk:max-texel-gather-offset (vk:max-texel-gather-offset ,value)
          %vk:min-interpolation-offset (vk:min-interpolation-offset ,value)
          %vk:max-interpolation-offset (vk:max-interpolation-offset ,value)
          %vk:sub-pixel-interpolation-offset-bits (vk:sub-pixel-interpolation-offset-bits ,value)
          %vk:max-framebuffer-width (vk:max-framebuffer-width ,value)
          %vk:max-framebuffer-height (vk:max-framebuffer-height ,value)
          %vk:max-framebuffer-layers (vk:max-framebuffer-layers ,value)
          %vk:framebuffer-color-sample-counts (vk:framebuffer-color-sample-counts ,value)
          %vk:framebuffer-depth-sample-counts (vk:framebuffer-depth-sample-counts ,value)
          %vk:framebuffer-stencil-sample-counts (vk:framebuffer-stencil-sample-counts ,value)
          %vk:framebuffer-no-attachments-sample-counts (vk:framebuffer-no-attachments-sample-counts ,value)
          %vk:max-color-attachments (vk:max-color-attachments ,value)
          %vk:sampled-image-color-sample-counts (vk:sampled-image-color-sample-counts ,value)
          %vk:sampled-image-integer-sample-counts (vk:sampled-image-integer-sample-counts ,value)
          %vk:sampled-image-depth-sample-counts (vk:sampled-image-depth-sample-counts ,value)
          %vk:sampled-image-stencil-sample-counts (vk:sampled-image-stencil-sample-counts ,value)
          %vk:storage-image-sample-counts (vk:storage-image-sample-counts ,value)
          %vk:max-sample-mask-words (vk:max-sample-mask-words ,value)
          %vk:timestamp-compute-and-graphics (vk:timestamp-compute-and-graphics ,value)
          %vk:timestamp-period (vk:timestamp-period ,value)
          %vk:max-clip-distances (vk:max-clip-distances ,value)
          %vk:max-cull-distances (vk:max-cull-distances ,value)
          %vk:max-combined-clip-and-cull-distances (vk:max-combined-clip-and-cull-distances ,value)
          %vk:discrete-queue-priorities (vk:discrete-queue-priorities ,value)
          %vk:point-size-granularity (vk:point-size-granularity ,value)
          %vk:line-width-granularity (vk:line-width-granularity ,value)
          %vk:strict-lines (vk:strict-lines ,value)
          %vk:standard-sample-locations (vk:standard-sample-locations ,value)
          %vk:optimal-buffer-copy-offset-alignment (vk:optimal-buffer-copy-offset-alignment ,value)
          %vk:optimal-buffer-copy-row-pitch-alignment (vk:optimal-buffer-copy-row-pitch-alignment ,value)
          %vk:non-coherent-atom-size (vk:non-coherent-atom-size ,value))
    (cffi:lisp-array-to-foreign (vk:max-compute-work-group-count ,value) %vk:max-compute-work-group-count '(:array :uint32 3))
    (cffi:lisp-array-to-foreign (vk:max-compute-work-group-size ,value) %vk:max-compute-work-group-size '(:array :uint32 3))
    (cffi:lisp-array-to-foreign (vk:max-viewport-dimensions ,value) %vk:max-viewport-dimensions '(:array :uint32 2))
    (cffi:lisp-array-to-foreign (vk:viewport-bounds-range ,value) %vk:viewport-bounds-range '(:array :float 2))
    (cffi:lisp-array-to-foreign (vk:point-size-range ,value) %vk:point-size-range '(:array :float 2))
    (cffi:lisp-array-to-foreign (vk:line-width-range ,value) %vk:line-width-range '(:array :float 2))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:semaphore-create-info))
    (setf %vk:s-type :semaphore-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-query-pool-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:query-type
        %vk:query-count
        %vk:pipeline-statistics)
       ,ptr
       (:struct %vk:query-pool-create-info))
    (setf %vk:s-type :query-pool-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:query-type (vk:query-type ,value)
          %vk:query-count (vk:query-count ,value)
          %vk:pipeline-statistics (vk:pipeline-statistics ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-framebuffer-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:render-pass
        %vk:attachment-count
        %vk:p-attachments
        %vk:width
        %vk:height
        %vk:layers)
       ,ptr
       (:struct %vk:framebuffer-create-info))
    (setf %vk:s-type :framebuffer-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:render-pass (if (vk:render-pass ,value) (vk:render-pass ,value) (cffi:null-pointer))
          %vk:attachment-count (length (vk:attachments ,value))
          %vk:p-attachments (vk-alloc:foreign-allocate-and-fill '%vk:image-view (vk:attachments ,value) ,ptr)
          %vk:width (vk:width ,value)
          %vk:height (vk:height ,value)
          %vk:layers (vk:layers ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-draw-indirect-command) ptr)
  `(cffi:with-foreign-slots
      ((%vk:vertex-count
        %vk:instance-count
        %vk:first-vertex
        %vk:first-instance)
       ,ptr
       (:struct %vk:draw-indirect-command))
    (setf %vk:vertex-count (vk:vertex-count ,value)
          %vk:instance-count (vk:instance-count ,value)
          %vk:first-vertex (vk:first-vertex ,value)
          %vk:first-instance (vk:first-instance ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-draw-indexed-indirect-command) ptr)
  `(cffi:with-foreign-slots
      ((%vk:index-count
        %vk:instance-count
        %vk:first-index
        %vk:vertex-offset
        %vk:first-instance)
       ,ptr
       (:struct %vk:draw-indexed-indirect-command))
    (setf %vk:index-count (vk:index-count ,value)
          %vk:instance-count (vk:instance-count ,value)
          %vk:first-index (vk:first-index ,value)
          %vk:vertex-offset (vk:vertex-offset ,value)
          %vk:first-instance (vk:first-instance ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-dispatch-indirect-command) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y
        %vk:z)
       ,ptr
       (:struct %vk:dispatch-indirect-command))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value)
          %vk:z (vk:z ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-submit-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-count
        %vk:p-wait-semaphores
        %vk:p-wait-dst-stage-mask
        %vk:command-buffer-count
        %vk:p-command-buffers
        %vk:signal-semaphore-count
        %vk:p-signal-semaphores)
       ,ptr
       (:struct %vk:submit-info))
    (setf %vk:s-type :submit-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-count (reduce #'max (list (length (vk:p-wait-semaphores ,value))(length (vk:wait-dst-stage-mask ,value))))
          %vk:p-wait-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:p-wait-semaphores ,value) ,ptr)
          %vk:p-wait-dst-stage-mask (vk-alloc:foreign-allocate-and-fill '%vk:pipeline-stage-flags (vk:wait-dst-stage-mask ,value) ,ptr)
          %vk:command-buffer-count (length (vk:command-buffers ,value))
          %vk:p-command-buffers (vk-alloc:foreign-allocate-and-fill '%vk:command-buffer (vk:command-buffers ,value) ,ptr)
          %vk:signal-semaphore-count (length (vk:signal-semaphores ,value))
          %vk:p-signal-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:signal-semaphores ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:display
        %vk:display-name
        %vk:physical-dimensions
        %vk:physical-resolution
        %vk:supported-transforms
        %vk:plane-reorder-possible
        %vk:persistent-content)
       ,ptr
       (:struct %vk:display-properties-khr))
    (setf %vk:display (if (vk:display ,value) (vk:display ,value) (cffi:null-pointer))
          %vk:display-name (vk:display-name ,value)
          %vk:physical-dimensions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:physical-dimensions ,value) ,ptr)
          %vk:physical-resolution (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:physical-resolution ,value) ,ptr)
          %vk:supported-transforms (vk:supported-transforms ,value)
          %vk:plane-reorder-possible (vk:plane-reorder-possible ,value)
          %vk:persistent-content (vk:persistent-content ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-plane-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:current-display
        %vk:current-stack-index)
       ,ptr
       (:struct %vk:display-plane-properties-khr))
    (setf %vk:current-display (if (vk:current-display ,value) (vk:current-display ,value) (cffi:null-pointer))
          %vk:current-stack-index (vk:current-stack-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-mode-parameters-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:visible-region
        %vk:refresh-rate)
       ,ptr
       (:struct %vk:display-mode-parameters-khr))
    (setf %vk:visible-region (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:visible-region ,value) ,ptr)
          %vk:refresh-rate (vk:refresh-rate ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-mode-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:display-mode
        %vk:parameters)
       ,ptr
       (:struct %vk:display-mode-properties-khr))
    (setf %vk:display-mode (if (vk:display-mode ,value) (vk:display-mode ,value) (cffi:null-pointer))
          %vk:parameters (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-mode-parameters-khr) (vk:parameters ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-mode-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:parameters)
       ,ptr
       (:struct %vk:display-mode-create-info-khr))
    (setf %vk:s-type :display-mode-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:parameters (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-mode-parameters-khr) (vk:parameters ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-plane-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:supported-alpha
        %vk:min-src-position
        %vk:max-src-position
        %vk:min-src-extent
        %vk:max-src-extent
        %vk:min-dst-position
        %vk:max-dst-position
        %vk:min-dst-extent
        %vk:max-dst-extent)
       ,ptr
       (:struct %vk:display-plane-capabilities-khr))
    (setf %vk:supported-alpha (vk:supported-alpha ,value)
          %vk:min-src-position (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:min-src-position ,value) ,ptr)
          %vk:max-src-position (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:max-src-position ,value) ,ptr)
          %vk:min-src-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-src-extent ,value) ,ptr)
          %vk:max-src-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-src-extent ,value) ,ptr)
          %vk:min-dst-position (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:min-dst-position ,value) ,ptr)
          %vk:max-dst-position (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:max-dst-position ,value) ,ptr)
          %vk:min-dst-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-dst-extent ,value) ,ptr)
          %vk:max-dst-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-dst-extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:display-mode
        %vk:plane-index
        %vk:plane-stack-index
        %vk:transform
        %vk:global-alpha
        %vk:alpha-mode
        %vk:image-extent)
       ,ptr
       (:struct %vk:display-surface-create-info-khr))
    (setf %vk:s-type :display-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:display-mode (if (vk:display-mode ,value) (vk:display-mode ,value) (cffi:null-pointer))
          %vk:plane-index (vk:plane-index ,value)
          %vk:plane-stack-index (vk:plane-stack-index ,value)
          %vk:transform (vk:transform ,value)
          %vk:global-alpha (vk:global-alpha ,value)
          %vk:alpha-mode (vk:alpha-mode ,value)
          %vk:image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:image-extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-present-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-rect
        %vk:dst-rect
        %vk:persistent)
       ,ptr
       (:struct %vk:display-present-info-khr))
    (setf %vk:s-type :display-present-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-rect (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:src-rect ,value) ,ptr)
          %vk:dst-rect (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:dst-rect ,value) ,ptr)
          %vk:persistent (vk:persistent ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:min-image-count
        %vk:max-image-count
        %vk:current-extent
        %vk:min-image-extent
        %vk:max-image-extent
        %vk:max-image-array-layers
        %vk:supported-transforms
        %vk:current-transform
        %vk:supported-composite-alpha
        %vk:supported-usage-flags)
       ,ptr
       (:struct %vk:surface-capabilities-khr))
    (setf %vk:min-image-count (vk:min-image-count ,value)
          %vk:max-image-count (vk:max-image-count ,value)
          %vk:current-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:current-extent ,value) ,ptr)
          %vk:min-image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-image-extent ,value) ,ptr)
          %vk:max-image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-image-extent ,value) ,ptr)
          %vk:max-image-array-layers (vk:max-image-array-layers ,value)
          %vk:supported-transforms (vk:supported-transforms ,value)
          %vk:current-transform (vk:current-transform ,value)
          %vk:supported-composite-alpha (vk:supported-composite-alpha ,value)
          %vk:supported-usage-flags (vk:supported-usage-flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-android-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:window)
       ,ptr
       (:struct %vk:android-surface-create-info-khr))
    (setf %vk:s-type :android-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:window (vk:window ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vi-surface-create-info-nn) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:window)
       ,ptr
       (:struct %vk:vi-surface-create-info-nn))
    (setf %vk:s-type :vi-surface-create-info-nn
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:window (if (vk:window ,value) (vk:window ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-wayland-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:display
        %vk:surface)
       ,ptr
       (:struct %vk:wayland-surface-create-info-khr))
    (setf %vk:s-type :wayland-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:display (vk-alloc:foreign-allocate-and-fill '(:struct %vk:wl_display) (vk:display ,value) ,ptr)
          %vk:surface (vk-alloc:foreign-allocate-and-fill '(:struct %vk:wl_surface) (vk:surface ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-win32-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:hinstance
        %vk:hwnd)
       ,ptr
       (:struct %vk:win32-surface-create-info-khr))
    (setf %vk:s-type :win32-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:hinstance (vk:hinstance ,value)
          %vk:hwnd (vk:hwnd ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-xlib-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:dpy
        %vk:window)
       ,ptr
       (:struct %vk:xlib-surface-create-info-khr))
    (setf %vk:s-type :xlib-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:dpy (vk:dpy ,value)
          %vk:window (vk:window ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-xcb-surface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:connection
        %vk:window)
       ,ptr
       (:struct %vk:xcb-surface-create-info-khr))
    (setf %vk:s-type :xcb-surface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:connection (vk:connection ,value)
          %vk:window (vk:window ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-direct-fb-surface-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:dfb
        %vk:surface)
       ,ptr
       (:struct %vk:direct-fb-surface-create-info-ext))
    (setf %vk:s-type :directfb-surface-create-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:dfb (vk:dfb ,value)
          %vk:surface (vk:surface ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-pipe-surface-create-info-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:image-pipe-handle)
       ,ptr
       (:struct %vk:image-pipe-surface-create-info-fuchsia))
    (setf %vk:s-type :imagepipe-surface-create-info-fuchsia
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:image-pipe-handle (vk:image-pipe-handle ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-stream-descriptor-surface-create-info-ggp) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stream-descriptor)
       ,ptr
       (:struct %vk:stream-descriptor-surface-create-info-ggp))
    (setf %vk:s-type :stream-descriptor-surface-create-info-ggp
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:stream-descriptor (vk:stream-descriptor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-screen-surface-create-info-qnx) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:context
        %vk:window)
       ,ptr
       (:struct %vk:screen-surface-create-info-qnx))
    (setf %vk:s-type :screen-surface-create-info-qnx
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:context (vk-alloc:foreign-allocate-and-fill '(:struct %vk:_screen_context) (vk:context ,value) ,ptr)
          %vk:window (vk-alloc:foreign-allocate-and-fill '(:struct %vk:_screen_window) (vk:window ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-format-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:format
        %vk:color-space)
       ,ptr
       (:struct %vk:surface-format-khr))
    (setf %vk:format (vk:format ,value)
          %vk:color-space (vk:color-space ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-swapchain-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:surface
        %vk:min-image-count
        %vk:image-format
        %vk:image-color-space
        %vk:image-extent
        %vk:image-array-layers
        %vk:image-usage
        %vk:image-sharing-mode
        %vk:queue-family-index-count
        %vk:p-queue-family-indices
        %vk:pre-transform
        %vk:composite-alpha
        %vk:present-mode
        %vk:clipped
        %vk:old-swapchain)
       ,ptr
       (:struct %vk:swapchain-create-info-khr))
    (setf %vk:s-type :swapchain-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:surface (if (vk:surface ,value) (vk:surface ,value) (cffi:null-pointer))
          %vk:min-image-count (vk:min-image-count ,value)
          %vk:image-format (vk:image-format ,value)
          %vk:image-color-space (vk:image-color-space ,value)
          %vk:image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:image-extent ,value) ,ptr)
          %vk:image-array-layers (vk:image-array-layers ,value)
          %vk:image-usage (vk:image-usage ,value)
          %vk:image-sharing-mode (vk:image-sharing-mode ,value)
          %vk:queue-family-index-count (length (vk:queue-family-indices ,value))
          %vk:p-queue-family-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:queue-family-indices ,value) ,ptr)
          %vk:pre-transform (vk:pre-transform ,value)
          %vk:composite-alpha (vk:composite-alpha ,value)
          %vk:present-mode (vk:present-mode ,value)
          %vk:clipped (vk:clipped ,value)
          %vk:old-swapchain (if (vk:old-swapchain ,value) (vk:old-swapchain ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-count
        %vk:p-wait-semaphores
        %vk:swapchain-count
        %vk:p-swapchains
        %vk:p-image-indices
        %vk:p-results)
       ,ptr
       (:struct %vk:present-info-khr))
    (setf %vk:s-type :present-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-count (length (vk:p-wait-semaphores ,value))
          %vk:p-wait-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:p-wait-semaphores ,value) ,ptr)
          %vk:swapchain-count (reduce #'max (list (length (vk:swapchains ,value))(length (vk:image-indices ,value))(length (vk:results ,value))))
          %vk:p-swapchains (vk-alloc:foreign-allocate-and-fill '%vk:swapchain-khr (vk:swapchains ,value) ,ptr)
          %vk:p-image-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:image-indices ,value) ,ptr)
          %vk:p-results (vk-alloc:foreign-allocate-and-fill '%vk:result (vk:results ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-report-callback-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:pfn-callback
        %vk:p-user-data)
       ,ptr
       (:struct %vk:debug-report-callback-create-info-ext))
    (setf %vk:s-type :debug-report-callback-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:pfn-callback (vk:pfn-callback ,value)
          %vk:p-user-data (if (vk:user-data ,value) (vk:user-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-validation-flags-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:disabled-validation-check-count
        %vk:p-disabled-validation-checks)
       ,ptr
       (:struct %vk:validation-flags-ext))
    (setf %vk:s-type :validation-flags-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:disabled-validation-check-count (length (vk:disabled-validation-checks ,value))
          %vk:p-disabled-validation-checks (vk-alloc:foreign-allocate-and-fill '%vk:validation-check-ext (vk:disabled-validation-checks ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-validation-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:enabled-validation-feature-count
        %vk:p-enabled-validation-features
        %vk:disabled-validation-feature-count
        %vk:p-disabled-validation-features)
       ,ptr
       (:struct %vk:validation-features-ext))
    (setf %vk:s-type :validation-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:enabled-validation-feature-count (length (vk:enabled-validation-features ,value))
          %vk:p-enabled-validation-features (vk-alloc:foreign-allocate-and-fill '%vk:validation-feature-enable-ext (vk:enabled-validation-features ,value) ,ptr)
          %vk:disabled-validation-feature-count (length (vk:disabled-validation-features ,value))
          %vk:p-disabled-validation-features (vk-alloc:foreign-allocate-and-fill '%vk:validation-feature-disable-ext (vk:disabled-validation-features ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-state-rasterization-order-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:rasterization-order)
       ,ptr
       (:struct %vk:pipeline-rasterization-state-rasterization-order-amd))
    (setf %vk:s-type :pipeline-rasterization-state-rasterization-order-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:rasterization-order (vk:rasterization-order ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-marker-object-name-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:object-type
        %vk:object
        %vk:p-object-name)
       ,ptr
       (:struct %vk:debug-marker-object-name-info-ext))
    (setf %vk:s-type :debug-marker-object-name-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:object-type (vk:object-type ,value)
          %vk:object (vk:object ,value)
          %vk:p-object-name (vk:object-name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-marker-object-tag-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:object-type
        %vk:object
        %vk:tag-name
        %vk:tag-size
        %vk:p-tag)
       ,ptr
       (:struct %vk:debug-marker-object-tag-info-ext))
    (setf %vk:s-type :debug-marker-object-tag-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:object-type (vk:object-type ,value)
          %vk:object (vk:object ,value)
          %vk:tag-name (vk:tag-name ,value)
          %vk:tag-size (vk:tag-size ,value)
          %vk:p-tag (if (vk:tag ,value) (vk:tag ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-marker-marker-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-marker-name
        %vk:color)
       ,ptr
       (:struct %vk:debug-marker-marker-info-ext))
    (setf %vk:s-type :debug-marker-marker-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:p-marker-name (vk:marker-name ,value))
    (cffi:lisp-array-to-foreign (vk:color ,value) %vk:color '(:array :float 4))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-dedicated-allocation-image-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:dedicated-allocation)
       ,ptr
       (:struct %vk:dedicated-allocation-image-create-info-nv))
    (setf %vk:s-type :dedicated-allocation-image-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:dedicated-allocation (vk:dedicated-allocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-dedicated-allocation-buffer-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:dedicated-allocation)
       ,ptr
       (:struct %vk:dedicated-allocation-buffer-create-info-nv))
    (setf %vk:s-type :dedicated-allocation-buffer-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:dedicated-allocation (vk:dedicated-allocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-dedicated-allocation-memory-allocate-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image
        %vk:buffer)
       ,ptr
       (:struct %vk:dedicated-allocation-memory-allocate-info-nv))
    (setf %vk:s-type :dedicated-allocation-memory-allocate-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-image-format-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:image-format-properties
        %vk:external-memory-features
        %vk:export-from-imported-handle-types
        %vk:compatible-handle-types)
       ,ptr
       (:struct %vk:external-image-format-properties-nv))
    (setf %vk:image-format-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-format-properties) (vk:image-format-properties ,value) ,ptr)
          %vk:external-memory-features (vk:external-memory-features ,value)
          %vk:export-from-imported-handle-types (vk:export-from-imported-handle-types ,value)
          %vk:compatible-handle-types (vk:compatible-handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-memory-image-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:external-memory-image-create-info-nv))
    (setf %vk:s-type :external-memory-image-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-memory-allocate-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:export-memory-allocate-info-nv))
    (setf %vk:s-type :export-memory-allocate-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-memory-win32-handle-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type
        %vk:handle)
       ,ptr
       (:struct %vk:import-memory-win32-handle-info-nv))
    (setf %vk:s-type :import-memory-win32-handle-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value)
          %vk:handle (vk:handle ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-memory-win32-handle-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-attributes
        %vk:dw-access)
       ,ptr
       (:struct %vk:export-memory-win32-handle-info-nv))
    (setf %vk:s-type :export-memory-win32-handle-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-attributes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:security_attributes) (vk:attributes ,value) ,ptr)
          %vk:dw-access (vk:dw-access ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-win32-keyed-mutex-acquire-release-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acquire-count
        %vk:p-acquire-syncs
        %vk:p-acquire-keys
        %vk:p-acquire-timeout-milliseconds
        %vk:release-count
        %vk:p-release-syncs
        %vk:p-release-keys)
       ,ptr
       (:struct %vk:win32-keyed-mutex-acquire-release-info-nv))
    (setf %vk:s-type :win32-keyed-mutex-acquire-release-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:acquire-count (reduce #'max (list (length (vk:acquire-syncs ,value))(length (vk:acquire-keys ,value))(length (vk:acquire-timeout-milliseconds ,value))))
          %vk:p-acquire-syncs (vk-alloc:foreign-allocate-and-fill '%vk:device-memory (vk:acquire-syncs ,value) ,ptr)
          %vk:p-acquire-keys (vk-alloc:foreign-allocate-and-fill :uint64 (vk:acquire-keys ,value) ,ptr)
          %vk:p-acquire-timeout-milliseconds (vk-alloc:foreign-allocate-and-fill :uint32 (vk:acquire-timeout-milliseconds ,value) ,ptr)
          %vk:release-count (reduce #'max (list (length (vk:release-syncs ,value))(length (vk:release-keys ,value))))
          %vk:p-release-syncs (vk-alloc:foreign-allocate-and-fill '%vk:device-memory (vk:release-syncs ,value) ,ptr)
          %vk:p-release-keys (vk-alloc:foreign-allocate-and-fill :uint64 (vk:release-keys ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-device-generated-commands-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-generated-commands)
       ,ptr
       (:struct %vk:physical-device-device-generated-commands-features-nv))
    (setf %vk:s-type :physical-device-device-generated-commands-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-generated-commands (vk:device-generated-commands ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-private-data-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:private-data-slot-request-count)
       ,ptr
       (:struct %vk:device-private-data-create-info-ext))
    (setf %vk:s-type :device-private-data-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:private-data-slot-request-count (vk:private-data-slot-request-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-private-data-slot-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:private-data-slot-create-info-ext))
    (setf %vk:s-type :private-data-slot-create-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-private-data-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:private-data)
       ,ptr
       (:struct %vk:physical-device-private-data-features-ext))
    (setf %vk:s-type :physical-device-private-data-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:private-data (vk:private-data ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-device-generated-commands-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-graphics-shader-group-count
        %vk:max-indirect-sequence-count
        %vk:max-indirect-commands-token-count
        %vk:max-indirect-commands-stream-count
        %vk:max-indirect-commands-token-offset
        %vk:max-indirect-commands-stream-stride
        %vk:min-sequences-count-buffer-offset-alignment
        %vk:min-sequences-index-buffer-offset-alignment
        %vk:min-indirect-commands-buffer-offset-alignment)
       ,ptr
       (:struct %vk:physical-device-device-generated-commands-properties-nv))
    (setf %vk:s-type :physical-device-device-generated-commands-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-graphics-shader-group-count (vk:max-graphics-shader-group-count ,value)
          %vk:max-indirect-sequence-count (vk:max-indirect-sequence-count ,value)
          %vk:max-indirect-commands-token-count (vk:max-indirect-commands-token-count ,value)
          %vk:max-indirect-commands-stream-count (vk:max-indirect-commands-stream-count ,value)
          %vk:max-indirect-commands-token-offset (vk:max-indirect-commands-token-offset ,value)
          %vk:max-indirect-commands-stream-stride (vk:max-indirect-commands-stream-stride ,value)
          %vk:min-sequences-count-buffer-offset-alignment (vk:min-sequences-count-buffer-offset-alignment ,value)
          %vk:min-sequences-index-buffer-offset-alignment (vk:min-sequences-index-buffer-offset-alignment ,value)
          %vk:min-indirect-commands-buffer-offset-alignment (vk:min-indirect-commands-buffer-offset-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-graphics-shader-group-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stage-count
        %vk:p-stages
        %vk:p-vertex-input-state
        %vk:p-tessellation-state)
       ,ptr
       (:struct %vk:graphics-shader-group-create-info-nv))
    (setf %vk:s-type :graphics-shader-group-create-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:stage-count (length (vk:stages ,value))
          %vk:p-stages (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-shader-stage-create-info) (vk:stages ,value) ,ptr)
          %vk:p-vertex-input-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-vertex-input-state-create-info) (vk:vertex-input-state ,value) ,ptr)
          %vk:p-tessellation-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-tessellation-state-create-info) (vk:tessellation-state ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-graphics-pipeline-shader-groups-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:group-count
        %vk:p-groups
        %vk:pipeline-count
        %vk:p-pipelines)
       ,ptr
       (:struct %vk:graphics-pipeline-shader-groups-create-info-nv))
    (setf %vk:s-type :graphics-pipeline-shader-groups-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:group-count (length (vk:groups ,value))
          %vk:p-groups (vk-alloc:foreign-allocate-and-fill '(:struct %vk:graphics-shader-group-create-info-nv) (vk:groups ,value) ,ptr)
          %vk:pipeline-count (length (vk:pipelines ,value))
          %vk:p-pipelines (vk-alloc:foreign-allocate-and-fill '%vk:pipeline (vk:pipelines ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-shader-group-indirect-command-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:group-index)
       ,ptr
       (:struct %vk:bind-shader-group-indirect-command-nv))
    (setf %vk:group-index (vk:group-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-index-buffer-indirect-command-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer-address
        %vk:size
        %vk:index-type)
       ,ptr
       (:struct %vk:bind-index-buffer-indirect-command-nv))
    (setf %vk:buffer-address (vk:buffer-address ,value)
          %vk:size (vk:size ,value)
          %vk:index-type (vk:index-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-vertex-buffer-indirect-command-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer-address
        %vk:size
        %vk:stride)
       ,ptr
       (:struct %vk:bind-vertex-buffer-indirect-command-nv))
    (setf %vk:buffer-address (vk:buffer-address ,value)
          %vk:size (vk:size ,value)
          %vk:stride (vk:stride ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-set-state-flags-indirect-command-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:data)
       ,ptr
       (:struct %vk:set-state-flags-indirect-command-nv))
    (setf %vk:data (vk:data ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-indirect-commands-stream-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:buffer
        %vk:offset)
       ,ptr
       (:struct %vk:indirect-commands-stream-nv))
    (setf %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-indirect-commands-layout-token-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:token-type
        %vk:stream
        %vk:offset
        %vk:vertex-binding-unit
        %vk:vertex-dynamic-stride
        %vk:pushconstant-pipeline-layout
        %vk:pushconstant-shader-stage-flags
        %vk:pushconstant-offset
        %vk:pushconstant-size
        %vk:indirect-state-flags
        %vk:index-type-count
        %vk:p-index-types
        %vk:p-index-type-values)
       ,ptr
       (:struct %vk:indirect-commands-layout-token-nv))
    (setf %vk:s-type :indirect-commands-layout-token-nv
          %vk:p-next (cffi:null-pointer)
          %vk:token-type (vk:token-type ,value)
          %vk:stream (vk:stream ,value)
          %vk:offset (vk:offset ,value)
          %vk:vertex-binding-unit (vk:vertex-binding-unit ,value)
          %vk:vertex-dynamic-stride (vk:vertex-dynamic-stride ,value)
          %vk:pushconstant-pipeline-layout (if (vk:pushconstant-pipeline-layout ,value) (vk:pushconstant-pipeline-layout ,value) (cffi:null-pointer))
          %vk:pushconstant-shader-stage-flags (vk:pushconstant-shader-stage-flags ,value)
          %vk:pushconstant-offset (vk:pushconstant-offset ,value)
          %vk:pushconstant-size (vk:pushconstant-size ,value)
          %vk:indirect-state-flags (vk:indirect-state-flags ,value)
          %vk:index-type-count (reduce #'max (list (length (vk:index-types ,value))(length (vk:index-type-values ,value))))
          %vk:p-index-types (vk-alloc:foreign-allocate-and-fill '%vk:index-type (vk:index-types ,value) ,ptr)
          %vk:p-index-type-values (vk-alloc:foreign-allocate-and-fill :uint32 (vk:index-type-values ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-indirect-commands-layout-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:pipeline-bind-point
        %vk:token-count
        %vk:p-tokens
        %vk:stream-count
        %vk:p-stream-strides)
       ,ptr
       (:struct %vk:indirect-commands-layout-create-info-nv))
    (setf %vk:s-type :indirect-commands-layout-create-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:token-count (length (vk:tokens ,value))
          %vk:p-tokens (vk-alloc:foreign-allocate-and-fill '(:struct %vk:indirect-commands-layout-token-nv) (vk:tokens ,value) ,ptr)
          %vk:stream-count (length (vk:stream-strides ,value))
          %vk:p-stream-strides (vk-alloc:foreign-allocate-and-fill :uint32 (vk:stream-strides ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-generated-commands-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline-bind-point
        %vk:pipeline
        %vk:indirect-commands-layout
        %vk:stream-count
        %vk:p-streams
        %vk:sequences-count
        %vk:preprocess-buffer
        %vk:preprocess-offset
        %vk:preprocess-size
        %vk:sequences-count-buffer
        %vk:sequences-count-offset
        %vk:sequences-index-buffer
        %vk:sequences-index-offset)
       ,ptr
       (:struct %vk:generated-commands-info-nv))
    (setf %vk:s-type :generated-commands-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:pipeline (if (vk:pipeline ,value) (vk:pipeline ,value) (cffi:null-pointer))
          %vk:indirect-commands-layout (if (vk:indirect-commands-layout ,value) (vk:indirect-commands-layout ,value) (cffi:null-pointer))
          %vk:stream-count (length (vk:streams ,value))
          %vk:p-streams (vk-alloc:foreign-allocate-and-fill '(:struct %vk:indirect-commands-stream-nv) (vk:streams ,value) ,ptr)
          %vk:sequences-count (vk:sequences-count ,value)
          %vk:preprocess-buffer (if (vk:preprocess-buffer ,value) (vk:preprocess-buffer ,value) (cffi:null-pointer))
          %vk:preprocess-offset (vk:preprocess-offset ,value)
          %vk:preprocess-size (vk:preprocess-size ,value)
          %vk:sequences-count-buffer (if (vk:sequences-count-buffer ,value) (vk:sequences-count-buffer ,value) (cffi:null-pointer))
          %vk:sequences-count-offset (vk:sequences-count-offset ,value)
          %vk:sequences-index-buffer (if (vk:sequences-index-buffer ,value) (vk:sequences-index-buffer ,value) (cffi:null-pointer))
          %vk:sequences-index-offset (vk:sequences-index-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-generated-commands-memory-requirements-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline-bind-point
        %vk:pipeline
        %vk:indirect-commands-layout
        %vk:max-sequences-count)
       ,ptr
       (:struct %vk:generated-commands-memory-requirements-info-nv))
    (setf %vk:s-type :generated-commands-memory-requirements-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:pipeline (if (vk:pipeline ,value) (vk:pipeline ,value) (cffi:null-pointer))
          %vk:indirect-commands-layout (if (vk:indirect-commands-layout ,value) (vk:indirect-commands-layout ,value) (cffi:null-pointer))
          %vk:max-sequences-count (vk:max-sequences-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-features-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:features)
       ,ptr
       (:struct %vk:physical-device-features-2))
    (setf %vk:s-type :physical-device-features-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:features (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-features) (vk:features ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:properties)
       ,ptr
       (:struct %vk:physical-device-properties-2))
    (setf %vk:s-type :physical-device-properties-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-properties) (vk:properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-format-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format-properties)
       ,ptr
       (:struct %vk:format-properties-2))
    (setf %vk:s-type :format-properties-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:format-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:format-properties) (vk:format-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-format-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image-format-properties)
       ,ptr
       (:struct %vk:image-format-properties-2))
    (setf %vk:s-type :image-format-properties-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image-format-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-format-properties) (vk:image-format-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-image-format-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format
        %vk:type
        %vk:tiling
        %vk:usage
        %vk:flags)
       ,ptr
       (:struct %vk:physical-device-image-format-info-2))
    (setf %vk:s-type :physical-device-image-format-info-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:format (vk:format ,value)
          %vk:type (vk:type ,value)
          %vk:tiling (vk:tiling ,value)
          %vk:usage (vk:usage ,value)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-queue-family-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:queue-family-properties)
       ,ptr
       (:struct %vk:queue-family-properties-2))
    (setf %vk:s-type :queue-family-properties-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:queue-family-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:queue-family-properties) (vk:queue-family-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-memory-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-properties)
       ,ptr
       (:struct %vk:physical-device-memory-properties-2))
    (setf %vk:s-type :physical-device-memory-properties-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:memory-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:physical-device-memory-properties) (vk:memory-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-format-properties-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:properties)
       ,ptr
       (:struct %vk:sparse-image-format-properties-2))
    (setf %vk:s-type :sparse-image-format-properties-2
          %vk:p-next (cffi:null-pointer)
          %vk:properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-format-properties) (vk:properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-sparse-image-format-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format
        %vk:type
        %vk:samples
        %vk:usage
        %vk:tiling)
       ,ptr
       (:struct %vk:physical-device-sparse-image-format-info-2))
    (setf %vk:s-type :physical-device-sparse-image-format-info-2
          %vk:p-next (cffi:null-pointer)
          %vk:format (vk:format ,value)
          %vk:type (vk:type ,value)
          %vk:samples (vk:samples ,value)
          %vk:usage (vk:usage ,value)
          %vk:tiling (vk:tiling ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-push-descriptor-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-push-descriptors)
       ,ptr
       (:struct %vk:physical-device-push-descriptor-properties-khr))
    (setf %vk:s-type :physical-device-push-descriptor-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-push-descriptors (vk:max-push-descriptors ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-conformance-version) ptr)
  `(cffi:with-foreign-slots
      ((%vk:major
        %vk:minor
        %vk:subminor
        %vk:patch)
       ,ptr
       (:struct %vk:conformance-version))
    (setf %vk:major (vk:major ,value)
          %vk:minor (vk:minor ,value)
          %vk:subminor (vk:subminor ,value)
          %vk:patch (vk:patch ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-driver-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:driver-id
        %vk:driver-name
        %vk:driver-info
        %vk:conformance-version)
       ,ptr
       (:struct %vk:physical-device-driver-properties))
    (setf %vk:s-type :physical-device-driver-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:driver-id (vk:driver-id ,value)
          %vk:driver-name (vk:driver-name ,value)
          %vk:driver-info (vk:driver-info ,value)
          %vk:conformance-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:conformance-version) (vk:conformance-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-regions-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:present-regions-khr))
    (setf %vk:s-type :present-regions-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:swapchain-count (vk:swapchain-count ,value)
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:present-region-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-region-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:rectangle-count
        %vk:p-rectangles)
       ,ptr
       (:struct %vk:present-region-khr))
    (setf %vk:rectangle-count (length (vk:rectangles ,value))
          %vk:p-rectangles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-layer-khr) (vk:rectangles ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-rect-layer-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:offset
        %vk:extent
        %vk:layer)
       ,ptr
       (:struct %vk:rect-layer-khr))
    (setf %vk:offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:extent ,value) ,ptr)
          %vk:layer (vk:layer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-variable-pointers-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:variable-pointers-storage-buffer
        %vk:variable-pointers)
       ,ptr
       (:struct %vk:physical-device-variable-pointers-features))
    (setf %vk:s-type :physical-device-variable-pointers-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:variable-pointers-storage-buffer (vk:variable-pointers-storage-buffer ,value)
          %vk:variable-pointers (vk:variable-pointers ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-memory-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:external-memory-features
        %vk:export-from-imported-handle-types
        %vk:compatible-handle-types)
       ,ptr
       (:struct %vk:external-memory-properties))
    (setf %vk:external-memory-features (vk:external-memory-features ,value)
          %vk:export-from-imported-handle-types (vk:export-from-imported-handle-types ,value)
          %vk:compatible-handle-types (vk:compatible-handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-external-image-format-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type)
       ,ptr
       (:struct %vk:physical-device-external-image-format-info))
    (setf %vk:s-type :physical-device-external-image-format-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-image-format-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:external-memory-properties)
       ,ptr
       (:struct %vk:external-image-format-properties))
    (setf %vk:s-type :external-image-format-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:external-memory-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:external-memory-properties) (vk:external-memory-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-external-buffer-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:usage
        %vk:handle-type)
       ,ptr
       (:struct %vk:physical-device-external-buffer-info))
    (setf %vk:s-type :physical-device-external-buffer-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:usage (vk:usage ,value)
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-buffer-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:external-memory-properties)
       ,ptr
       (:struct %vk:external-buffer-properties))
    (setf %vk:s-type :external-buffer-properties
          %vk:p-next (cffi:null-pointer)
          %vk:external-memory-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:external-memory-properties) (vk:external-memory-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-id-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-uuid
        %vk:driver-uuid
        %vk:device-luid
        %vk:device-node-mask
        %vk:device-luid-valid)
       ,ptr
       (:struct %vk:physical-device-id-properties))
    (setf %vk:s-type :physical-device-id-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-node-mask (vk:device-node-mask ,value)
          %vk:device-luid-valid (vk:device-luid-valid ,value))
    (cffi:lisp-array-to-foreign (vk:device-uuid ,value) %vk:device-uuid '(:array :uint8 vk_uuid_size))
    (cffi:lisp-array-to-foreign (vk:driver-uuid ,value) %vk:driver-uuid '(:array :uint8 vk_uuid_size))
    (cffi:lisp-array-to-foreign (vk:device-luid ,value) %vk:device-luid '(:array :uint8 vk_luid_size))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-memory-image-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:external-memory-image-create-info))
    (setf %vk:s-type :external-memory-image-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-memory-buffer-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:external-memory-buffer-create-info))
    (setf %vk:s-type :external-memory-buffer-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-memory-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:export-memory-allocate-info))
    (setf %vk:s-type :export-memory-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-memory-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type
        %vk:handle
        %vk:name)
       ,ptr
       (:struct %vk:import-memory-win32-handle-info-khr))
    (setf %vk:s-type :import-memory-win32-handle-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value)
          %vk:handle (vk:handle ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-memory-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-attributes
        %vk:dw-access
        %vk:name)
       ,ptr
       (:struct %vk:export-memory-win32-handle-info-khr))
    (setf %vk:s-type :export-memory-win32-handle-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-attributes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:security_attributes) (vk:attributes ,value) ,ptr)
          %vk:dw-access (vk:dw-access ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-memory-zircon-handle-info-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type
        %vk:handle)
       ,ptr
       (:struct %vk:import-memory-zircon-handle-info-fuchsia))
    (setf %vk:s-type :import-memory-zircon-handle-info-fuchsia
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value)
          %vk:handle (vk:handle ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-zircon-handle-properties-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:memory-zircon-handle-properties-fuchsia))
    (setf %vk:s-type :memory-zircon-handle-properties-fuchsia
          %vk:p-next (cffi:null-pointer)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-get-zircon-handle-info-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory
        %vk:handle-type)
       ,ptr
       (:struct %vk:memory-get-zircon-handle-info-fuchsia))
    (setf %vk:s-type :memory-get-zircon-handle-info-fuchsia
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-win32-handle-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:memory-win32-handle-properties-khr))
    (setf %vk:s-type :memory-win32-handle-properties-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-get-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory
        %vk:handle-type)
       ,ptr
       (:struct %vk:memory-get-win32-handle-info-khr))
    (setf %vk:s-type :memory-get-win32-handle-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-memory-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type
        %vk:fd)
       ,ptr
       (:struct %vk:import-memory-fd-info-khr))
    (setf %vk:s-type :import-memory-fd-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value)
          %vk:fd (vk:fd ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-fd-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:memory-fd-properties-khr))
    (setf %vk:s-type :memory-fd-properties-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-get-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory
        %vk:handle-type)
       ,ptr
       (:struct %vk:memory-get-fd-info-khr))
    (setf %vk:s-type :memory-get-fd-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-win32-keyed-mutex-acquire-release-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acquire-count
        %vk:p-acquire-syncs
        %vk:p-acquire-keys
        %vk:p-acquire-timeouts
        %vk:release-count
        %vk:p-release-syncs
        %vk:p-release-keys)
       ,ptr
       (:struct %vk:win32-keyed-mutex-acquire-release-info-khr))
    (setf %vk:s-type :win32-keyed-mutex-acquire-release-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:acquire-count (reduce #'max (list (length (vk:acquire-syncs ,value))(length (vk:acquire-keys ,value))(length (vk:acquire-timeouts ,value))))
          %vk:p-acquire-syncs (vk-alloc:foreign-allocate-and-fill '%vk:device-memory (vk:acquire-syncs ,value) ,ptr)
          %vk:p-acquire-keys (vk-alloc:foreign-allocate-and-fill :uint64 (vk:acquire-keys ,value) ,ptr)
          %vk:p-acquire-timeouts (vk-alloc:foreign-allocate-and-fill :uint32 (vk:acquire-timeouts ,value) ,ptr)
          %vk:release-count (reduce #'max (list (length (vk:release-syncs ,value))(length (vk:release-keys ,value))))
          %vk:p-release-syncs (vk-alloc:foreign-allocate-and-fill '%vk:device-memory (vk:release-syncs ,value) ,ptr)
          %vk:p-release-keys (vk-alloc:foreign-allocate-and-fill :uint64 (vk:release-keys ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-external-semaphore-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type)
       ,ptr
       (:struct %vk:physical-device-external-semaphore-info))
    (setf %vk:s-type :physical-device-external-semaphore-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-semaphore-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:export-from-imported-handle-types
        %vk:compatible-handle-types
        %vk:external-semaphore-features)
       ,ptr
       (:struct %vk:external-semaphore-properties))
    (setf %vk:s-type :external-semaphore-properties
          %vk:p-next (cffi:null-pointer)
          %vk:export-from-imported-handle-types (vk:export-from-imported-handle-types ,value)
          %vk:compatible-handle-types (vk:compatible-handle-types ,value)
          %vk:external-semaphore-features (vk:external-semaphore-features ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-semaphore-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:export-semaphore-create-info))
    (setf %vk:s-type :export-semaphore-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-semaphore-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:flags
        %vk:handle-type
        %vk:handle
        %vk:name)
       ,ptr
       (:struct %vk:import-semaphore-win32-handle-info-khr))
    (setf %vk:s-type :import-semaphore-win32-handle-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:handle-type (vk:handle-type ,value)
          %vk:handle (vk:handle ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-semaphore-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-attributes
        %vk:dw-access
        %vk:name)
       ,ptr
       (:struct %vk:export-semaphore-win32-handle-info-khr))
    (setf %vk:s-type :export-semaphore-win32-handle-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-attributes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:security_attributes) (vk:attributes ,value) ,ptr)
          %vk:dw-access (vk:dw-access ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-d-3d-1-2-fence-submit-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-values-count
        %vk:p-wait-semaphore-values
        %vk:signal-semaphore-values-count
        %vk:p-signal-semaphore-values)
       ,ptr
       (:struct %vk:d-3d-1-2-fence-submit-info-khr))
    (setf %vk:s-type :d3d12-fence-submit-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-values-count (length (vk:wait-semaphore-values ,value))
          %vk:p-wait-semaphore-values (vk-alloc:foreign-allocate-and-fill :uint64 (vk:wait-semaphore-values ,value) ,ptr)
          %vk:signal-semaphore-values-count (length (vk:signal-semaphore-values ,value))
          %vk:p-signal-semaphore-values (vk-alloc:foreign-allocate-and-fill :uint64 (vk:signal-semaphore-values ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-get-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:handle-type)
       ,ptr
       (:struct %vk:semaphore-get-win32-handle-info-khr))
    (setf %vk:s-type :semaphore-get-win32-handle-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-semaphore-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:flags
        %vk:handle-type
        %vk:fd)
       ,ptr
       (:struct %vk:import-semaphore-fd-info-khr))
    (setf %vk:s-type :import-semaphore-fd-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:handle-type (vk:handle-type ,value)
          %vk:fd (vk:fd ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-get-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:handle-type)
       ,ptr
       (:struct %vk:semaphore-get-fd-info-khr))
    (setf %vk:s-type :semaphore-get-fd-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-semaphore-zircon-handle-info-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:flags
        %vk:handle-type
        %vk:zircon-handle)
       ,ptr
       (:struct %vk:import-semaphore-zircon-handle-info-fuchsia))
    (setf %vk:s-type :import-semaphore-zircon-handle-info-fuchsia
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:handle-type (vk:handle-type ,value)
          %vk:zircon-handle (vk:zircon-handle ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-get-zircon-handle-info-fuchsia) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:handle-type)
       ,ptr
       (:struct %vk:semaphore-get-zircon-handle-info-fuchsia))
    (setf %vk:s-type :semaphore-get-zircon-handle-info-fuchsia
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-external-fence-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type)
       ,ptr
       (:struct %vk:physical-device-external-fence-info))
    (setf %vk:s-type :physical-device-external-fence-info
          %vk:p-next (cffi:null-pointer)
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-fence-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:export-from-imported-handle-types
        %vk:compatible-handle-types
        %vk:external-fence-features)
       ,ptr
       (:struct %vk:external-fence-properties))
    (setf %vk:s-type :external-fence-properties
          %vk:p-next (cffi:null-pointer)
          %vk:export-from-imported-handle-types (vk:export-from-imported-handle-types ,value)
          %vk:compatible-handle-types (vk:compatible-handle-types ,value)
          %vk:external-fence-features (vk:external-fence-features ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-fence-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-types)
       ,ptr
       (:struct %vk:export-fence-create-info))
    (setf %vk:s-type :export-fence-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-types (vk:handle-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-fence-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fence
        %vk:flags
        %vk:handle-type
        %vk:handle
        %vk:name)
       ,ptr
       (:struct %vk:import-fence-win32-handle-info-khr))
    (setf %vk:s-type :import-fence-win32-handle-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:fence (if (vk:fence ,value) (vk:fence ,value) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:handle-type (vk:handle-type ,value)
          %vk:handle (vk:handle ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-export-fence-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-attributes
        %vk:dw-access
        %vk:name)
       ,ptr
       (:struct %vk:export-fence-win32-handle-info-khr))
    (setf %vk:s-type :export-fence-win32-handle-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-attributes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:security_attributes) (vk:attributes ,value) ,ptr)
          %vk:dw-access (vk:dw-access ,value)
          %vk:name (vk:name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-fence-get-win32-handle-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fence
        %vk:handle-type)
       ,ptr
       (:struct %vk:fence-get-win32-handle-info-khr))
    (setf %vk:s-type :fence-get-win32-handle-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:fence (if (vk:fence ,value) (vk:fence ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-fence-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fence
        %vk:flags
        %vk:handle-type
        %vk:fd)
       ,ptr
       (:struct %vk:import-fence-fd-info-khr))
    (setf %vk:s-type :import-fence-fd-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:fence (if (vk:fence ,value) (vk:fence ,value) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:handle-type (vk:handle-type ,value)
          %vk:fd (vk:fd ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-fence-get-fd-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fence
        %vk:handle-type)
       ,ptr
       (:struct %vk:fence-get-fd-info-khr))
    (setf %vk:s-type :fence-get-fd-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:fence (if (vk:fence ,value) (vk:fence ,value) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-multiview-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:multiview
        %vk:multiview-geometry-shader
        %vk:multiview-tessellation-shader)
       ,ptr
       (:struct %vk:physical-device-multiview-features))
    (setf %vk:s-type :physical-device-multiview-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:multiview (vk:multiview ,value)
          %vk:multiview-geometry-shader (vk:multiview-geometry-shader ,value)
          %vk:multiview-tessellation-shader (vk:multiview-tessellation-shader ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-multiview-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-multiview-view-count
        %vk:max-multiview-instance-index)
       ,ptr
       (:struct %vk:physical-device-multiview-properties))
    (setf %vk:s-type :physical-device-multiview-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-multiview-view-count (vk:max-multiview-view-count ,value)
          %vk:max-multiview-instance-index (vk:max-multiview-instance-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-multiview-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:subpass-count
        %vk:p-view-masks
        %vk:dependency-count
        %vk:p-view-offsets
        %vk:correlation-mask-count
        %vk:p-correlation-masks)
       ,ptr
       (:struct %vk:render-pass-multiview-create-info))
    (setf %vk:s-type :render-pass-multiview-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:subpass-count (length (vk:view-masks ,value))
          %vk:p-view-masks (vk-alloc:foreign-allocate-and-fill :uint32 (vk:view-masks ,value) ,ptr)
          %vk:dependency-count (length (vk:view-offsets ,value))
          %vk:p-view-offsets (vk-alloc:foreign-allocate-and-fill :int32 (vk:view-offsets ,value) ,ptr)
          %vk:correlation-mask-count (length (vk:correlation-masks ,value))
          %vk:p-correlation-masks (vk-alloc:foreign-allocate-and-fill :uint32 (vk:correlation-masks ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-capabilities-2-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-image-count
        %vk:max-image-count
        %vk:current-extent
        %vk:min-image-extent
        %vk:max-image-extent
        %vk:max-image-array-layers
        %vk:supported-transforms
        %vk:current-transform
        %vk:supported-composite-alpha
        %vk:supported-usage-flags
        %vk:supported-surface-counters)
       ,ptr
       (:struct %vk:surface-capabilities-2-ext))
    (setf %vk:s-type :surface-capabilities-2-ext
          %vk:p-next (cffi:null-pointer)
          %vk:min-image-count (vk:min-image-count ,value)
          %vk:max-image-count (vk:max-image-count ,value)
          %vk:current-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:current-extent ,value) ,ptr)
          %vk:min-image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-image-extent ,value) ,ptr)
          %vk:max-image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-image-extent ,value) ,ptr)
          %vk:max-image-array-layers (vk:max-image-array-layers ,value)
          %vk:supported-transforms (vk:supported-transforms ,value)
          %vk:current-transform (vk:current-transform ,value)
          %vk:supported-composite-alpha (vk:supported-composite-alpha ,value)
          %vk:supported-usage-flags (vk:supported-usage-flags ,value)
          %vk:supported-surface-counters (vk:supported-surface-counters ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-power-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:power-state)
       ,ptr
       (:struct %vk:display-power-info-ext))
    (setf %vk:s-type :display-power-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:power-state (vk:power-state ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-event-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-event)
       ,ptr
       (:struct %vk:device-event-info-ext))
    (setf %vk:s-type :device-event-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:device-event (vk:device-event ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-event-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:display-event)
       ,ptr
       (:struct %vk:display-event-info-ext))
    (setf %vk:s-type :display-event-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:display-event (vk:display-event ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-swapchain-counter-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:surface-counters)
       ,ptr
       (:struct %vk:swapchain-counter-create-info-ext))
    (setf %vk:s-type :swapchain-counter-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:surface-counters (vk:surface-counters ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-group-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:physical-device-count
        %vk:physical-devices
        %vk:subset-allocation)
       ,ptr
       (:struct %vk:physical-device-group-properties))
    (setf %vk:s-type :physical-device-group-properties
          %vk:p-next (cffi:null-pointer)
          %vk:physical-device-count (vk:physical-device-count ,value)
          %vk:physical-devices (if (vk:physical-devices ,value) (vk:physical-devices ,value) (cffi:null-pointer))
          %vk:subset-allocation (vk:subset-allocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-allocate-flags-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:device-mask)
       ,ptr
       (:struct %vk:memory-allocate-flags-info))
    (setf %vk:s-type :memory-allocate-flags-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:device-mask (vk:device-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-buffer-memory-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer
        %vk:memory
        %vk:memory-offset)
       ,ptr
       (:struct %vk:bind-buffer-memory-info))
    (setf %vk:s-type :bind-buffer-memory-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-buffer-memory-device-group-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-index-count
        %vk:p-device-indices)
       ,ptr
       (:struct %vk:bind-buffer-memory-device-group-info))
    (setf %vk:s-type :bind-buffer-memory-device-group-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-index-count (length (vk:device-indices ,value))
          %vk:p-device-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:device-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-image-memory-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image
        %vk:memory
        %vk:memory-offset)
       ,ptr
       (:struct %vk:bind-image-memory-info))
    (setf %vk:s-type :bind-image-memory-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-image-memory-device-group-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-index-count
        %vk:p-device-indices
        %vk:split-instance-bind-region-count
        %vk:p-split-instance-bind-regions)
       ,ptr
       (:struct %vk:bind-image-memory-device-group-info))
    (setf %vk:s-type :bind-image-memory-device-group-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-index-count (length (vk:device-indices ,value))
          %vk:p-device-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:device-indices ,value) ,ptr)
          %vk:split-instance-bind-region-count (length (vk:split-instance-bind-regions ,value))
          %vk:p-split-instance-bind-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:split-instance-bind-regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-render-pass-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-mask
        %vk:device-render-area-count
        %vk:p-device-render-areas)
       ,ptr
       (:struct %vk:device-group-render-pass-begin-info))
    (setf %vk:s-type :device-group-render-pass-begin-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-mask (vk:device-mask ,value)
          %vk:device-render-area-count (length (vk:device-render-areas ,value))
          %vk:p-device-render-areas (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:device-render-areas ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-command-buffer-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-mask)
       ,ptr
       (:struct %vk:device-group-command-buffer-begin-info))
    (setf %vk:s-type :device-group-command-buffer-begin-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-mask (vk:device-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-submit-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-count
        %vk:p-wait-semaphore-device-indices
        %vk:command-buffer-count
        %vk:p-command-buffer-device-masks
        %vk:signal-semaphore-count
        %vk:p-signal-semaphore-device-indices)
       ,ptr
       (:struct %vk:device-group-submit-info))
    (setf %vk:s-type :device-group-submit-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-count (length (vk:wait-semaphore-device-indices ,value))
          %vk:p-wait-semaphore-device-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:wait-semaphore-device-indices ,value) ,ptr)
          %vk:command-buffer-count (length (vk:command-buffer-device-masks ,value))
          %vk:p-command-buffer-device-masks (vk-alloc:foreign-allocate-and-fill :uint32 (vk:command-buffer-device-masks ,value) ,ptr)
          %vk:signal-semaphore-count (length (vk:signal-semaphore-device-indices ,value))
          %vk:p-signal-semaphore-device-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:signal-semaphore-device-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-bind-sparse-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:resource-device-index
        %vk:memory-device-index)
       ,ptr
       (:struct %vk:device-group-bind-sparse-info))
    (setf %vk:s-type :device-group-bind-sparse-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:resource-device-index (vk:resource-device-index ,value)
          %vk:memory-device-index (vk:memory-device-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-present-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:present-mask
        %vk:modes)
       ,ptr
       (:struct %vk:device-group-present-capabilities-khr))
    (setf %vk:s-type :device-group-present-capabilities-khr
          %vk:p-next (cffi:null-pointer)
          %vk:modes (vk:modes ,value))
    (cffi:lisp-array-to-foreign (vk:present-mask ,value) %vk:present-mask '(:array :uint32 vk_max_device_group_size))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-swapchain-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain)
       ,ptr
       (:struct %vk:image-swapchain-create-info-khr))
    (setf %vk:s-type :image-swapchain-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:swapchain (if (vk:swapchain ,value) (vk:swapchain ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-image-memory-swapchain-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain
        %vk:image-index)
       ,ptr
       (:struct %vk:bind-image-memory-swapchain-info-khr))
    (setf %vk:s-type :bind-image-memory-swapchain-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:swapchain (if (vk:swapchain ,value) (vk:swapchain ,value) (cffi:null-pointer))
          %vk:image-index (vk:image-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acquire-next-image-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain
        %vk:timeout
        %vk:semaphore
        %vk:fence
        %vk:device-mask)
       ,ptr
       (:struct %vk:acquire-next-image-info-khr))
    (setf %vk:s-type :acquire-next-image-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:swapchain (if (vk:swapchain ,value) (vk:swapchain ,value) (cffi:null-pointer))
          %vk:timeout (vk:timeout ,value)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:fence (if (vk:fence ,value) (vk:fence ,value) (cffi:null-pointer))
          %vk:device-mask (vk:device-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-present-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain-count
        %vk:p-device-masks
        %vk:mode)
       ,ptr
       (:struct %vk:device-group-present-info-khr))
    (setf %vk:s-type :device-group-present-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:swapchain-count (length (vk:device-masks ,value))
          %vk:p-device-masks (vk-alloc:foreign-allocate-and-fill :uint32 (vk:device-masks ,value) ,ptr)
          %vk:mode (vk:mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-device-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:physical-device-count
        %vk:p-physical-devices)
       ,ptr
       (:struct %vk:device-group-device-create-info))
    (setf %vk:s-type :device-group-device-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:physical-device-count (length (vk:physical-devices ,value))
          %vk:p-physical-devices (vk-alloc:foreign-allocate-and-fill '%vk:physical-device (vk:physical-devices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-group-swapchain-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:modes)
       ,ptr
       (:struct %vk:device-group-swapchain-create-info-khr))
    (setf %vk:s-type :device-group-swapchain-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:modes (vk:modes ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-update-template-entry) ptr)
  `(cffi:with-foreign-slots
      ((%vk:dst-binding
        %vk:dst-array-element
        %vk:descriptor-count
        %vk:descriptor-type
        %vk:offset
        %vk:stride)
       ,ptr
       (:struct %vk:descriptor-update-template-entry))
    (setf %vk:dst-binding (vk:dst-binding ,value)
          %vk:dst-array-element (vk:dst-array-element ,value)
          %vk:descriptor-count (vk:descriptor-count ,value)
          %vk:descriptor-type (vk:descriptor-type ,value)
          %vk:offset (vk:offset ,value)
          %vk:stride (vk:stride ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-update-template-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:descriptor-update-entry-count
        %vk:p-descriptor-update-entries
        %vk:template-type
        %vk:descriptor-set-layout
        %vk:pipeline-bind-point
        %vk:pipeline-layout
        %vk:set)
       ,ptr
       (:struct %vk:descriptor-update-template-create-info))
    (setf %vk:s-type :descriptor-update-template-create-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:descriptor-update-entry-count (length (vk:descriptor-update-entries ,value))
          %vk:p-descriptor-update-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:descriptor-update-template-entry) (vk:descriptor-update-entries ,value) ,ptr)
          %vk:template-type (vk:template-type ,value)
          %vk:descriptor-set-layout (if (vk:descriptor-set-layout ,value) (vk:descriptor-set-layout ,value) (cffi:null-pointer))
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:pipeline-layout (if (vk:pipeline-layout ,value) (vk:pipeline-layout ,value) (cffi:null-pointer))
          %vk:set (vk:set ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-x-y-color-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y)
       ,ptr
       (:struct %vk:x-y-color-ext))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-hdr-metadata-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:display-primary-red
        %vk:display-primary-green
        %vk:display-primary-blue
        %vk:white-point
        %vk:max-luminance
        %vk:min-luminance
        %vk:max-content-light-level
        %vk:max-frame-average-light-level)
       ,ptr
       (:struct %vk:hdr-metadata-ext))
    (setf %vk:s-type :hdr-metadata-ext
          %vk:p-next (cffi:null-pointer)
          %vk:display-primary-red (vk-alloc:foreign-allocate-and-fill '(:struct %vk:x-y-color-ext) (vk:display-primary-red ,value) ,ptr)
          %vk:display-primary-green (vk-alloc:foreign-allocate-and-fill '(:struct %vk:x-y-color-ext) (vk:display-primary-green ,value) ,ptr)
          %vk:display-primary-blue (vk-alloc:foreign-allocate-and-fill '(:struct %vk:x-y-color-ext) (vk:display-primary-blue ,value) ,ptr)
          %vk:white-point (vk-alloc:foreign-allocate-and-fill '(:struct %vk:x-y-color-ext) (vk:white-point ,value) ,ptr)
          %vk:max-luminance (vk:max-luminance ,value)
          %vk:min-luminance (vk:min-luminance ,value)
          %vk:max-content-light-level (vk:max-content-light-level ,value)
          %vk:max-frame-average-light-level (vk:max-frame-average-light-level ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-native-hdr-surface-capabilities-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:local-dimming-support)
       ,ptr
       (:struct %vk:display-native-hdr-surface-capabilities-amd))
    (setf %vk:s-type :display-native-hdr-surface-capabilities-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:local-dimming-support (vk:local-dimming-support ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-swapchain-display-native-hdr-create-info-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:local-dimming-enable)
       ,ptr
       (:struct %vk:swapchain-display-native-hdr-create-info-amd))
    (setf %vk:s-type :swapchain-display-native-hdr-create-info-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:local-dimming-enable (vk:local-dimming-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-refresh-cycle-duration-google) ptr)
  `(cffi:with-foreign-slots
      ((%vk:refresh-duration)
       ,ptr
       (:struct %vk:refresh-cycle-duration-google))
    (setf %vk:refresh-duration (vk:refresh-duration ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-past-presentation-timing-google) ptr)
  `(cffi:with-foreign-slots
      ((%vk:present-id
        %vk:desired-present-time
        %vk:actual-present-time
        %vk:earliest-present-time
        %vk:present-margin)
       ,ptr
       (:struct %vk:past-presentation-timing-google))
    (setf %vk:present-id (vk:present-id ,value)
          %vk:desired-present-time (vk:desired-present-time ,value)
          %vk:actual-present-time (vk:actual-present-time ,value)
          %vk:earliest-present-time (vk:earliest-present-time ,value)
          %vk:present-margin (vk:present-margin ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-times-info-google) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:swapchain-count
        %vk:p-times)
       ,ptr
       (:struct %vk:present-times-info-google))
    (setf %vk:s-type :present-times-info-google
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:swapchain-count (vk:swapchain-count ,value)
          %vk:p-times (vk-alloc:foreign-allocate-and-fill '(:struct %vk:present-time-google) (vk:times ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-time-google) ptr)
  `(cffi:with-foreign-slots
      ((%vk:present-id
        %vk:desired-present-time)
       ,ptr
       (:struct %vk:present-time-google))
    (setf %vk:present-id (vk:present-id ,value)
          %vk:desired-present-time (vk:desired-present-time ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-i-os-surface-create-info-mvk) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-view)
       ,ptr
       (:struct %vk:i-os-surface-create-info-mvk))
    (setf %vk:s-type :ios-surface-create-info-mvk
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:p-view (if (vk:view ,value) (vk:view ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-mac-os-surface-create-info-mvk) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-view)
       ,ptr
       (:struct %vk:mac-os-surface-create-info-mvk))
    (setf %vk:s-type :macos-surface-create-info-mvk
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:p-view (if (vk:view ,value) (vk:view ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-metal-surface-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-layer)
       ,ptr
       (:struct %vk:metal-surface-create-info-ext))
    (setf %vk:s-type :metal-surface-create-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:p-layer (vk:layer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-viewport-w-scaling-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:xcoeff
        %vk:ycoeff)
       ,ptr
       (:struct %vk:viewport-w-scaling-nv))
    (setf %vk:xcoeff (vk:xcoeff ,value)
          %vk:ycoeff (vk:ycoeff ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-w-scaling-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:viewport-w-scaling-enable
        %vk:viewport-count
        %vk:p-viewport-w-scalings)
       ,ptr
       (:struct %vk:pipeline-viewport-w-scaling-state-create-info-nv))
    (setf %vk:s-type :pipeline-viewport-w-scaling-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:viewport-w-scaling-enable (vk:viewport-w-scaling-enable ,value)
          %vk:viewport-count (length (vk:viewport-w-scalings ,value))
          %vk:p-viewport-w-scalings (vk-alloc:foreign-allocate-and-fill '(:struct %vk:viewport-w-scaling-nv) (vk:viewport-w-scalings ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-viewport-swizzle-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y
        %vk:z
        %vk:w)
       ,ptr
       (:struct %vk:viewport-swizzle-nv))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value)
          %vk:z (vk:z ,value)
          %vk:w (vk:w ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-swizzle-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:viewport-count
        %vk:p-viewport-swizzles)
       ,ptr
       (:struct %vk:pipeline-viewport-swizzle-state-create-info-nv))
    (setf %vk:s-type :pipeline-viewport-swizzle-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:viewport-count (length (vk:viewport-swizzles ,value))
          %vk:p-viewport-swizzles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:viewport-swizzle-nv) (vk:viewport-swizzles ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-discard-rectangle-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-discard-rectangles)
       ,ptr
       (:struct %vk:physical-device-discard-rectangle-properties-ext))
    (setf %vk:s-type :physical-device-discard-rectangle-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-discard-rectangles (vk:max-discard-rectangles ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-discard-rectangle-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:discard-rectangle-mode
        %vk:discard-rectangle-count
        %vk:p-discard-rectangles)
       ,ptr
       (:struct %vk:pipeline-discard-rectangle-state-create-info-ext))
    (setf %vk:s-type :pipeline-discard-rectangle-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:discard-rectangle-mode (vk:discard-rectangle-mode ,value)
          %vk:discard-rectangle-count (length (vk:discard-rectangles ,value))
          %vk:p-discard-rectangles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:discard-rectangles ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-multiview-per-view-attributes-properties-nv-x) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:per-view-position-all-components)
       ,ptr
       (:struct %vk:physical-device-multiview-per-view-attributes-properties-nv-x))
    (setf %vk:s-type :physical-device-multiview-per-view-attributes-properties-nvx
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:per-view-position-all-components (vk:per-view-position-all-components ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-input-attachment-aspect-reference) ptr)
  `(cffi:with-foreign-slots
      ((%vk:subpass
        %vk:input-attachment-index
        %vk:aspect-mask)
       ,ptr
       (:struct %vk:input-attachment-aspect-reference))
    (setf %vk:subpass (vk:subpass ,value)
          %vk:input-attachment-index (vk:input-attachment-index ,value)
          %vk:aspect-mask (vk:aspect-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-input-attachment-aspect-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:aspect-reference-count
        %vk:p-aspect-references)
       ,ptr
       (:struct %vk:render-pass-input-attachment-aspect-create-info))
    (setf %vk:s-type :render-pass-input-attachment-aspect-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:aspect-reference-count (length (vk:aspect-references ,value))
          %vk:p-aspect-references (vk-alloc:foreign-allocate-and-fill '(:struct %vk:input-attachment-aspect-reference) (vk:aspect-references ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-surface-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:surface)
       ,ptr
       (:struct %vk:physical-device-surface-info-2-khr))
    (setf %vk:s-type :physical-device-surface-info-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:surface (if (vk:surface ,value) (vk:surface ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-capabilities-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:surface-capabilities)
       ,ptr
       (:struct %vk:surface-capabilities-2-khr))
    (setf %vk:s-type :surface-capabilities-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:surface-capabilities (vk-alloc:foreign-allocate-and-fill '(:struct %vk:surface-capabilities-khr) (vk:surface-capabilities ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-format-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:surface-format)
       ,ptr
       (:struct %vk:surface-format-2-khr))
    (setf %vk:s-type :surface-format-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:surface-format (vk-alloc:foreign-allocate-and-fill '(:struct %vk:surface-format-khr) (vk:surface-format ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-properties-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:display-properties)
       ,ptr
       (:struct %vk:display-properties-2-khr))
    (setf %vk:s-type :display-properties-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:display-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-properties-khr) (vk:display-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-plane-properties-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:display-plane-properties)
       ,ptr
       (:struct %vk:display-plane-properties-2-khr))
    (setf %vk:s-type :display-plane-properties-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:display-plane-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-plane-properties-khr) (vk:display-plane-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-mode-properties-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:display-mode-properties)
       ,ptr
       (:struct %vk:display-mode-properties-2-khr))
    (setf %vk:s-type :display-mode-properties-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:display-mode-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-mode-properties-khr) (vk:display-mode-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-plane-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:mode
        %vk:plane-index)
       ,ptr
       (:struct %vk:display-plane-info-2-khr))
    (setf %vk:s-type :display-plane-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:mode (if (vk:mode ,value) (vk:mode ,value) (cffi:null-pointer))
          %vk:plane-index (vk:plane-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-display-plane-capabilities-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:capabilities)
       ,ptr
       (:struct %vk:display-plane-capabilities-2-khr))
    (setf %vk:s-type :display-plane-capabilities-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:capabilities (vk-alloc:foreign-allocate-and-fill '(:struct %vk:display-plane-capabilities-khr) (vk:capabilities ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shared-present-surface-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shared-present-supported-usage-flags)
       ,ptr
       (:struct %vk:shared-present-surface-capabilities-khr))
    (setf %vk:s-type :shared-present-surface-capabilities-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shared-present-supported-usage-flags (vk:shared-present-supported-usage-flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-16-bit-storage-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:storage-buffer-16-bit-access
        %vk:uniform-and-storage-buffer-16-bit-access
        %vk:storage-push-constant-16
        %vk:storage-input-output-16)
       ,ptr
       (:struct %vk:physical-device-16-bit-storage-features))
    (setf %vk:s-type :physical-device-16bit-storage-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:storage-buffer-16-bit-access (vk:storage-buffer-16-bit-access ,value)
          %vk:uniform-and-storage-buffer-16-bit-access (vk:uniform-and-storage-buffer-16-bit-access ,value)
          %vk:storage-push-constant-16 (vk:storage-push-constant-16 ,value)
          %vk:storage-input-output-16 (vk:storage-input-output-16 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-subgroup-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:subgroup-size
        %vk:supported-stages
        %vk:supported-operations
        %vk:quad-operations-in-all-stages)
       ,ptr
       (:struct %vk:physical-device-subgroup-properties))
    (setf %vk:s-type :physical-device-subgroup-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:subgroup-size (vk:subgroup-size ,value)
          %vk:supported-stages (vk:supported-stages ,value)
          %vk:supported-operations (vk:supported-operations ,value)
          %vk:quad-operations-in-all-stages (vk:quad-operations-in-all-stages ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-subgroup-extended-types-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-subgroup-extended-types)
       ,ptr
       (:struct %vk:physical-device-shader-subgroup-extended-types-features))
    (setf %vk:s-type :physical-device-shader-subgroup-extended-types-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-subgroup-extended-types (vk:shader-subgroup-extended-types ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-memory-requirements-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer)
       ,ptr
       (:struct %vk:buffer-memory-requirements-info-2))
    (setf %vk:s-type :buffer-memory-requirements-info-2
          %vk:p-next (cffi:null-pointer)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-memory-requirements-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image)
       ,ptr
       (:struct %vk:image-memory-requirements-info-2))
    (setf %vk:s-type :image-memory-requirements-info-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-sparse-memory-requirements-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image)
       ,ptr
       (:struct %vk:image-sparse-memory-requirements-info-2))
    (setf %vk:s-type :image-sparse-memory-requirements-info-2
          %vk:p-next (cffi:null-pointer)
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-requirements-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-requirements)
       ,ptr
       (:struct %vk:memory-requirements-2))
    (setf %vk:s-type :memory-requirements-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:memory-requirements (vk-alloc:foreign-allocate-and-fill '(:struct %vk:memory-requirements) (vk:memory-requirements ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sparse-image-memory-requirements-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-requirements)
       ,ptr
       (:struct %vk:sparse-image-memory-requirements-2))
    (setf %vk:s-type :sparse-image-memory-requirements-2
          %vk:p-next (cffi:null-pointer)
          %vk:memory-requirements (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sparse-image-memory-requirements) (vk:memory-requirements ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-point-clipping-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:point-clipping-behavior)
       ,ptr
       (:struct %vk:physical-device-point-clipping-properties))
    (setf %vk:s-type :physical-device-point-clipping-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:point-clipping-behavior (vk:point-clipping-behavior ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-dedicated-requirements) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:prefers-dedicated-allocation
        %vk:requires-dedicated-allocation)
       ,ptr
       (:struct %vk:memory-dedicated-requirements))
    (setf %vk:s-type :memory-dedicated-requirements
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:prefers-dedicated-allocation (vk:prefers-dedicated-allocation ,value)
          %vk:requires-dedicated-allocation (vk:requires-dedicated-allocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-dedicated-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image
        %vk:buffer)
       ,ptr
       (:struct %vk:memory-dedicated-allocate-info))
    (setf %vk:s-type :memory-dedicated-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-view-usage-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:usage)
       ,ptr
       (:struct %vk:image-view-usage-create-info))
    (setf %vk:s-type :image-view-usage-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:usage (vk:usage ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-tessellation-domain-origin-state-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:domain-origin)
       ,ptr
       (:struct %vk:pipeline-tessellation-domain-origin-state-create-info))
    (setf %vk:s-type :pipeline-tessellation-domain-origin-state-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:domain-origin (vk:domain-origin ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-ycbcr-conversion-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:conversion)
       ,ptr
       (:struct %vk:sampler-ycbcr-conversion-info))
    (setf %vk:s-type :sampler-ycbcr-conversion-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:conversion (if (vk:conversion ,value) (vk:conversion ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-ycbcr-conversion-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format
        %vk:ycbcr-model
        %vk:ycbcr-range
        %vk:components
        %vk:x-chroma-offset
        %vk:y-chroma-offset
        %vk:chroma-filter
        %vk:force-explicit-reconstruction)
       ,ptr
       (:struct %vk:sampler-ycbcr-conversion-create-info))
    (setf %vk:s-type :sampler-ycbcr-conversion-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:format (vk:format ,value)
          %vk:ycbcr-model (vk:ycbcr-model ,value)
          %vk:ycbcr-range (vk:ycbcr-range ,value)
          %vk:components (vk-alloc:foreign-allocate-and-fill '(:struct %vk:component-mapping) (vk:components ,value) ,ptr)
          %vk:x-chroma-offset (vk:x-chroma-offset ,value)
          %vk:y-chroma-offset (vk:y-chroma-offset ,value)
          %vk:chroma-filter (vk:chroma-filter ,value)
          %vk:force-explicit-reconstruction (vk:force-explicit-reconstruction ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-image-plane-memory-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:plane-aspect)
       ,ptr
       (:struct %vk:bind-image-plane-memory-info))
    (setf %vk:s-type :bind-image-plane-memory-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:plane-aspect (vk:plane-aspect ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-plane-memory-requirements-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:plane-aspect)
       ,ptr
       (:struct %vk:image-plane-memory-requirements-info))
    (setf %vk:s-type :image-plane-memory-requirements-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:plane-aspect (vk:plane-aspect ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-sampler-ycbcr-conversion-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sampler-ycbcr-conversion)
       ,ptr
       (:struct %vk:physical-device-sampler-ycbcr-conversion-features))
    (setf %vk:s-type :physical-device-sampler-ycbcr-conversion-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sampler-ycbcr-conversion (vk:sampler-ycbcr-conversion ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-ycbcr-conversion-image-format-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:combined-image-sampler-descriptor-count)
       ,ptr
       (:struct %vk:sampler-ycbcr-conversion-image-format-properties))
    (setf %vk:s-type :sampler-ycbcr-conversion-image-format-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:combined-image-sampler-descriptor-count (vk:combined-image-sampler-descriptor-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-texture-l-o-d-gather-format-properties-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:supports-texture-gather-l-o-d-bias-amd)
       ,ptr
       (:struct %vk:texture-l-o-d-gather-format-properties-amd))
    (setf %vk:s-type :texture-lod-gather-format-properties-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:supports-texture-gather-l-o-d-bias-amd (vk:supports-texture-gather-l-o-d-bias-amd ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-conditional-rendering-begin-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer
        %vk:offset
        %vk:flags)
       ,ptr
       (:struct %vk:conditional-rendering-begin-info-ext))
    (setf %vk:s-type :conditional-rendering-begin-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-protected-submit-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:protected-submit)
       ,ptr
       (:struct %vk:protected-submit-info))
    (setf %vk:s-type :protected-submit-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:protected-submit (vk:protected-submit ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-protected-memory-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:protected-memory)
       ,ptr
       (:struct %vk:physical-device-protected-memory-features))
    (setf %vk:s-type :physical-device-protected-memory-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:protected-memory (vk:protected-memory ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-protected-memory-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:protected-no-fault)
       ,ptr
       (:struct %vk:physical-device-protected-memory-properties))
    (setf %vk:s-type :physical-device-protected-memory-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:protected-no-fault (vk:protected-no-fault ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-queue-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:queue-family-index
        %vk:queue-index)
       ,ptr
       (:struct %vk:device-queue-info-2))
    (setf %vk:s-type :device-queue-info-2
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:queue-family-index (vk:queue-family-index ,value)
          %vk:queue-index (vk:queue-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-coverage-to-color-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:coverage-to-color-enable
        %vk:coverage-to-color-location)
       ,ptr
       (:struct %vk:pipeline-coverage-to-color-state-create-info-nv))
    (setf %vk:s-type :pipeline-coverage-to-color-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:coverage-to-color-enable (vk:coverage-to-color-enable ,value)
          %vk:coverage-to-color-location (vk:coverage-to-color-location ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-sampler-filter-minmax-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:filter-minmax-single-component-formats
        %vk:filter-minmax-image-component-mapping)
       ,ptr
       (:struct %vk:physical-device-sampler-filter-minmax-properties))
    (setf %vk:s-type :physical-device-sampler-filter-minmax-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:filter-minmax-single-component-formats (vk:filter-minmax-single-component-formats ,value)
          %vk:filter-minmax-image-component-mapping (vk:filter-minmax-image-component-mapping ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sample-location-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:x
        %vk:y)
       ,ptr
       (:struct %vk:sample-location-ext))
    (setf %vk:x (vk:x ,value)
          %vk:y (vk:y ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sample-locations-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sample-locations-per-pixel
        %vk:sample-location-grid-size
        %vk:sample-locations-count
        %vk:p-sample-locations)
       ,ptr
       (:struct %vk:sample-locations-info-ext))
    (setf %vk:s-type :sample-locations-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sample-locations-per-pixel (vk:sample-locations-per-pixel ,value)
          %vk:sample-location-grid-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:sample-location-grid-size ,value) ,ptr)
          %vk:sample-locations-count (length (vk:sample-locations ,value))
          %vk:p-sample-locations (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sample-location-ext) (vk:sample-locations ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-sample-locations-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:attachment-index
        %vk:sample-locations-info)
       ,ptr
       (:struct %vk:attachment-sample-locations-ext))
    (setf %vk:attachment-index (vk:attachment-index ,value)
          %vk:sample-locations-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sample-locations-info-ext) (vk:sample-locations-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-sample-locations-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:subpass-index
        %vk:sample-locations-info)
       ,ptr
       (:struct %vk:subpass-sample-locations-ext))
    (setf %vk:subpass-index (vk:subpass-index ,value)
          %vk:sample-locations-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sample-locations-info-ext) (vk:sample-locations-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-sample-locations-begin-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:attachment-initial-sample-locations-count
        %vk:p-attachment-initial-sample-locations
        %vk:post-subpass-sample-locations-count
        %vk:p-post-subpass-sample-locations)
       ,ptr
       (:struct %vk:render-pass-sample-locations-begin-info-ext))
    (setf %vk:s-type :render-pass-sample-locations-begin-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:attachment-initial-sample-locations-count (length (vk:attachment-initial-sample-locations ,value))
          %vk:p-attachment-initial-sample-locations (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-sample-locations-ext) (vk:attachment-initial-sample-locations ,value) ,ptr)
          %vk:post-subpass-sample-locations-count (length (vk:post-subpass-sample-locations ,value))
          %vk:p-post-subpass-sample-locations (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subpass-sample-locations-ext) (vk:post-subpass-sample-locations ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-sample-locations-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sample-locations-enable
        %vk:sample-locations-info)
       ,ptr
       (:struct %vk:pipeline-sample-locations-state-create-info-ext))
    (setf %vk:s-type :pipeline-sample-locations-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sample-locations-enable (vk:sample-locations-enable ,value)
          %vk:sample-locations-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:sample-locations-info-ext) (vk:sample-locations-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-sample-locations-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sample-location-sample-counts
        %vk:max-sample-location-grid-size
        %vk:sample-location-coordinate-range
        %vk:sample-location-sub-pixel-bits
        %vk:variable-sample-locations)
       ,ptr
       (:struct %vk:physical-device-sample-locations-properties-ext))
    (setf %vk:s-type :physical-device-sample-locations-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sample-location-sample-counts (vk:sample-location-sample-counts ,value)
          %vk:max-sample-location-grid-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-sample-location-grid-size ,value) ,ptr)
          %vk:sample-location-sub-pixel-bits (vk:sample-location-sub-pixel-bits ,value)
          %vk:variable-sample-locations (vk:variable-sample-locations ,value))
    (cffi:lisp-array-to-foreign (vk:sample-location-coordinate-range ,value) %vk:sample-location-coordinate-range '(:array :float 2))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-multisample-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-sample-location-grid-size)
       ,ptr
       (:struct %vk:multisample-properties-ext))
    (setf %vk:s-type :multisample-properties-ext
          %vk:p-next (cffi:null-pointer)
          %vk:max-sample-location-grid-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-sample-location-grid-size ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-reduction-mode-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:reduction-mode)
       ,ptr
       (:struct %vk:sampler-reduction-mode-create-info))
    (setf %vk:s-type :sampler-reduction-mode-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:reduction-mode (vk:reduction-mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-blend-operation-advanced-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:advanced-blend-coherent-operations)
       ,ptr
       (:struct %vk:physical-device-blend-operation-advanced-features-ext))
    (setf %vk:s-type :physical-device-blend-operation-advanced-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:advanced-blend-coherent-operations (vk:advanced-blend-coherent-operations ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-blend-operation-advanced-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:advanced-blend-max-color-attachments
        %vk:advanced-blend-independent-blend
        %vk:advanced-blend-non-premultiplied-src-color
        %vk:advanced-blend-non-premultiplied-dst-color
        %vk:advanced-blend-correlated-overlap
        %vk:advanced-blend-all-operations)
       ,ptr
       (:struct %vk:physical-device-blend-operation-advanced-properties-ext))
    (setf %vk:s-type :physical-device-blend-operation-advanced-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:advanced-blend-max-color-attachments (vk:advanced-blend-max-color-attachments ,value)
          %vk:advanced-blend-independent-blend (vk:advanced-blend-independent-blend ,value)
          %vk:advanced-blend-non-premultiplied-src-color (vk:advanced-blend-non-premultiplied-src-color ,value)
          %vk:advanced-blend-non-premultiplied-dst-color (vk:advanced-blend-non-premultiplied-dst-color ,value)
          %vk:advanced-blend-correlated-overlap (vk:advanced-blend-correlated-overlap ,value)
          %vk:advanced-blend-all-operations (vk:advanced-blend-all-operations ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-color-blend-advanced-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-premultiplied
        %vk:dst-premultiplied
        %vk:blend-overlap)
       ,ptr
       (:struct %vk:pipeline-color-blend-advanced-state-create-info-ext))
    (setf %vk:s-type :pipeline-color-blend-advanced-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-premultiplied (vk:src-premultiplied ,value)
          %vk:dst-premultiplied (vk:dst-premultiplied ,value)
          %vk:blend-overlap (vk:blend-overlap ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-inline-uniform-block-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:inline-uniform-block
        %vk:descriptor-binding-inline-uniform-block-update-after-bind)
       ,ptr
       (:struct %vk:physical-device-inline-uniform-block-features-ext))
    (setf %vk:s-type :physical-device-inline-uniform-block-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:inline-uniform-block (vk:inline-uniform-block ,value)
          %vk:descriptor-binding-inline-uniform-block-update-after-bind (vk:descriptor-binding-inline-uniform-block-update-after-bind ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-inline-uniform-block-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-inline-uniform-block-size
        %vk:max-per-stage-descriptor-inline-uniform-blocks
        %vk:max-per-stage-descriptor-update-after-bind-inline-uniform-blocks
        %vk:max-descriptor-set-inline-uniform-blocks
        %vk:max-descriptor-set-update-after-bind-inline-uniform-blocks)
       ,ptr
       (:struct %vk:physical-device-inline-uniform-block-properties-ext))
    (setf %vk:s-type :physical-device-inline-uniform-block-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-inline-uniform-block-size (vk:max-inline-uniform-block-size ,value)
          %vk:max-per-stage-descriptor-inline-uniform-blocks (vk:max-per-stage-descriptor-inline-uniform-blocks ,value)
          %vk:max-per-stage-descriptor-update-after-bind-inline-uniform-blocks (vk:max-per-stage-descriptor-update-after-bind-inline-uniform-blocks ,value)
          %vk:max-descriptor-set-inline-uniform-blocks (vk:max-descriptor-set-inline-uniform-blocks ,value)
          %vk:max-descriptor-set-update-after-bind-inline-uniform-blocks (vk:max-descriptor-set-update-after-bind-inline-uniform-blocks ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-write-descriptor-set-inline-uniform-block-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:data-size
        %vk:p-data)
       ,ptr
       (:struct %vk:write-descriptor-set-inline-uniform-block-ext))
    (setf %vk:s-type :write-descriptor-set-inline-uniform-block-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:data-size (vk:data-size ,value)
          %vk:p-data (if (vk:data ,value) (vk:data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-pool-inline-uniform-block-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-inline-uniform-block-bindings)
       ,ptr
       (:struct %vk:descriptor-pool-inline-uniform-block-create-info-ext))
    (setf %vk:s-type :descriptor-pool-inline-uniform-block-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-inline-uniform-block-bindings (vk:max-inline-uniform-block-bindings ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-coverage-modulation-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:coverage-modulation-mode
        %vk:coverage-modulation-table-enable
        %vk:coverage-modulation-table-count
        %vk:p-coverage-modulation-table)
       ,ptr
       (:struct %vk:pipeline-coverage-modulation-state-create-info-nv))
    (setf %vk:s-type :pipeline-coverage-modulation-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:coverage-modulation-mode (vk:coverage-modulation-mode ,value)
          %vk:coverage-modulation-table-enable (vk:coverage-modulation-table-enable ,value)
          %vk:coverage-modulation-table-count (length (vk:coverage-modulation-table ,value))
          %vk:p-coverage-modulation-table (vk-alloc:foreign-allocate-and-fill :float (vk:coverage-modulation-table ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-format-list-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:view-format-count
        %vk:p-view-formats)
       ,ptr
       (:struct %vk:image-format-list-create-info))
    (setf %vk:s-type :image-format-list-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:view-format-count (length (vk:view-formats ,value))
          %vk:p-view-formats (vk-alloc:foreign-allocate-and-fill '%vk:format (vk:view-formats ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-validation-cache-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:initial-data-size
        %vk:p-initial-data)
       ,ptr
       (:struct %vk:validation-cache-create-info-ext))
    (setf %vk:s-type :validation-cache-create-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:initial-data-size (vk:initial-data-size ,value)
          %vk:p-initial-data (if (vk:initial-data ,value) (vk:initial-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shader-module-validation-cache-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:validation-cache)
       ,ptr
       (:struct %vk:shader-module-validation-cache-create-info-ext))
    (setf %vk:s-type :shader-module-validation-cache-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:validation-cache (if (vk:validation-cache ,value) (vk:validation-cache ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-maintenance-3-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-per-set-descriptors
        %vk:max-memory-allocation-size)
       ,ptr
       (:struct %vk:physical-device-maintenance-3-properties))
    (setf %vk:s-type :physical-device-maintenance-3-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-per-set-descriptors (vk:max-per-set-descriptors ,value)
          %vk:max-memory-allocation-size (vk:max-memory-allocation-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-layout-support) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:supported)
       ,ptr
       (:struct %vk:descriptor-set-layout-support))
    (setf %vk:s-type :descriptor-set-layout-support
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:supported (vk:supported ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-draw-parameters-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-draw-parameters)
       ,ptr
       (:struct %vk:physical-device-shader-draw-parameters-features))
    (setf %vk:s-type :physical-device-shader-draw-parameters-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-draw-parameters (vk:shader-draw-parameters ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-float-16-int-8-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-float-16
        %vk:shader-int-8)
       ,ptr
       (:struct %vk:physical-device-shader-float-16-int-8-features))
    (setf %vk:s-type :physical-device-shader-float16-int8-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-float-16 (vk:shader-float-16 ,value)
          %vk:shader-int-8 (vk:shader-int-8 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-float-controls-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:denorm-behavior-independence
        %vk:rounding-mode-independence
        %vk:shader-signed-zero-inf-nan-preserve-float-16
        %vk:shader-signed-zero-inf-nan-preserve-float-32
        %vk:shader-signed-zero-inf-nan-preserve-float-64
        %vk:shader-denorm-preserve-float-16
        %vk:shader-denorm-preserve-float-32
        %vk:shader-denorm-preserve-float-64
        %vk:shader-denorm-flush-to-zero-float-16
        %vk:shader-denorm-flush-to-zero-float-32
        %vk:shader-denorm-flush-to-zero-float-64
        %vk:shader-rounding-mode-rte-float-16
        %vk:shader-rounding-mode-rte-float-32
        %vk:shader-rounding-mode-rte-float-64
        %vk:shader-rounding-mode-rtz-float-16
        %vk:shader-rounding-mode-rtz-float-32
        %vk:shader-rounding-mode-rtz-float-64)
       ,ptr
       (:struct %vk:physical-device-float-controls-properties))
    (setf %vk:s-type :physical-device-float-controls-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:denorm-behavior-independence (vk:denorm-behavior-independence ,value)
          %vk:rounding-mode-independence (vk:rounding-mode-independence ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-16 (vk:shader-signed-zero-inf-nan-preserve-float-16 ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-32 (vk:shader-signed-zero-inf-nan-preserve-float-32 ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-64 (vk:shader-signed-zero-inf-nan-preserve-float-64 ,value)
          %vk:shader-denorm-preserve-float-16 (vk:shader-denorm-preserve-float-16 ,value)
          %vk:shader-denorm-preserve-float-32 (vk:shader-denorm-preserve-float-32 ,value)
          %vk:shader-denorm-preserve-float-64 (vk:shader-denorm-preserve-float-64 ,value)
          %vk:shader-denorm-flush-to-zero-float-16 (vk:shader-denorm-flush-to-zero-float-16 ,value)
          %vk:shader-denorm-flush-to-zero-float-32 (vk:shader-denorm-flush-to-zero-float-32 ,value)
          %vk:shader-denorm-flush-to-zero-float-64 (vk:shader-denorm-flush-to-zero-float-64 ,value)
          %vk:shader-rounding-mode-rte-float-16 (vk:shader-rounding-mode-rte-float-16 ,value)
          %vk:shader-rounding-mode-rte-float-32 (vk:shader-rounding-mode-rte-float-32 ,value)
          %vk:shader-rounding-mode-rte-float-64 (vk:shader-rounding-mode-rte-float-64 ,value)
          %vk:shader-rounding-mode-rtz-float-16 (vk:shader-rounding-mode-rtz-float-16 ,value)
          %vk:shader-rounding-mode-rtz-float-32 (vk:shader-rounding-mode-rtz-float-32 ,value)
          %vk:shader-rounding-mode-rtz-float-64 (vk:shader-rounding-mode-rtz-float-64 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-host-query-reset-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:host-query-reset)
       ,ptr
       (:struct %vk:physical-device-host-query-reset-features))
    (setf %vk:s-type :physical-device-host-query-reset-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:host-query-reset (vk:host-query-reset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shader-resource-usage-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:num-used-vgprs
        %vk:num-used-sgprs
        %vk:lds-size-per-local-work-group
        %vk:lds-usage-size-in-bytes
        %vk:scratch-mem-usage-in-bytes)
       ,ptr
       (:struct %vk:shader-resource-usage-amd))
    (setf %vk:num-used-vgprs (vk:num-used-vgprs ,value)
          %vk:num-used-sgprs (vk:num-used-sgprs ,value)
          %vk:lds-size-per-local-work-group (vk:lds-size-per-local-work-group ,value)
          %vk:lds-usage-size-in-bytes (vk:lds-usage-size-in-bytes ,value)
          %vk:scratch-mem-usage-in-bytes (vk:scratch-mem-usage-in-bytes ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shader-statistics-info-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:shader-stage-mask
        %vk:resource-usage
        %vk:num-physical-vgprs
        %vk:num-physical-sgprs
        %vk:num-available-vgprs
        %vk:num-available-sgprs
        %vk:compute-work-group-size)
       ,ptr
       (:struct %vk:shader-statistics-info-amd))
    (setf %vk:shader-stage-mask (vk:shader-stage-mask ,value)
          %vk:resource-usage (vk-alloc:foreign-allocate-and-fill '(:struct %vk:shader-resource-usage-amd) (vk:resource-usage ,value) ,ptr)
          %vk:num-physical-vgprs (vk:num-physical-vgprs ,value)
          %vk:num-physical-sgprs (vk:num-physical-sgprs ,value)
          %vk:num-available-vgprs (vk:num-available-vgprs ,value)
          %vk:num-available-sgprs (vk:num-available-sgprs ,value))
    (cffi:lisp-array-to-foreign (vk:compute-work-group-size ,value) %vk:compute-work-group-size '(:array :uint32 3))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-queue-global-priority-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:global-priority)
       ,ptr
       (:struct %vk:device-queue-global-priority-create-info-ext))
    (setf %vk:s-type :device-queue-global-priority-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:global-priority (vk:global-priority ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-utils-object-name-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:object-type
        %vk:object-handle
        %vk:p-object-name)
       ,ptr
       (:struct %vk:debug-utils-object-name-info-ext))
    (setf %vk:s-type :debug-utils-object-name-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:object-type (vk:object-type ,value)
          %vk:object-handle (vk:object-handle ,value)
          %vk:p-object-name (vk:object-name ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-utils-object-tag-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:object-type
        %vk:object-handle
        %vk:tag-name
        %vk:tag-size
        %vk:p-tag)
       ,ptr
       (:struct %vk:debug-utils-object-tag-info-ext))
    (setf %vk:s-type :debug-utils-object-tag-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:object-type (vk:object-type ,value)
          %vk:object-handle (vk:object-handle ,value)
          %vk:tag-name (vk:tag-name ,value)
          %vk:tag-size (vk:tag-size ,value)
          %vk:p-tag (if (vk:tag ,value) (vk:tag ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-utils-label-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-label-name
        %vk:color)
       ,ptr
       (:struct %vk:debug-utils-label-ext))
    (setf %vk:s-type :debug-utils-label-ext
          %vk:p-next (cffi:null-pointer)
          %vk:p-label-name (vk:label-name ,value))
    (cffi:lisp-array-to-foreign (vk:color ,value) %vk:color '(:array :float 4))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-utils-messenger-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:message-severity
        %vk:message-type
        %vk:pfn-user-callback
        %vk:p-user-data)
       ,ptr
       (:struct %vk:debug-utils-messenger-create-info-ext))
    (setf %vk:s-type :debug-utils-messenger-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:message-severity (vk:message-severity ,value)
          %vk:message-type (vk:message-type ,value)
          %vk:pfn-user-callback (vk:pfn-user-callback ,value)
          %vk:p-user-data (if (vk:user-data ,value) (vk:user-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-debug-utils-messenger-callback-data-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-message-id-name
        %vk:message-id-number
        %vk:p-message
        %vk:queue-label-count
        %vk:p-queue-labels
        %vk:cmd-buf-label-count
        %vk:p-cmd-buf-labels
        %vk:object-count
        %vk:p-objects)
       ,ptr
       (:struct %vk:debug-utils-messenger-callback-data-ext))
    (setf %vk:s-type :debug-utils-messenger-callback-data-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:p-message-id-name (vk:message-id-name ,value)
          %vk:message-id-number (vk:message-id-number ,value)
          %vk:p-message (vk:message ,value)
          %vk:queue-label-count (length (vk:queue-labels ,value))
          %vk:p-queue-labels (vk-alloc:foreign-allocate-and-fill '(:struct %vk:debug-utils-label-ext) (vk:queue-labels ,value) ,ptr)
          %vk:cmd-buf-label-count (length (vk:cmd-buf-labels ,value))
          %vk:p-cmd-buf-labels (vk-alloc:foreign-allocate-and-fill '(:struct %vk:debug-utils-label-ext) (vk:cmd-buf-labels ,value) ,ptr)
          %vk:object-count (length (vk:objects ,value))
          %vk:p-objects (vk-alloc:foreign-allocate-and-fill '(:struct %vk:debug-utils-object-name-info-ext) (vk:objects ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-device-memory-report-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-memory-report)
       ,ptr
       (:struct %vk:physical-device-device-memory-report-features-ext))
    (setf %vk:s-type :physical-device-device-memory-report-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-memory-report (vk:device-memory-report ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-device-memory-report-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:pfn-user-callback
        %vk:p-user-data)
       ,ptr
       (:struct %vk:device-device-memory-report-create-info-ext))
    (setf %vk:s-type :device-device-memory-report-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:pfn-user-callback (vk:pfn-user-callback ,value)
          %vk:p-user-data (if (vk:user-data ,value) (vk:user-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-memory-report-callback-data-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:type
        %vk:memory-object-id
        %vk:size
        %vk:object-type
        %vk:object-handle
        %vk:heap-index)
       ,ptr
       (:struct %vk:device-memory-report-callback-data-ext))
    (setf %vk:s-type :device-memory-report-callback-data-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:type (vk:type ,value)
          %vk:memory-object-id (vk:memory-object-id ,value)
          %vk:size (vk:size ,value)
          %vk:object-type (vk:object-type ,value)
          %vk:object-handle (vk:object-handle ,value)
          %vk:heap-index (vk:heap-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-memory-host-pointer-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:handle-type
        %vk:p-host-pointer)
       ,ptr
       (:struct %vk:import-memory-host-pointer-info-ext))
    (setf %vk:s-type :import-memory-host-pointer-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:handle-type (vk:handle-type ,value)
          %vk:p-host-pointer (if (vk:host-pointer ,value) (vk:host-pointer ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-host-pointer-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:memory-host-pointer-properties-ext))
    (setf %vk:s-type :memory-host-pointer-properties-ext
          %vk:p-next (cffi:null-pointer)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-external-memory-host-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-imported-host-pointer-alignment)
       ,ptr
       (:struct %vk:physical-device-external-memory-host-properties-ext))
    (setf %vk:s-type :physical-device-external-memory-host-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:min-imported-host-pointer-alignment (vk:min-imported-host-pointer-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-conservative-rasterization-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:primitive-overestimation-size
        %vk:max-extra-primitive-overestimation-size
        %vk:extra-primitive-overestimation-size-granularity
        %vk:primitive-underestimation
        %vk:conservative-point-and-line-rasterization
        %vk:degenerate-triangles-rasterized
        %vk:degenerate-lines-rasterized
        %vk:fully-covered-fragment-shader-input-variable
        %vk:conservative-rasterization-post-depth-coverage)
       ,ptr
       (:struct %vk:physical-device-conservative-rasterization-properties-ext))
    (setf %vk:s-type :physical-device-conservative-rasterization-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:primitive-overestimation-size (vk:primitive-overestimation-size ,value)
          %vk:max-extra-primitive-overestimation-size (vk:max-extra-primitive-overestimation-size ,value)
          %vk:extra-primitive-overestimation-size-granularity (vk:extra-primitive-overestimation-size-granularity ,value)
          %vk:primitive-underestimation (vk:primitive-underestimation ,value)
          %vk:conservative-point-and-line-rasterization (vk:conservative-point-and-line-rasterization ,value)
          %vk:degenerate-triangles-rasterized (vk:degenerate-triangles-rasterized ,value)
          %vk:degenerate-lines-rasterized (vk:degenerate-lines-rasterized ,value)
          %vk:fully-covered-fragment-shader-input-variable (vk:fully-covered-fragment-shader-input-variable ,value)
          %vk:conservative-rasterization-post-depth-coverage (vk:conservative-rasterization-post-depth-coverage ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-calibrated-timestamp-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:time-domain)
       ,ptr
       (:struct %vk:calibrated-timestamp-info-ext))
    (setf %vk:s-type :calibrated-timestamp-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:time-domain (vk:time-domain ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-core-properties-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-engine-count
        %vk:shader-arrays-per-engine-count
        %vk:compute-units-per-shader-array
        %vk:simd-per-compute-unit
        %vk:wavefronts-per-simd
        %vk:wavefront-size
        %vk:sgprs-per-simd
        %vk:min-sgpr-allocation
        %vk:max-sgpr-allocation
        %vk:sgpr-allocation-granularity
        %vk:vgprs-per-simd
        %vk:min-vgpr-allocation
        %vk:max-vgpr-allocation
        %vk:vgpr-allocation-granularity)
       ,ptr
       (:struct %vk:physical-device-shader-core-properties-amd))
    (setf %vk:s-type :physical-device-shader-core-properties-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-engine-count (vk:shader-engine-count ,value)
          %vk:shader-arrays-per-engine-count (vk:shader-arrays-per-engine-count ,value)
          %vk:compute-units-per-shader-array (vk:compute-units-per-shader-array ,value)
          %vk:simd-per-compute-unit (vk:simd-per-compute-unit ,value)
          %vk:wavefronts-per-simd (vk:wavefronts-per-simd ,value)
          %vk:wavefront-size (vk:wavefront-size ,value)
          %vk:sgprs-per-simd (vk:sgprs-per-simd ,value)
          %vk:min-sgpr-allocation (vk:min-sgpr-allocation ,value)
          %vk:max-sgpr-allocation (vk:max-sgpr-allocation ,value)
          %vk:sgpr-allocation-granularity (vk:sgpr-allocation-granularity ,value)
          %vk:vgprs-per-simd (vk:vgprs-per-simd ,value)
          %vk:min-vgpr-allocation (vk:min-vgpr-allocation ,value)
          %vk:max-vgpr-allocation (vk:max-vgpr-allocation ,value)
          %vk:vgpr-allocation-granularity (vk:vgpr-allocation-granularity ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-core-properties-2-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-core-features
        %vk:active-compute-unit-count)
       ,ptr
       (:struct %vk:physical-device-shader-core-properties-2-amd))
    (setf %vk:s-type :physical-device-shader-core-properties-2-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-core-features (vk:shader-core-features ,value)
          %vk:active-compute-unit-count (vk:active-compute-unit-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-conservative-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:conservative-rasterization-mode
        %vk:extra-primitive-overestimation-size)
       ,ptr
       (:struct %vk:pipeline-rasterization-conservative-state-create-info-ext))
    (setf %vk:s-type :pipeline-rasterization-conservative-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:conservative-rasterization-mode (vk:conservative-rasterization-mode ,value)
          %vk:extra-primitive-overestimation-size (vk:extra-primitive-overestimation-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-descriptor-indexing-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-input-attachment-array-dynamic-indexing
        %vk:shader-uniform-texel-buffer-array-dynamic-indexing
        %vk:shader-storage-texel-buffer-array-dynamic-indexing
        %vk:shader-uniform-buffer-array-non-uniform-indexing
        %vk:shader-sampled-image-array-non-uniform-indexing
        %vk:shader-storage-buffer-array-non-uniform-indexing
        %vk:shader-storage-image-array-non-uniform-indexing
        %vk:shader-input-attachment-array-non-uniform-indexing
        %vk:shader-uniform-texel-buffer-array-non-uniform-indexing
        %vk:shader-storage-texel-buffer-array-non-uniform-indexing
        %vk:descriptor-binding-uniform-buffer-update-after-bind
        %vk:descriptor-binding-sampled-image-update-after-bind
        %vk:descriptor-binding-storage-image-update-after-bind
        %vk:descriptor-binding-storage-buffer-update-after-bind
        %vk:descriptor-binding-uniform-texel-buffer-update-after-bind
        %vk:descriptor-binding-storage-texel-buffer-update-after-bind
        %vk:descriptor-binding-update-unused-while-pending
        %vk:descriptor-binding-partially-bound
        %vk:descriptor-binding-variable-descriptor-count
        %vk:runtime-descriptor-array)
       ,ptr
       (:struct %vk:physical-device-descriptor-indexing-features))
    (setf %vk:s-type :physical-device-descriptor-indexing-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-input-attachment-array-dynamic-indexing (vk:shader-input-attachment-array-dynamic-indexing ,value)
          %vk:shader-uniform-texel-buffer-array-dynamic-indexing (vk:shader-uniform-texel-buffer-array-dynamic-indexing ,value)
          %vk:shader-storage-texel-buffer-array-dynamic-indexing (vk:shader-storage-texel-buffer-array-dynamic-indexing ,value)
          %vk:shader-uniform-buffer-array-non-uniform-indexing (vk:shader-uniform-buffer-array-non-uniform-indexing ,value)
          %vk:shader-sampled-image-array-non-uniform-indexing (vk:shader-sampled-image-array-non-uniform-indexing ,value)
          %vk:shader-storage-buffer-array-non-uniform-indexing (vk:shader-storage-buffer-array-non-uniform-indexing ,value)
          %vk:shader-storage-image-array-non-uniform-indexing (vk:shader-storage-image-array-non-uniform-indexing ,value)
          %vk:shader-input-attachment-array-non-uniform-indexing (vk:shader-input-attachment-array-non-uniform-indexing ,value)
          %vk:shader-uniform-texel-buffer-array-non-uniform-indexing (vk:shader-uniform-texel-buffer-array-non-uniform-indexing ,value)
          %vk:shader-storage-texel-buffer-array-non-uniform-indexing (vk:shader-storage-texel-buffer-array-non-uniform-indexing ,value)
          %vk:descriptor-binding-uniform-buffer-update-after-bind (vk:descriptor-binding-uniform-buffer-update-after-bind ,value)
          %vk:descriptor-binding-sampled-image-update-after-bind (vk:descriptor-binding-sampled-image-update-after-bind ,value)
          %vk:descriptor-binding-storage-image-update-after-bind (vk:descriptor-binding-storage-image-update-after-bind ,value)
          %vk:descriptor-binding-storage-buffer-update-after-bind (vk:descriptor-binding-storage-buffer-update-after-bind ,value)
          %vk:descriptor-binding-uniform-texel-buffer-update-after-bind (vk:descriptor-binding-uniform-texel-buffer-update-after-bind ,value)
          %vk:descriptor-binding-storage-texel-buffer-update-after-bind (vk:descriptor-binding-storage-texel-buffer-update-after-bind ,value)
          %vk:descriptor-binding-update-unused-while-pending (vk:descriptor-binding-update-unused-while-pending ,value)
          %vk:descriptor-binding-partially-bound (vk:descriptor-binding-partially-bound ,value)
          %vk:descriptor-binding-variable-descriptor-count (vk:descriptor-binding-variable-descriptor-count ,value)
          %vk:runtime-descriptor-array (vk:runtime-descriptor-array ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-descriptor-indexing-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-update-after-bind-descriptors-in-all-pools
        %vk:shader-uniform-buffer-array-non-uniform-indexing-native
        %vk:shader-sampled-image-array-non-uniform-indexing-native
        %vk:shader-storage-buffer-array-non-uniform-indexing-native
        %vk:shader-storage-image-array-non-uniform-indexing-native
        %vk:shader-input-attachment-array-non-uniform-indexing-native
        %vk:robust-buffer-access-update-after-bind
        %vk:quad-divergent-implicit-lod
        %vk:max-per-stage-descriptor-update-after-bind-samplers
        %vk:max-per-stage-descriptor-update-after-bind-uniform-buffers
        %vk:max-per-stage-descriptor-update-after-bind-storage-buffers
        %vk:max-per-stage-descriptor-update-after-bind-sampled-images
        %vk:max-per-stage-descriptor-update-after-bind-storage-images
        %vk:max-per-stage-descriptor-update-after-bind-input-attachments
        %vk:max-per-stage-update-after-bind-resources
        %vk:max-descriptor-set-update-after-bind-samplers
        %vk:max-descriptor-set-update-after-bind-uniform-buffers
        %vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic
        %vk:max-descriptor-set-update-after-bind-storage-buffers
        %vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic
        %vk:max-descriptor-set-update-after-bind-sampled-images
        %vk:max-descriptor-set-update-after-bind-storage-images
        %vk:max-descriptor-set-update-after-bind-input-attachments)
       ,ptr
       (:struct %vk:physical-device-descriptor-indexing-properties))
    (setf %vk:s-type :physical-device-descriptor-indexing-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-update-after-bind-descriptors-in-all-pools (vk:max-update-after-bind-descriptors-in-all-pools ,value)
          %vk:shader-uniform-buffer-array-non-uniform-indexing-native (vk:shader-uniform-buffer-array-non-uniform-indexing-native ,value)
          %vk:shader-sampled-image-array-non-uniform-indexing-native (vk:shader-sampled-image-array-non-uniform-indexing-native ,value)
          %vk:shader-storage-buffer-array-non-uniform-indexing-native (vk:shader-storage-buffer-array-non-uniform-indexing-native ,value)
          %vk:shader-storage-image-array-non-uniform-indexing-native (vk:shader-storage-image-array-non-uniform-indexing-native ,value)
          %vk:shader-input-attachment-array-non-uniform-indexing-native (vk:shader-input-attachment-array-non-uniform-indexing-native ,value)
          %vk:robust-buffer-access-update-after-bind (vk:robust-buffer-access-update-after-bind ,value)
          %vk:quad-divergent-implicit-lod (vk:quad-divergent-implicit-lod ,value)
          %vk:max-per-stage-descriptor-update-after-bind-samplers (vk:max-per-stage-descriptor-update-after-bind-samplers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-uniform-buffers (vk:max-per-stage-descriptor-update-after-bind-uniform-buffers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-storage-buffers (vk:max-per-stage-descriptor-update-after-bind-storage-buffers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-sampled-images (vk:max-per-stage-descriptor-update-after-bind-sampled-images ,value)
          %vk:max-per-stage-descriptor-update-after-bind-storage-images (vk:max-per-stage-descriptor-update-after-bind-storage-images ,value)
          %vk:max-per-stage-descriptor-update-after-bind-input-attachments (vk:max-per-stage-descriptor-update-after-bind-input-attachments ,value)
          %vk:max-per-stage-update-after-bind-resources (vk:max-per-stage-update-after-bind-resources ,value)
          %vk:max-descriptor-set-update-after-bind-samplers (vk:max-descriptor-set-update-after-bind-samplers ,value)
          %vk:max-descriptor-set-update-after-bind-uniform-buffers (vk:max-descriptor-set-update-after-bind-uniform-buffers ,value)
          %vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic (vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic ,value)
          %vk:max-descriptor-set-update-after-bind-storage-buffers (vk:max-descriptor-set-update-after-bind-storage-buffers ,value)
          %vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic (vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic ,value)
          %vk:max-descriptor-set-update-after-bind-sampled-images (vk:max-descriptor-set-update-after-bind-sampled-images ,value)
          %vk:max-descriptor-set-update-after-bind-storage-images (vk:max-descriptor-set-update-after-bind-storage-images ,value)
          %vk:max-descriptor-set-update-after-bind-input-attachments (vk:max-descriptor-set-update-after-bind-input-attachments ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-layout-binding-flags-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:binding-count
        %vk:p-binding-flags)
       ,ptr
       (:struct %vk:descriptor-set-layout-binding-flags-create-info))
    (setf %vk:s-type :descriptor-set-layout-binding-flags-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:binding-count (length (vk:binding-flags ,value))
          %vk:p-binding-flags (vk-alloc:foreign-allocate-and-fill '%vk:descriptor-binding-flags (vk:binding-flags ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-variable-descriptor-count-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:descriptor-set-count
        %vk:p-descriptor-counts)
       ,ptr
       (:struct %vk:descriptor-set-variable-descriptor-count-allocate-info))
    (setf %vk:s-type :descriptor-set-variable-descriptor-count-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:descriptor-set-count (length (vk:descriptor-counts ,value))
          %vk:p-descriptor-counts (vk-alloc:foreign-allocate-and-fill :uint32 (vk:descriptor-counts ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-descriptor-set-variable-descriptor-count-layout-support) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-variable-descriptor-count)
       ,ptr
       (:struct %vk:descriptor-set-variable-descriptor-count-layout-support))
    (setf %vk:s-type :descriptor-set-variable-descriptor-count-layout-support
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-variable-descriptor-count (vk:max-variable-descriptor-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-description-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:format
        %vk:samples
        %vk:load-op
        %vk:store-op
        %vk:stencil-load-op
        %vk:stencil-store-op
        %vk:initial-layout
        %vk:final-layout)
       ,ptr
       (:struct %vk:attachment-description-2))
    (setf %vk:s-type :attachment-description-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:format (vk:format ,value)
          %vk:samples (vk:samples ,value)
          %vk:load-op (vk:load-op ,value)
          %vk:store-op (vk:store-op ,value)
          %vk:stencil-load-op (vk:stencil-load-op ,value)
          %vk:stencil-store-op (vk:stencil-store-op ,value)
          %vk:initial-layout (vk:initial-layout ,value)
          %vk:final-layout (vk:final-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-reference-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:attachment
        %vk:layout
        %vk:aspect-mask)
       ,ptr
       (:struct %vk:attachment-reference-2))
    (setf %vk:s-type :attachment-reference-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:attachment (vk:attachment ,value)
          %vk:layout (vk:layout ,value)
          %vk:aspect-mask (vk:aspect-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-description-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:pipeline-bind-point
        %vk:view-mask
        %vk:input-attachment-count
        %vk:p-input-attachments
        %vk:color-attachment-count
        %vk:p-color-attachments
        %vk:p-resolve-attachments
        %vk:p-depth-stencil-attachment
        %vk:preserve-attachment-count
        %vk:p-preserve-attachments)
       ,ptr
       (:struct %vk:subpass-description-2))
    (setf %vk:s-type :subpass-description-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:pipeline-bind-point (vk:pipeline-bind-point ,value)
          %vk:view-mask (vk:view-mask ,value)
          %vk:input-attachment-count (length (vk:input-attachments ,value))
          %vk:p-input-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:input-attachments ,value) ,ptr)
          %vk:color-attachment-count (reduce #'max (list (length (vk:color-attachments ,value))(length (vk:resolve-attachments ,value))))
          %vk:p-color-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:color-attachments ,value) ,ptr)
          %vk:p-resolve-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:resolve-attachments ,value) ,ptr)
          %vk:p-depth-stencil-attachment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:depth-stencil-attachment ,value) ,ptr)
          %vk:preserve-attachment-count (length (vk:preserve-attachments ,value))
          %vk:p-preserve-attachments (vk-alloc:foreign-allocate-and-fill :uint32 (vk:preserve-attachments ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-dependency-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-subpass
        %vk:dst-subpass
        %vk:src-stage-mask
        %vk:dst-stage-mask
        %vk:src-access-mask
        %vk:dst-access-mask
        %vk:dependency-flags
        %vk:view-offset)
       ,ptr
       (:struct %vk:subpass-dependency-2))
    (setf %vk:s-type :subpass-dependency-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-subpass (vk:src-subpass ,value)
          %vk:dst-subpass (vk:dst-subpass ,value)
          %vk:src-stage-mask (vk:src-stage-mask ,value)
          %vk:dst-stage-mask (vk:dst-stage-mask ,value)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:dependency-flags (vk:dependency-flags ,value)
          %vk:view-offset (vk:view-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-create-info-2) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:attachment-count
        %vk:p-attachments
        %vk:subpass-count
        %vk:p-subpasses
        %vk:dependency-count
        %vk:p-dependencies
        %vk:correlated-view-mask-count
        %vk:p-correlated-view-masks)
       ,ptr
       (:struct %vk:render-pass-create-info-2))
    (setf %vk:s-type :render-pass-create-info-2
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:attachment-count (length (vk:attachments ,value))
          %vk:p-attachments (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-description-2) (vk:attachments ,value) ,ptr)
          %vk:subpass-count (length (vk:subpasses ,value))
          %vk:p-subpasses (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subpass-description-2) (vk:subpasses ,value) ,ptr)
          %vk:dependency-count (length (vk:dependencies ,value))
          %vk:p-dependencies (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subpass-dependency-2) (vk:dependencies ,value) ,ptr)
          %vk:correlated-view-mask-count (length (vk:correlated-view-masks ,value))
          %vk:p-correlated-view-masks (vk-alloc:foreign-allocate-and-fill :uint32 (vk:correlated-view-masks ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:contents)
       ,ptr
       (:struct %vk:subpass-begin-info))
    (setf %vk:s-type :subpass-begin-info
          %vk:p-next (cffi:null-pointer)
          %vk:contents (vk:contents ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-end-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next)
       ,ptr
       (:struct %vk:subpass-end-info))
    (setf %vk:s-type :subpass-end-info
          %vk:p-next (cffi:null-pointer))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-timeline-semaphore-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:timeline-semaphore)
       ,ptr
       (:struct %vk:physical-device-timeline-semaphore-features))
    (setf %vk:s-type :physical-device-timeline-semaphore-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:timeline-semaphore (vk:timeline-semaphore ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-timeline-semaphore-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-timeline-semaphore-value-difference)
       ,ptr
       (:struct %vk:physical-device-timeline-semaphore-properties))
    (setf %vk:s-type :physical-device-timeline-semaphore-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-timeline-semaphore-value-difference (vk:max-timeline-semaphore-value-difference ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-type-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore-type
        %vk:initial-value)
       ,ptr
       (:struct %vk:semaphore-type-create-info))
    (setf %vk:s-type :semaphore-type-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:semaphore-type (vk:semaphore-type ,value)
          %vk:initial-value (vk:initial-value ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-timeline-semaphore-submit-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:wait-semaphore-value-count
        %vk:p-wait-semaphore-values
        %vk:signal-semaphore-value-count
        %vk:p-signal-semaphore-values)
       ,ptr
       (:struct %vk:timeline-semaphore-submit-info))
    (setf %vk:s-type :timeline-semaphore-submit-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:wait-semaphore-value-count (length (vk:wait-semaphore-values ,value))
          %vk:p-wait-semaphore-values (vk-alloc:foreign-allocate-and-fill :uint64 (vk:wait-semaphore-values ,value) ,ptr)
          %vk:signal-semaphore-value-count (length (vk:signal-semaphore-values ,value))
          %vk:p-signal-semaphore-values (vk-alloc:foreign-allocate-and-fill :uint64 (vk:signal-semaphore-values ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-wait-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:semaphore-count
        %vk:p-semaphores
        %vk:p-values)
       ,ptr
       (:struct %vk:semaphore-wait-info))
    (setf %vk:s-type :semaphore-wait-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:semaphore-count (reduce #'max (list (length (vk:semaphores ,value))(length (vk:values ,value))))
          %vk:p-semaphores (vk-alloc:foreign-allocate-and-fill '%vk:semaphore (vk:semaphores ,value) ,ptr)
          %vk:p-values (vk-alloc:foreign-allocate-and-fill :uint64 (vk:values ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-signal-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:value)
       ,ptr
       (:struct %vk:semaphore-signal-info))
    (setf %vk:s-type :semaphore-signal-info
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:value (vk:value ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vertex-input-binding-divisor-description-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:binding
        %vk:divisor)
       ,ptr
       (:struct %vk:vertex-input-binding-divisor-description-ext))
    (setf %vk:binding (vk:binding ,value)
          %vk:divisor (vk:divisor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-vertex-input-divisor-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vertex-binding-divisor-count
        %vk:p-vertex-binding-divisors)
       ,ptr
       (:struct %vk:pipeline-vertex-input-divisor-state-create-info-ext))
    (setf %vk:s-type :pipeline-vertex-input-divisor-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:vertex-binding-divisor-count (length (vk:vertex-binding-divisors ,value))
          %vk:p-vertex-binding-divisors (vk-alloc:foreign-allocate-and-fill '(:struct %vk:vertex-input-binding-divisor-description-ext) (vk:vertex-binding-divisors ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vertex-attribute-divisor-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-vertex-attrib-divisor)
       ,ptr
       (:struct %vk:physical-device-vertex-attribute-divisor-properties-ext))
    (setf %vk:s-type :physical-device-vertex-attribute-divisor-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-vertex-attrib-divisor (vk:max-vertex-attrib-divisor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-p-c-i-bus-info-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pci-domain
        %vk:pci-bus
        %vk:pci-device
        %vk:pci-function)
       ,ptr
       (:struct %vk:physical-device-p-c-i-bus-info-properties-ext))
    (setf %vk:s-type :physical-device-pci-bus-info-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:pci-domain (vk:pci-domain ,value)
          %vk:pci-bus (vk:pci-bus ,value)
          %vk:pci-device (vk:pci-device ,value)
          %vk:pci-function (vk:pci-function ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-import-android-hardware-buffer-info-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer)
       ,ptr
       (:struct %vk:import-android-hardware-buffer-info-android))
    (setf %vk:s-type :import-android-hardware-buffer-info-android
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:buffer (vk:buffer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-android-hardware-buffer-usage-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:android-hardware-buffer-usage)
       ,ptr
       (:struct %vk:android-hardware-buffer-usage-android))
    (setf %vk:s-type :android-hardware-buffer-usage-android
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:android-hardware-buffer-usage (vk:android-hardware-buffer-usage ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-android-hardware-buffer-properties-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:allocation-size
        %vk:memory-type-bits)
       ,ptr
       (:struct %vk:android-hardware-buffer-properties-android))
    (setf %vk:s-type :android-hardware-buffer-properties-android
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:allocation-size (vk:allocation-size ,value)
          %vk:memory-type-bits (vk:memory-type-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-get-android-hardware-buffer-info-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory)
       ,ptr
       (:struct %vk:memory-get-android-hardware-buffer-info-android))
    (setf %vk:s-type :memory-get-android-hardware-buffer-info-android
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-android-hardware-buffer-format-properties-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format
        %vk:external-format
        %vk:format-features
        %vk:sampler-ycbcr-conversion-components
        %vk:suggested-ycbcr-model
        %vk:suggested-ycbcr-range
        %vk:suggested-x-chroma-offset
        %vk:suggested-y-chroma-offset)
       ,ptr
       (:struct %vk:android-hardware-buffer-format-properties-android))
    (setf %vk:s-type :android-hardware-buffer-format-properties-android
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:format (vk:format ,value)
          %vk:external-format (vk:external-format ,value)
          %vk:format-features (vk:format-features ,value)
          %vk:sampler-ycbcr-conversion-components (vk-alloc:foreign-allocate-and-fill '(:struct %vk:component-mapping) (vk:sampler-ycbcr-conversion-components ,value) ,ptr)
          %vk:suggested-ycbcr-model (vk:suggested-ycbcr-model ,value)
          %vk:suggested-ycbcr-range (vk:suggested-ycbcr-range ,value)
          %vk:suggested-x-chroma-offset (vk:suggested-x-chroma-offset ,value)
          %vk:suggested-y-chroma-offset (vk:suggested-y-chroma-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-inheritance-conditional-rendering-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:conditional-rendering-enable)
       ,ptr
       (:struct %vk:command-buffer-inheritance-conditional-rendering-info-ext))
    (setf %vk:s-type :command-buffer-inheritance-conditional-rendering-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:conditional-rendering-enable (vk:conditional-rendering-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-external-format-android) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:external-format)
       ,ptr
       (:struct %vk:external-format-android))
    (setf %vk:s-type :external-format-android
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:external-format (vk:external-format ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-8-bit-storage-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:storage-buffer-8-bit-access
        %vk:uniform-and-storage-buffer-8-bit-access
        %vk:storage-push-constant-8)
       ,ptr
       (:struct %vk:physical-device-8-bit-storage-features))
    (setf %vk:s-type :physical-device-8bit-storage-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:storage-buffer-8-bit-access (vk:storage-buffer-8-bit-access ,value)
          %vk:uniform-and-storage-buffer-8-bit-access (vk:uniform-and-storage-buffer-8-bit-access ,value)
          %vk:storage-push-constant-8 (vk:storage-push-constant-8 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-conditional-rendering-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:conditional-rendering
        %vk:inherited-conditional-rendering)
       ,ptr
       (:struct %vk:physical-device-conditional-rendering-features-ext))
    (setf %vk:s-type :physical-device-conditional-rendering-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:conditional-rendering (vk:conditional-rendering ,value)
          %vk:inherited-conditional-rendering (vk:inherited-conditional-rendering ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vulkan-memory-model-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vulkan-memory-model
        %vk:vulkan-memory-model-device-scope
        %vk:vulkan-memory-model-availability-visibility-chains)
       ,ptr
       (:struct %vk:physical-device-vulkan-memory-model-features))
    (setf %vk:s-type :physical-device-vulkan-memory-model-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:vulkan-memory-model (vk:vulkan-memory-model ,value)
          %vk:vulkan-memory-model-device-scope (vk:vulkan-memory-model-device-scope ,value)
          %vk:vulkan-memory-model-availability-visibility-chains (vk:vulkan-memory-model-availability-visibility-chains ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-atomic-int-64-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-buffer-int-64-atomics
        %vk:shader-shared-int-64-atomics)
       ,ptr
       (:struct %vk:physical-device-shader-atomic-int-64-features))
    (setf %vk:s-type :physical-device-shader-atomic-int64-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-buffer-int-64-atomics (vk:shader-buffer-int-64-atomics ,value)
          %vk:shader-shared-int-64-atomics (vk:shader-shared-int-64-atomics ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-atomic-float-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-buffer-float-32-atomics
        %vk:shader-buffer-float-32-atomic-add
        %vk:shader-buffer-float-64-atomics
        %vk:shader-buffer-float-64-atomic-add
        %vk:shader-shared-float-32-atomics
        %vk:shader-shared-float-32-atomic-add
        %vk:shader-shared-float-64-atomics
        %vk:shader-shared-float-64-atomic-add
        %vk:shader-image-float-32-atomics
        %vk:shader-image-float-32-atomic-add
        %vk:sparse-image-float-32-atomics
        %vk:sparse-image-float-32-atomic-add)
       ,ptr
       (:struct %vk:physical-device-shader-atomic-float-features-ext))
    (setf %vk:s-type :physical-device-shader-atomic-float-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-buffer-float-32-atomics (vk:shader-buffer-float-32-atomics ,value)
          %vk:shader-buffer-float-32-atomic-add (vk:shader-buffer-float-32-atomic-add ,value)
          %vk:shader-buffer-float-64-atomics (vk:shader-buffer-float-64-atomics ,value)
          %vk:shader-buffer-float-64-atomic-add (vk:shader-buffer-float-64-atomic-add ,value)
          %vk:shader-shared-float-32-atomics (vk:shader-shared-float-32-atomics ,value)
          %vk:shader-shared-float-32-atomic-add (vk:shader-shared-float-32-atomic-add ,value)
          %vk:shader-shared-float-64-atomics (vk:shader-shared-float-64-atomics ,value)
          %vk:shader-shared-float-64-atomic-add (vk:shader-shared-float-64-atomic-add ,value)
          %vk:shader-image-float-32-atomics (vk:shader-image-float-32-atomics ,value)
          %vk:shader-image-float-32-atomic-add (vk:shader-image-float-32-atomic-add ,value)
          %vk:sparse-image-float-32-atomics (vk:sparse-image-float-32-atomics ,value)
          %vk:sparse-image-float-32-atomic-add (vk:sparse-image-float-32-atomic-add ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vertex-attribute-divisor-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vertex-attribute-instance-rate-divisor
        %vk:vertex-attribute-instance-rate-zero-divisor)
       ,ptr
       (:struct %vk:physical-device-vertex-attribute-divisor-features-ext))
    (setf %vk:s-type :physical-device-vertex-attribute-divisor-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:vertex-attribute-instance-rate-divisor (vk:vertex-attribute-instance-rate-divisor ,value)
          %vk:vertex-attribute-instance-rate-zero-divisor (vk:vertex-attribute-instance-rate-zero-divisor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-queue-family-checkpoint-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:checkpoint-execution-stage-mask)
       ,ptr
       (:struct %vk:queue-family-checkpoint-properties-nv))
    (setf %vk:s-type :queue-family-checkpoint-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:checkpoint-execution-stage-mask (vk:checkpoint-execution-stage-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-checkpoint-data-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stage
        %vk:p-checkpoint-marker)
       ,ptr
       (:struct %vk:checkpoint-data-nv))
    (setf %vk:s-type :checkpoint-data-nv
          %vk:p-next (cffi:null-pointer)
          %vk:stage (vk:stage ,value)
          %vk:p-checkpoint-marker (if (vk:checkpoint-marker ,value) (vk:checkpoint-marker ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-depth-stencil-resolve-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:supported-depth-resolve-modes
        %vk:supported-stencil-resolve-modes
        %vk:independent-resolve-none
        %vk:independent-resolve)
       ,ptr
       (:struct %vk:physical-device-depth-stencil-resolve-properties))
    (setf %vk:s-type :physical-device-depth-stencil-resolve-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:supported-depth-resolve-modes (vk:supported-depth-resolve-modes ,value)
          %vk:supported-stencil-resolve-modes (vk:supported-stencil-resolve-modes ,value)
          %vk:independent-resolve-none (vk:independent-resolve-none ,value)
          %vk:independent-resolve (vk:independent-resolve ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-subpass-description-depth-stencil-resolve) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:depth-resolve-mode
        %vk:stencil-resolve-mode
        %vk:p-depth-stencil-resolve-attachment)
       ,ptr
       (:struct %vk:subpass-description-depth-stencil-resolve))
    (setf %vk:s-type :subpass-description-depth-stencil-resolve
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:depth-resolve-mode (vk:depth-resolve-mode ,value)
          %vk:stencil-resolve-mode (vk:stencil-resolve-mode ,value)
          %vk:p-depth-stencil-resolve-attachment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:depth-stencil-resolve-attachment ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-view-astc-decode-mode-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:decode-mode)
       ,ptr
       (:struct %vk:image-view-astc-decode-mode-ext))
    (setf %vk:s-type :image-view-astc-decode-mode-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:decode-mode (vk:decode-mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-astc-decode-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:decode-mode-shared-exponent)
       ,ptr
       (:struct %vk:physical-device-astc-decode-features-ext))
    (setf %vk:s-type :physical-device-astc-decode-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:decode-mode-shared-exponent (vk:decode-mode-shared-exponent ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-transform-feedback-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:transform-feedback
        %vk:geometry-streams)
       ,ptr
       (:struct %vk:physical-device-transform-feedback-features-ext))
    (setf %vk:s-type :physical-device-transform-feedback-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:transform-feedback (vk:transform-feedback ,value)
          %vk:geometry-streams (vk:geometry-streams ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-transform-feedback-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-transform-feedback-streams
        %vk:max-transform-feedback-buffers
        %vk:max-transform-feedback-buffer-size
        %vk:max-transform-feedback-stream-data-size
        %vk:max-transform-feedback-buffer-data-size
        %vk:max-transform-feedback-buffer-data-stride
        %vk:transform-feedback-queries
        %vk:transform-feedback-streams-lines-triangles
        %vk:transform-feedback-rasterization-stream-select
        %vk:transform-feedback-draw)
       ,ptr
       (:struct %vk:physical-device-transform-feedback-properties-ext))
    (setf %vk:s-type :physical-device-transform-feedback-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-transform-feedback-streams (vk:max-transform-feedback-streams ,value)
          %vk:max-transform-feedback-buffers (vk:max-transform-feedback-buffers ,value)
          %vk:max-transform-feedback-buffer-size (vk:max-transform-feedback-buffer-size ,value)
          %vk:max-transform-feedback-stream-data-size (vk:max-transform-feedback-stream-data-size ,value)
          %vk:max-transform-feedback-buffer-data-size (vk:max-transform-feedback-buffer-data-size ,value)
          %vk:max-transform-feedback-buffer-data-stride (vk:max-transform-feedback-buffer-data-stride ,value)
          %vk:transform-feedback-queries (vk:transform-feedback-queries ,value)
          %vk:transform-feedback-streams-lines-triangles (vk:transform-feedback-streams-lines-triangles ,value)
          %vk:transform-feedback-rasterization-stream-select (vk:transform-feedback-rasterization-stream-select ,value)
          %vk:transform-feedback-draw (vk:transform-feedback-draw ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-state-stream-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:rasterization-stream)
       ,ptr
       (:struct %vk:pipeline-rasterization-state-stream-create-info-ext))
    (setf %vk:s-type :pipeline-rasterization-state-stream-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:rasterization-stream (vk:rasterization-stream ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-representative-fragment-test-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:representative-fragment-test)
       ,ptr
       (:struct %vk:physical-device-representative-fragment-test-features-nv))
    (setf %vk:s-type :physical-device-representative-fragment-test-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:representative-fragment-test (vk:representative-fragment-test ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-representative-fragment-test-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:representative-fragment-test-enable)
       ,ptr
       (:struct %vk:pipeline-representative-fragment-test-state-create-info-nv))
    (setf %vk:s-type :pipeline-representative-fragment-test-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:representative-fragment-test-enable (vk:representative-fragment-test-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-exclusive-scissor-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:exclusive-scissor)
       ,ptr
       (:struct %vk:physical-device-exclusive-scissor-features-nv))
    (setf %vk:s-type :physical-device-exclusive-scissor-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:exclusive-scissor (vk:exclusive-scissor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-exclusive-scissor-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:exclusive-scissor-count
        %vk:p-exclusive-scissors)
       ,ptr
       (:struct %vk:pipeline-viewport-exclusive-scissor-state-create-info-nv))
    (setf %vk:s-type :pipeline-viewport-exclusive-scissor-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:exclusive-scissor-count (length (vk:exclusive-scissors ,value))
          %vk:p-exclusive-scissors (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:exclusive-scissors ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-corner-sampled-image-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:corner-sampled-image)
       ,ptr
       (:struct %vk:physical-device-corner-sampled-image-features-nv))
    (setf %vk:s-type :physical-device-corner-sampled-image-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:corner-sampled-image (vk:corner-sampled-image ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-compute-shader-derivatives-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:compute-derivative-group-quads
        %vk:compute-derivative-group-linear)
       ,ptr
       (:struct %vk:physical-device-compute-shader-derivatives-features-nv))
    (setf %vk:s-type :physical-device-compute-shader-derivatives-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:compute-derivative-group-quads (vk:compute-derivative-group-quads ,value)
          %vk:compute-derivative-group-linear (vk:compute-derivative-group-linear ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shader-barycentric-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-shader-barycentric)
       ,ptr
       (:struct %vk:physical-device-fragment-shader-barycentric-features-nv))
    (setf %vk:s-type :physical-device-fragment-shader-barycentric-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-shader-barycentric (vk:fragment-shader-barycentric ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-image-footprint-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image-footprint)
       ,ptr
       (:struct %vk:physical-device-shader-image-footprint-features-nv))
    (setf %vk:s-type :physical-device-shader-image-footprint-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image-footprint (vk:image-footprint ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-dedicated-allocation-image-aliasing-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:dedicated-allocation-image-aliasing)
       ,ptr
       (:struct %vk:physical-device-dedicated-allocation-image-aliasing-features-nv))
    (setf %vk:s-type :physical-device-dedicated-allocation-image-aliasing-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:dedicated-allocation-image-aliasing (vk:dedicated-allocation-image-aliasing ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-shading-rate-palette-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:shading-rate-palette-entry-count
        %vk:p-shading-rate-palette-entries)
       ,ptr
       (:struct %vk:shading-rate-palette-nv))
    (setf %vk:shading-rate-palette-entry-count (length (vk:shading-rate-palette-entries ,value))
          %vk:p-shading-rate-palette-entries (vk-alloc:foreign-allocate-and-fill '%vk:shading-rate-palette-entry-nv (vk:shading-rate-palette-entries ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-shading-rate-image-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shading-rate-image-enable
        %vk:viewport-count
        %vk:p-shading-rate-palettes)
       ,ptr
       (:struct %vk:pipeline-viewport-shading-rate-image-state-create-info-nv))
    (setf %vk:s-type :pipeline-viewport-shading-rate-image-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shading-rate-image-enable (vk:shading-rate-image-enable ,value)
          %vk:viewport-count (length (vk:shading-rate-palettes ,value))
          %vk:p-shading-rate-palettes (vk-alloc:foreign-allocate-and-fill '(:struct %vk:shading-rate-palette-nv) (vk:shading-rate-palettes ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shading-rate-image-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shading-rate-image
        %vk:shading-rate-coarse-sample-order)
       ,ptr
       (:struct %vk:physical-device-shading-rate-image-features-nv))
    (setf %vk:s-type :physical-device-shading-rate-image-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shading-rate-image (vk:shading-rate-image ,value)
          %vk:shading-rate-coarse-sample-order (vk:shading-rate-coarse-sample-order ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shading-rate-image-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shading-rate-texel-size
        %vk:shading-rate-palette-size
        %vk:shading-rate-max-coarse-samples)
       ,ptr
       (:struct %vk:physical-device-shading-rate-image-properties-nv))
    (setf %vk:s-type :physical-device-shading-rate-image-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shading-rate-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:shading-rate-texel-size ,value) ,ptr)
          %vk:shading-rate-palette-size (vk:shading-rate-palette-size ,value)
          %vk:shading-rate-max-coarse-samples (vk:shading-rate-max-coarse-samples ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-coarse-sample-location-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:pixel-x
        %vk:pixel-y
        %vk:sample)
       ,ptr
       (:struct %vk:coarse-sample-location-nv))
    (setf %vk:pixel-x (vk:pixel-x ,value)
          %vk:pixel-y (vk:pixel-y ,value)
          %vk:sample (vk:sample ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-coarse-sample-order-custom-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:shading-rate
        %vk:sample-count
        %vk:sample-location-count
        %vk:p-sample-locations)
       ,ptr
       (:struct %vk:coarse-sample-order-custom-nv))
    (setf %vk:shading-rate (vk:shading-rate ,value)
          %vk:sample-count (vk:sample-count ,value)
          %vk:sample-location-count (length (vk:sample-locations ,value))
          %vk:p-sample-locations (vk-alloc:foreign-allocate-and-fill '(:struct %vk:coarse-sample-location-nv) (vk:sample-locations ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-viewport-coarse-sample-order-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sample-order-type
        %vk:custom-sample-order-count
        %vk:p-custom-sample-orders)
       ,ptr
       (:struct %vk:pipeline-viewport-coarse-sample-order-state-create-info-nv))
    (setf %vk:s-type :pipeline-viewport-coarse-sample-order-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sample-order-type (vk:sample-order-type ,value)
          %vk:custom-sample-order-count (length (vk:custom-sample-orders ,value))
          %vk:p-custom-sample-orders (vk-alloc:foreign-allocate-and-fill '(:struct %vk:coarse-sample-order-custom-nv) (vk:custom-sample-orders ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-mesh-shader-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:task-shader
        %vk:mesh-shader)
       ,ptr
       (:struct %vk:physical-device-mesh-shader-features-nv))
    (setf %vk:s-type :physical-device-mesh-shader-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:task-shader (vk:task-shader ,value)
          %vk:mesh-shader (vk:mesh-shader ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-mesh-shader-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-draw-mesh-tasks-count
        %vk:max-task-work-group-invocations
        %vk:max-task-work-group-size
        %vk:max-task-total-memory-size
        %vk:max-task-output-count
        %vk:max-mesh-work-group-invocations
        %vk:max-mesh-work-group-size
        %vk:max-mesh-total-memory-size
        %vk:max-mesh-output-vertices
        %vk:max-mesh-output-primitives
        %vk:max-mesh-multiview-view-count
        %vk:mesh-output-per-vertex-granularity
        %vk:mesh-output-per-primitive-granularity)
       ,ptr
       (:struct %vk:physical-device-mesh-shader-properties-nv))
    (setf %vk:s-type :physical-device-mesh-shader-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-draw-mesh-tasks-count (vk:max-draw-mesh-tasks-count ,value)
          %vk:max-task-work-group-invocations (vk:max-task-work-group-invocations ,value)
          %vk:max-task-total-memory-size (vk:max-task-total-memory-size ,value)
          %vk:max-task-output-count (vk:max-task-output-count ,value)
          %vk:max-mesh-work-group-invocations (vk:max-mesh-work-group-invocations ,value)
          %vk:max-mesh-total-memory-size (vk:max-mesh-total-memory-size ,value)
          %vk:max-mesh-output-vertices (vk:max-mesh-output-vertices ,value)
          %vk:max-mesh-output-primitives (vk:max-mesh-output-primitives ,value)
          %vk:max-mesh-multiview-view-count (vk:max-mesh-multiview-view-count ,value)
          %vk:mesh-output-per-vertex-granularity (vk:mesh-output-per-vertex-granularity ,value)
          %vk:mesh-output-per-primitive-granularity (vk:mesh-output-per-primitive-granularity ,value))
    (cffi:lisp-array-to-foreign (vk:max-task-work-group-size ,value) %vk:max-task-work-group-size '(:array :uint32 3))
    (cffi:lisp-array-to-foreign (vk:max-mesh-work-group-size ,value) %vk:max-mesh-work-group-size '(:array :uint32 3))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-draw-mesh-tasks-indirect-command-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:task-count
        %vk:first-task)
       ,ptr
       (:struct %vk:draw-mesh-tasks-indirect-command-nv))
    (setf %vk:task-count (vk:task-count ,value)
          %vk:first-task (vk:first-task ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-ray-tracing-shader-group-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:general-shader
        %vk:closest-hit-shader
        %vk:any-hit-shader
        %vk:intersection-shader)
       ,ptr
       (:struct %vk:ray-tracing-shader-group-create-info-nv))
    (setf %vk:s-type :ray-tracing-shader-group-create-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:general-shader (vk:general-shader ,value)
          %vk:closest-hit-shader (vk:closest-hit-shader ,value)
          %vk:any-hit-shader (vk:any-hit-shader ,value)
          %vk:intersection-shader (vk:intersection-shader ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-ray-tracing-shader-group-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:general-shader
        %vk:closest-hit-shader
        %vk:any-hit-shader
        %vk:intersection-shader
        %vk:p-shader-group-capture-replay-handle)
       ,ptr
       (:struct %vk:ray-tracing-shader-group-create-info-khr))
    (setf %vk:s-type :ray-tracing-shader-group-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:general-shader (vk:general-shader ,value)
          %vk:closest-hit-shader (vk:closest-hit-shader ,value)
          %vk:any-hit-shader (vk:any-hit-shader ,value)
          %vk:intersection-shader (vk:intersection-shader ,value)
          %vk:p-shader-group-capture-replay-handle (if (vk:shader-group-capture-replay-handle ,value) (vk:shader-group-capture-replay-handle ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-ray-tracing-pipeline-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stage-count
        %vk:p-stages
        %vk:group-count
        %vk:p-groups
        %vk:max-recursion-depth
        %vk:layout
        %vk:base-pipeline-handle
        %vk:base-pipeline-index)
       ,ptr
       (:struct %vk:ray-tracing-pipeline-create-info-nv))
    (setf %vk:s-type :ray-tracing-pipeline-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:stage-count (length (vk:stages ,value))
          %vk:p-stages (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-shader-stage-create-info) (vk:stages ,value) ,ptr)
          %vk:group-count (length (vk:groups ,value))
          %vk:p-groups (vk-alloc:foreign-allocate-and-fill '(:struct %vk:ray-tracing-shader-group-create-info-nv) (vk:groups ,value) ,ptr)
          %vk:max-recursion-depth (vk:max-recursion-depth ,value)
          %vk:layout (if (vk:layout ,value) (vk:layout ,value) (cffi:null-pointer))
          %vk:base-pipeline-handle (if (vk:base-pipeline-handle ,value) (vk:base-pipeline-handle ,value) (cffi:null-pointer))
          %vk:base-pipeline-index (vk:base-pipeline-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-ray-tracing-pipeline-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:stage-count
        %vk:p-stages
        %vk:group-count
        %vk:p-groups
        %vk:max-pipeline-ray-recursion-depth
        %vk:p-library-info
        %vk:p-library-interface
        %vk:p-dynamic-state
        %vk:layout
        %vk:base-pipeline-handle
        %vk:base-pipeline-index)
       ,ptr
       (:struct %vk:ray-tracing-pipeline-create-info-khr))
    (setf %vk:s-type :ray-tracing-pipeline-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:stage-count (length (vk:stages ,value))
          %vk:p-stages (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-shader-stage-create-info) (vk:stages ,value) ,ptr)
          %vk:group-count (length (vk:groups ,value))
          %vk:p-groups (vk-alloc:foreign-allocate-and-fill '(:struct %vk:ray-tracing-shader-group-create-info-khr) (vk:groups ,value) ,ptr)
          %vk:max-pipeline-ray-recursion-depth (vk:max-pipeline-ray-recursion-depth ,value)
          %vk:p-library-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-library-create-info-khr) (vk:library-info ,value) ,ptr)
          %vk:p-library-interface (vk-alloc:foreign-allocate-and-fill '(:struct %vk:ray-tracing-pipeline-interface-create-info-khr) (vk:library-interface ,value) ,ptr)
          %vk:p-dynamic-state (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-dynamic-state-create-info) (vk:dynamic-state ,value) ,ptr)
          %vk:layout (if (vk:layout ,value) (vk:layout ,value) (cffi:null-pointer))
          %vk:base-pipeline-handle (if (vk:base-pipeline-handle ,value) (vk:base-pipeline-handle ,value) (cffi:null-pointer))
          %vk:base-pipeline-index (vk:base-pipeline-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-geometry-triangles-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vertex-data
        %vk:vertex-offset
        %vk:vertex-count
        %vk:vertex-stride
        %vk:vertex-format
        %vk:index-data
        %vk:index-offset
        %vk:index-count
        %vk:index-type
        %vk:transform-data
        %vk:transform-offset)
       ,ptr
       (:struct %vk:geometry-triangles-nv))
    (setf %vk:s-type :geometry-triangles-nv
          %vk:p-next (cffi:null-pointer)
          %vk:vertex-data (if (vk:vertex-data ,value) (vk:vertex-data ,value) (cffi:null-pointer))
          %vk:vertex-offset (vk:vertex-offset ,value)
          %vk:vertex-count (vk:vertex-count ,value)
          %vk:vertex-stride (vk:vertex-stride ,value)
          %vk:vertex-format (vk:vertex-format ,value)
          %vk:index-data (if (vk:index-data ,value) (vk:index-data ,value) (cffi:null-pointer))
          %vk:index-offset (vk:index-offset ,value)
          %vk:index-count (vk:index-count ,value)
          %vk:index-type (vk:index-type ,value)
          %vk:transform-data (if (vk:transform-data ,value) (vk:transform-data ,value) (cffi:null-pointer))
          %vk:transform-offset (vk:transform-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-geometry-aabb-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:aabb-data
        %vk:num-aabbs
        %vk:stride
        %vk:offset)
       ,ptr
       (:struct %vk:geometry-aabb-nv))
    (setf %vk:s-type :geometry-aabb-nv
          %vk:p-next (cffi:null-pointer)
          %vk:aabb-data (if (vk:aabb-data ,value) (vk:aabb-data ,value) (cffi:null-pointer))
          %vk:num-aabbs (vk:num-aabbs ,value)
          %vk:stride (vk:stride ,value)
          %vk:offset (vk:offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-geometry-data-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:triangles
        %vk:aabbs)
       ,ptr
       (:struct %vk:geometry-data-nv))
    (setf %vk:triangles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:geometry-triangles-nv) (vk:triangles ,value) ,ptr)
          %vk:aabbs (vk-alloc:foreign-allocate-and-fill '(:struct %vk:geometry-aabb-nv) (vk:aabbs ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-geometry-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:geometry-type
        %vk:geometry
        %vk:flags)
       ,ptr
       (:struct %vk:geometry-nv))
    (setf %vk:s-type :geometry-nv
          %vk:p-next (cffi:null-pointer)
          %vk:geometry-type (vk:geometry-type ,value)
          %vk:geometry (vk-alloc:foreign-allocate-and-fill '(:struct %vk:geometry-data-nv) (vk:geometry ,value) ,ptr)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:flags
        %vk:instance-count
        %vk:geometry-count
        %vk:p-geometries)
       ,ptr
       (:struct %vk:acceleration-structure-info-nv))
    (setf %vk:s-type :acceleration-structure-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:flags (vk:flags ,value)
          %vk:instance-count (vk:instance-count ,value)
          %vk:geometry-count (length (vk:geometries ,value))
          %vk:p-geometries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:geometry-nv) (vk:geometries ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:compacted-size
        %vk:info)
       ,ptr
       (:struct %vk:acceleration-structure-create-info-nv))
    (setf %vk:s-type :acceleration-structure-create-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:compacted-size (vk:compacted-size ,value)
          %vk:info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-info-nv) (vk:info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-bind-acceleration-structure-memory-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure
        %vk:memory
        %vk:memory-offset
        %vk:device-index-count
        %vk:p-device-indices)
       ,ptr
       (:struct %vk:bind-acceleration-structure-memory-info-nv))
    (setf %vk:s-type :bind-acceleration-structure-memory-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:acceleration-structure (if (vk:acceleration-structure ,value) (vk:acceleration-structure ,value) (cffi:null-pointer))
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value)
          %vk:device-index-count (length (vk:device-indices ,value))
          %vk:p-device-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:device-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-write-descriptor-set-acceleration-structure-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure-count
        %vk:p-acceleration-structures)
       ,ptr
       (:struct %vk:write-descriptor-set-acceleration-structure-khr))
    (setf %vk:s-type :write-descriptor-set-acceleration-structure-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:acceleration-structure-count (length (vk:acceleration-structures ,value))
          %vk:p-acceleration-structures (vk-alloc:foreign-allocate-and-fill '%vk:acceleration-structure-khr (vk:acceleration-structures ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-write-descriptor-set-acceleration-structure-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure-count
        %vk:p-acceleration-structures)
       ,ptr
       (:struct %vk:write-descriptor-set-acceleration-structure-nv))
    (setf %vk:s-type :write-descriptor-set-acceleration-structure-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:acceleration-structure-count (length (vk:acceleration-structures ,value))
          %vk:p-acceleration-structures (vk-alloc:foreign-allocate-and-fill '%vk:acceleration-structure-nv (vk:acceleration-structures ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-memory-requirements-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:acceleration-structure)
       ,ptr
       (:struct %vk:acceleration-structure-memory-requirements-info-nv))
    (setf %vk:s-type :acceleration-structure-memory-requirements-info-nv
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:acceleration-structure (if (vk:acceleration-structure ,value) (vk:acceleration-structure ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-acceleration-structure-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure
        %vk:acceleration-structure-capture-replay
        %vk:acceleration-structure-indirect-build
        %vk:acceleration-structure-host-commands
        %vk:descriptor-binding-acceleration-structure-update-after-bind)
       ,ptr
       (:struct %vk:physical-device-acceleration-structure-features-khr))
    (setf %vk:s-type :physical-device-acceleration-structure-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:acceleration-structure (vk:acceleration-structure ,value)
          %vk:acceleration-structure-capture-replay (vk:acceleration-structure-capture-replay ,value)
          %vk:acceleration-structure-indirect-build (vk:acceleration-structure-indirect-build ,value)
          %vk:acceleration-structure-host-commands (vk:acceleration-structure-host-commands ,value)
          %vk:descriptor-binding-acceleration-structure-update-after-bind (vk:descriptor-binding-acceleration-structure-update-after-bind ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ray-tracing-pipeline-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:ray-tracing-pipeline
        %vk:ray-tracing-pipeline-shader-group-handle-capture-replay
        %vk:ray-tracing-pipeline-shader-group-handle-capture-replay-mixed
        %vk:ray-tracing-pipeline-trace-rays-indirect
        %vk:ray-traversal-primitive-culling)
       ,ptr
       (:struct %vk:physical-device-ray-tracing-pipeline-features-khr))
    (setf %vk:s-type :physical-device-ray-tracing-pipeline-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:ray-tracing-pipeline (vk:ray-tracing-pipeline ,value)
          %vk:ray-tracing-pipeline-shader-group-handle-capture-replay (vk:ray-tracing-pipeline-shader-group-handle-capture-replay ,value)
          %vk:ray-tracing-pipeline-shader-group-handle-capture-replay-mixed (vk:ray-tracing-pipeline-shader-group-handle-capture-replay-mixed ,value)
          %vk:ray-tracing-pipeline-trace-rays-indirect (vk:ray-tracing-pipeline-trace-rays-indirect ,value)
          %vk:ray-traversal-primitive-culling (vk:ray-traversal-primitive-culling ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ray-query-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:ray-query)
       ,ptr
       (:struct %vk:physical-device-ray-query-features-khr))
    (setf %vk:s-type :physical-device-ray-query-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:ray-query (vk:ray-query ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-acceleration-structure-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-geometry-count
        %vk:max-instance-count
        %vk:max-primitive-count
        %vk:max-per-stage-descriptor-acceleration-structures
        %vk:max-per-stage-descriptor-update-after-bind-acceleration-structures
        %vk:max-descriptor-set-acceleration-structures
        %vk:max-descriptor-set-update-after-bind-acceleration-structures
        %vk:min-acceleration-structure-scratch-offset-alignment)
       ,ptr
       (:struct %vk:physical-device-acceleration-structure-properties-khr))
    (setf %vk:s-type :physical-device-acceleration-structure-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-geometry-count (vk:max-geometry-count ,value)
          %vk:max-instance-count (vk:max-instance-count ,value)
          %vk:max-primitive-count (vk:max-primitive-count ,value)
          %vk:max-per-stage-descriptor-acceleration-structures (vk:max-per-stage-descriptor-acceleration-structures ,value)
          %vk:max-per-stage-descriptor-update-after-bind-acceleration-structures (vk:max-per-stage-descriptor-update-after-bind-acceleration-structures ,value)
          %vk:max-descriptor-set-acceleration-structures (vk:max-descriptor-set-acceleration-structures ,value)
          %vk:max-descriptor-set-update-after-bind-acceleration-structures (vk:max-descriptor-set-update-after-bind-acceleration-structures ,value)
          %vk:min-acceleration-structure-scratch-offset-alignment (vk:min-acceleration-structure-scratch-offset-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ray-tracing-pipeline-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-group-handle-size
        %vk:max-ray-recursion-depth
        %vk:max-shader-group-stride
        %vk:shader-group-base-alignment
        %vk:shader-group-handle-capture-replay-size
        %vk:max-ray-dispatch-invocation-count
        %vk:shader-group-handle-alignment
        %vk:max-ray-hit-attribute-size)
       ,ptr
       (:struct %vk:physical-device-ray-tracing-pipeline-properties-khr))
    (setf %vk:s-type :physical-device-ray-tracing-pipeline-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-group-handle-size (vk:shader-group-handle-size ,value)
          %vk:max-ray-recursion-depth (vk:max-ray-recursion-depth ,value)
          %vk:max-shader-group-stride (vk:max-shader-group-stride ,value)
          %vk:shader-group-base-alignment (vk:shader-group-base-alignment ,value)
          %vk:shader-group-handle-capture-replay-size (vk:shader-group-handle-capture-replay-size ,value)
          %vk:max-ray-dispatch-invocation-count (vk:max-ray-dispatch-invocation-count ,value)
          %vk:shader-group-handle-alignment (vk:shader-group-handle-alignment ,value)
          %vk:max-ray-hit-attribute-size (vk:max-ray-hit-attribute-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ray-tracing-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-group-handle-size
        %vk:max-recursion-depth
        %vk:max-shader-group-stride
        %vk:shader-group-base-alignment
        %vk:max-geometry-count
        %vk:max-instance-count
        %vk:max-triangle-count
        %vk:max-descriptor-set-acceleration-structures)
       ,ptr
       (:struct %vk:physical-device-ray-tracing-properties-nv))
    (setf %vk:s-type :physical-device-ray-tracing-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-group-handle-size (vk:shader-group-handle-size ,value)
          %vk:max-recursion-depth (vk:max-recursion-depth ,value)
          %vk:max-shader-group-stride (vk:max-shader-group-stride ,value)
          %vk:shader-group-base-alignment (vk:shader-group-base-alignment ,value)
          %vk:max-geometry-count (vk:max-geometry-count ,value)
          %vk:max-instance-count (vk:max-instance-count ,value)
          %vk:max-triangle-count (vk:max-triangle-count ,value)
          %vk:max-descriptor-set-acceleration-structures (vk:max-descriptor-set-acceleration-structures ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-strided-device-address-region-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:device-address
        %vk:stride
        %vk:size)
       ,ptr
       (:struct %vk:strided-device-address-region-khr))
    (setf %vk:device-address (vk:device-address ,value)
          %vk:stride (vk:stride ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-trace-rays-indirect-command-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:width
        %vk:height
        %vk:depth)
       ,ptr
       (:struct %vk:trace-rays-indirect-command-khr))
    (setf %vk:width (vk:width ,value)
          %vk:height (vk:height ,value)
          %vk:depth (vk:depth ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-drm-format-modifier-properties-list-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:drm-format-modifier-count
        %vk:p-drm-format-modifier-properties)
       ,ptr
       (:struct %vk:drm-format-modifier-properties-list-ext))
    (setf %vk:s-type :drm-format-modifier-properties-list-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:drm-format-modifier-count (length (vk:drm-format-modifier-properties ,value))
          %vk:p-drm-format-modifier-properties (vk-alloc:foreign-allocate-and-fill '(:struct %vk:drm-format-modifier-properties-ext) (vk:drm-format-modifier-properties ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-drm-format-modifier-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:drm-format-modifier
        %vk:drm-format-modifier-plane-count
        %vk:drm-format-modifier-tiling-features)
       ,ptr
       (:struct %vk:drm-format-modifier-properties-ext))
    (setf %vk:drm-format-modifier (vk:drm-format-modifier ,value)
          %vk:drm-format-modifier-plane-count (vk:drm-format-modifier-plane-count ,value)
          %vk:drm-format-modifier-tiling-features (vk:drm-format-modifier-tiling-features ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-image-drm-format-modifier-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:drm-format-modifier
        %vk:sharing-mode
        %vk:queue-family-index-count
        %vk:p-queue-family-indices)
       ,ptr
       (:struct %vk:physical-device-image-drm-format-modifier-info-ext))
    (setf %vk:s-type :physical-device-image-drm-format-modifier-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:drm-format-modifier (vk:drm-format-modifier ,value)
          %vk:sharing-mode (vk:sharing-mode ,value)
          %vk:queue-family-index-count (length (vk:queue-family-indices ,value))
          %vk:p-queue-family-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:queue-family-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-drm-format-modifier-list-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:drm-format-modifier-count
        %vk:p-drm-format-modifiers)
       ,ptr
       (:struct %vk:image-drm-format-modifier-list-create-info-ext))
    (setf %vk:s-type :image-drm-format-modifier-list-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:drm-format-modifier-count (length (vk:drm-format-modifiers ,value))
          %vk:p-drm-format-modifiers (vk-alloc:foreign-allocate-and-fill :uint64 (vk:drm-format-modifiers ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-drm-format-modifier-explicit-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:drm-format-modifier
        %vk:drm-format-modifier-plane-count
        %vk:p-plane-layouts)
       ,ptr
       (:struct %vk:image-drm-format-modifier-explicit-create-info-ext))
    (setf %vk:s-type :image-drm-format-modifier-explicit-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:drm-format-modifier (vk:drm-format-modifier ,value)
          %vk:drm-format-modifier-plane-count (length (vk:plane-layouts ,value))
          %vk:p-plane-layouts (vk-alloc:foreign-allocate-and-fill '(:struct %vk:subresource-layout) (vk:plane-layouts ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-drm-format-modifier-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:drm-format-modifier)
       ,ptr
       (:struct %vk:image-drm-format-modifier-properties-ext))
    (setf %vk:s-type :image-drm-format-modifier-properties-ext
          %vk:p-next (cffi:null-pointer)
          %vk:drm-format-modifier (vk:drm-format-modifier ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-stencil-usage-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stencil-usage)
       ,ptr
       (:struct %vk:image-stencil-usage-create-info))
    (setf %vk:s-type :image-stencil-usage-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:stencil-usage (vk:stencil-usage ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-memory-overallocation-create-info-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:overallocation-behavior)
       ,ptr
       (:struct %vk:device-memory-overallocation-create-info-amd))
    (setf %vk:s-type :device-memory-overallocation-create-info-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:overallocation-behavior (vk:overallocation-behavior ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-density-map-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-density-map
        %vk:fragment-density-map-dynamic
        %vk:fragment-density-map-non-subsampled-images)
       ,ptr
       (:struct %vk:physical-device-fragment-density-map-features-ext))
    (setf %vk:s-type :physical-device-fragment-density-map-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-density-map (vk:fragment-density-map ,value)
          %vk:fragment-density-map-dynamic (vk:fragment-density-map-dynamic ,value)
          %vk:fragment-density-map-non-subsampled-images (vk:fragment-density-map-non-subsampled-images ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-density-map-2-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-density-map-deferred)
       ,ptr
       (:struct %vk:physical-device-fragment-density-map-2-features-ext))
    (setf %vk:s-type :physical-device-fragment-density-map-2-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-density-map-deferred (vk:fragment-density-map-deferred ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-density-map-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-fragment-density-texel-size
        %vk:max-fragment-density-texel-size
        %vk:fragment-density-invocations)
       ,ptr
       (:struct %vk:physical-device-fragment-density-map-properties-ext))
    (setf %vk:s-type :physical-device-fragment-density-map-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:min-fragment-density-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-fragment-density-texel-size ,value) ,ptr)
          %vk:max-fragment-density-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-fragment-density-texel-size ,value) ,ptr)
          %vk:fragment-density-invocations (vk:fragment-density-invocations ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-density-map-2-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:subsampled-loads
        %vk:subsampled-coarse-reconstruction-early-access
        %vk:max-subsampled-array-layers
        %vk:max-descriptor-set-subsampled-samplers)
       ,ptr
       (:struct %vk:physical-device-fragment-density-map-2-properties-ext))
    (setf %vk:s-type :physical-device-fragment-density-map-2-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:subsampled-loads (vk:subsampled-loads ,value)
          %vk:subsampled-coarse-reconstruction-early-access (vk:subsampled-coarse-reconstruction-early-access ,value)
          %vk:max-subsampled-array-layers (vk:max-subsampled-array-layers ,value)
          %vk:max-descriptor-set-subsampled-samplers (vk:max-descriptor-set-subsampled-samplers ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-fragment-density-map-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-density-map-attachment)
       ,ptr
       (:struct %vk:render-pass-fragment-density-map-create-info-ext))
    (setf %vk:s-type :render-pass-fragment-density-map-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-density-map-attachment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference) (vk:fragment-density-map-attachment ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-scalar-block-layout-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:scalar-block-layout)
       ,ptr
       (:struct %vk:physical-device-scalar-block-layout-features))
    (setf %vk:s-type :physical-device-scalar-block-layout-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:scalar-block-layout (vk:scalar-block-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-protected-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:supports-protected)
       ,ptr
       (:struct %vk:surface-protected-capabilities-khr))
    (setf %vk:s-type :surface-protected-capabilities-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:supports-protected (vk:supports-protected ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-uniform-buffer-standard-layout-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:uniform-buffer-standard-layout)
       ,ptr
       (:struct %vk:physical-device-uniform-buffer-standard-layout-features))
    (setf %vk:s-type :physical-device-uniform-buffer-standard-layout-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:uniform-buffer-standard-layout (vk:uniform-buffer-standard-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-depth-clip-enable-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:depth-clip-enable)
       ,ptr
       (:struct %vk:physical-device-depth-clip-enable-features-ext))
    (setf %vk:s-type :physical-device-depth-clip-enable-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:depth-clip-enable (vk:depth-clip-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-depth-clip-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:depth-clip-enable)
       ,ptr
       (:struct %vk:pipeline-rasterization-depth-clip-state-create-info-ext))
    (setf %vk:s-type :pipeline-rasterization-depth-clip-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:depth-clip-enable (vk:depth-clip-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-memory-budget-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:heap-budget
        %vk:heap-usage)
       ,ptr
       (:struct %vk:physical-device-memory-budget-properties-ext))
    (setf %vk:s-type :physical-device-memory-budget-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:heap-budget (vk:heap-budget ,value)
          %vk:heap-usage (vk:heap-usage ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-memory-priority-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-priority)
       ,ptr
       (:struct %vk:physical-device-memory-priority-features-ext))
    (setf %vk:s-type :physical-device-memory-priority-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:memory-priority (vk:memory-priority ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-priority-allocate-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:priority)
       ,ptr
       (:struct %vk:memory-priority-allocate-info-ext))
    (setf %vk:s-type :memory-priority-allocate-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:priority (vk:priority ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-buffer-device-address-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer-device-address
        %vk:buffer-device-address-capture-replay
        %vk:buffer-device-address-multi-device)
       ,ptr
       (:struct %vk:physical-device-buffer-device-address-features))
    (setf %vk:s-type :physical-device-buffer-device-address-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:buffer-device-address (vk:buffer-device-address ,value)
          %vk:buffer-device-address-capture-replay (vk:buffer-device-address-capture-replay ,value)
          %vk:buffer-device-address-multi-device (vk:buffer-device-address-multi-device ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-buffer-device-address-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer-device-address
        %vk:buffer-device-address-capture-replay
        %vk:buffer-device-address-multi-device)
       ,ptr
       (:struct %vk:physical-device-buffer-device-address-features-ext))
    (setf %vk:s-type :physical-device-buffer-device-address-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:buffer-device-address (vk:buffer-device-address ,value)
          %vk:buffer-device-address-capture-replay (vk:buffer-device-address-capture-replay ,value)
          %vk:buffer-device-address-multi-device (vk:buffer-device-address-multi-device ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-device-address-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer)
       ,ptr
       (:struct %vk:buffer-device-address-info))
    (setf %vk:s-type :buffer-device-address-info
          %vk:p-next (cffi:null-pointer)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-opaque-capture-address-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:opaque-capture-address)
       ,ptr
       (:struct %vk:buffer-opaque-capture-address-create-info))
    (setf %vk:s-type :buffer-opaque-capture-address-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:opaque-capture-address (vk:opaque-capture-address ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-device-address-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-address)
       ,ptr
       (:struct %vk:buffer-device-address-create-info-ext))
    (setf %vk:s-type :buffer-device-address-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-address (vk:device-address ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-image-view-image-format-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image-view-type)
       ,ptr
       (:struct %vk:physical-device-image-view-image-format-info-ext))
    (setf %vk:s-type :physical-device-image-view-image-format-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:image-view-type (vk:image-view-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-filter-cubic-image-view-image-format-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:filter-cubic
        %vk:filter-cubic-minmax)
       ,ptr
       (:struct %vk:filter-cubic-image-view-image-format-properties-ext))
    (setf %vk:s-type :filter-cubic-image-view-image-format-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:filter-cubic (vk:filter-cubic ,value)
          %vk:filter-cubic-minmax (vk:filter-cubic-minmax ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-imageless-framebuffer-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:imageless-framebuffer)
       ,ptr
       (:struct %vk:physical-device-imageless-framebuffer-features))
    (setf %vk:s-type :physical-device-imageless-framebuffer-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:imageless-framebuffer (vk:imageless-framebuffer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-framebuffer-attachments-create-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:attachment-image-info-count
        %vk:p-attachment-image-infos)
       ,ptr
       (:struct %vk:framebuffer-attachments-create-info))
    (setf %vk:s-type :framebuffer-attachments-create-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:attachment-image-info-count (length (vk:attachment-image-infos ,value))
          %vk:p-attachment-image-infos (vk-alloc:foreign-allocate-and-fill '(:struct %vk:framebuffer-attachment-image-info) (vk:attachment-image-infos ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-framebuffer-attachment-image-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:usage
        %vk:width
        %vk:height
        %vk:layer-count
        %vk:view-format-count
        %vk:p-view-formats)
       ,ptr
       (:struct %vk:framebuffer-attachment-image-info))
    (setf %vk:s-type :framebuffer-attachment-image-info
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:usage (vk:usage ,value)
          %vk:width (vk:width ,value)
          %vk:height (vk:height ,value)
          %vk:layer-count (vk:layer-count ,value)
          %vk:view-format-count (length (vk:view-formats ,value))
          %vk:p-view-formats (vk-alloc:foreign-allocate-and-fill '%vk:format (vk:view-formats ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-attachment-begin-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:attachment-count
        %vk:p-attachments)
       ,ptr
       (:struct %vk:render-pass-attachment-begin-info))
    (setf %vk:s-type :render-pass-attachment-begin-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:attachment-count (length (vk:attachments ,value))
          %vk:p-attachments (vk-alloc:foreign-allocate-and-fill '%vk:image-view (vk:attachments ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-texture-compression-astc-h-d-r-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:texture-compression-astc_-h-d-r)
       ,ptr
       (:struct %vk:physical-device-texture-compression-astc-h-d-r-features-ext))
    (setf %vk:s-type :physical-device-texture-compression-astc-hdr-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:texture-compression-astc_-h-d-r (vk:texture-compression-astc_-h-d-r ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-cooperative-matrix-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:cooperative-matrix
        %vk:cooperative-matrix-robust-buffer-access)
       ,ptr
       (:struct %vk:physical-device-cooperative-matrix-features-nv))
    (setf %vk:s-type :physical-device-cooperative-matrix-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:cooperative-matrix (vk:cooperative-matrix ,value)
          %vk:cooperative-matrix-robust-buffer-access (vk:cooperative-matrix-robust-buffer-access ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-cooperative-matrix-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:cooperative-matrix-supported-stages)
       ,ptr
       (:struct %vk:physical-device-cooperative-matrix-properties-nv))
    (setf %vk:s-type :physical-device-cooperative-matrix-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:cooperative-matrix-supported-stages (vk:cooperative-matrix-supported-stages ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-cooperative-matrix-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:m-size
        %vk:n-size
        %vk:k-size
        %vk:a-type
        %vk:b-type
        %vk:c-type
        %vk:d-type
        %vk:scope)
       ,ptr
       (:struct %vk:cooperative-matrix-properties-nv))
    (setf %vk:s-type :cooperative-matrix-properties-nv
          %vk:p-next (cffi:null-pointer)
          %vk:m-size (vk:m-size ,value)
          %vk:n-size (vk:n-size ,value)
          %vk:k-size (vk:k-size ,value)
          %vk:a-type (vk:a-type ,value)
          %vk:b-type (vk:b-type ,value)
          %vk:c-type (vk:c-type ,value)
          %vk:d-type (vk:d-type ,value)
          %vk:scope (vk:scope ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ycbcr-image-arrays-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:ycbcr-image-arrays)
       ,ptr
       (:struct %vk:physical-device-ycbcr-image-arrays-features-ext))
    (setf %vk:s-type :physical-device-ycbcr-image-arrays-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:ycbcr-image-arrays (vk:ycbcr-image-arrays ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-view-handle-info-nv-x) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image-view
        %vk:descriptor-type
        %vk:sampler)
       ,ptr
       (:struct %vk:image-view-handle-info-nv-x))
    (setf %vk:s-type :image-view-handle-info-nvx
          %vk:p-next (cffi:null-pointer)
          %vk:image-view (if (vk:image-view ,value) (vk:image-view ,value) (cffi:null-pointer))
          %vk:descriptor-type (vk:descriptor-type ,value)
          %vk:sampler (if (vk:sampler ,value) (vk:sampler ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-view-address-properties-nv-x) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-address
        %vk:size)
       ,ptr
       (:struct %vk:image-view-address-properties-nv-x))
    (setf %vk:s-type :image-view-address-properties-nvx
          %vk:p-next (cffi:null-pointer)
          %vk:device-address (vk:device-address ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-present-frame-token-ggp) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:frame-token)
       ,ptr
       (:struct %vk:present-frame-token-ggp))
    (setf %vk:s-type :present-frame-token-ggp
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:frame-token (vk:frame-token ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-creation-feedback-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:flags
        %vk:duration)
       ,ptr
       (:struct %vk:pipeline-creation-feedback-ext))
    (setf %vk:flags (vk:flags ,value)
          %vk:duration (vk:duration ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-creation-feedback-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-pipeline-creation-feedback
        %vk:pipeline-stage-creation-feedback-count
        %vk:p-pipeline-stage-creation-feedbacks)
       ,ptr
       (:struct %vk:pipeline-creation-feedback-create-info-ext))
    (setf %vk:s-type :pipeline-creation-feedback-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-pipeline-creation-feedback (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-creation-feedback-ext) (vk:pipeline-creation-feedback ,value) ,ptr)
          %vk:pipeline-stage-creation-feedback-count (length (vk:pipeline-stage-creation-feedbacks ,value))
          %vk:p-pipeline-stage-creation-feedbacks (vk-alloc:foreign-allocate-and-fill '(:struct %vk:pipeline-creation-feedback-ext) (vk:pipeline-stage-creation-feedbacks ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-full-screen-exclusive-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:full-screen-exclusive)
       ,ptr
       (:struct %vk:surface-full-screen-exclusive-info-ext))
    (setf %vk:s-type :surface-full-screen-exclusive-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:full-screen-exclusive (vk:full-screen-exclusive ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-full-screen-exclusive-win32-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:hmonitor)
       ,ptr
       (:struct %vk:surface-full-screen-exclusive-win32-info-ext))
    (setf %vk:s-type :surface-full-screen-exclusive-win32-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:hmonitor (vk:hmonitor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-surface-capabilities-full-screen-exclusive-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:full-screen-exclusive-supported)
       ,ptr
       (:struct %vk:surface-capabilities-full-screen-exclusive-ext))
    (setf %vk:s-type :surface-capabilities-full-screen-exclusive-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:full-screen-exclusive-supported (vk:full-screen-exclusive-supported ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-performance-query-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:performance-counter-query-pools
        %vk:performance-counter-multiple-query-pools)
       ,ptr
       (:struct %vk:physical-device-performance-query-features-khr))
    (setf %vk:s-type :physical-device-performance-query-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:performance-counter-query-pools (vk:performance-counter-query-pools ,value)
          %vk:performance-counter-multiple-query-pools (vk:performance-counter-multiple-query-pools ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-performance-query-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:allow-command-buffer-query-copies)
       ,ptr
       (:struct %vk:physical-device-performance-query-properties-khr))
    (setf %vk:s-type :physical-device-performance-query-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:allow-command-buffer-query-copies (vk:allow-command-buffer-query-copies ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-counter-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:unit
        %vk:scope
        %vk:storage
        %vk:uuid)
       ,ptr
       (:struct %vk:performance-counter-khr))
    (setf %vk:s-type :performance-counter-khr
          %vk:p-next (cffi:null-pointer)
          %vk:unit (vk:unit ,value)
          %vk:scope (vk:scope ,value)
          %vk:storage (vk:storage ,value))
    (cffi:lisp-array-to-foreign (vk:uuid ,value) %vk:uuid '(:array :uint8 vk_uuid_size))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-counter-description-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:name
        %vk:category
        %vk:description)
       ,ptr
       (:struct %vk:performance-counter-description-khr))
    (setf %vk:s-type :performance-counter-description-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:name (vk:name ,value)
          %vk:category (vk:category ,value)
          %vk:description (vk:description ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-query-pool-performance-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:queue-family-index
        %vk:counter-index-count
        %vk:p-counter-indices)
       ,ptr
       (:struct %vk:query-pool-performance-create-info-khr))
    (setf %vk:s-type :query-pool-performance-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:queue-family-index (vk:queue-family-index ,value)
          %vk:counter-index-count (length (vk:counter-indices ,value))
          %vk:p-counter-indices (vk-alloc:foreign-allocate-and-fill :uint32 (vk:counter-indices ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory ((value vk:performance-counter-result-khr) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:int-32
        %vk:int-64
        %vk:uint-32
        %vk:uint-64
        %vk:float-32
        %vk:float-64)
       ,ptr
       (:union %vk:performance-counter-result-khr))
     (cond
      ((slot-boundp ,value 'vk:int-32)
       (setf %vk:int-32
             (vk:int-32 ,value)))
      ((slot-boundp ,value 'vk:int-64)
       (setf %vk:int-64
             (vk:int-64 ,value)))
      ((slot-boundp ,value 'vk:uint-32)
       (setf %vk:uint-32
             (vk:uint-32 ,value)))
      ((slot-boundp ,value 'vk:uint-64)
       (setf %vk:uint-64
             (vk:uint-64 ,value)))
      ((slot-boundp ,value 'vk:float-32)
       (setf %vk:float-32
             (vk:float-32 ,value)))
      ((slot-boundp ,value 'vk:float-64)
       (setf %vk:float-64
             (vk:float-64 ,value))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acquire-profiling-lock-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:timeout)
       ,ptr
       (:struct %vk:acquire-profiling-lock-info-khr))
    (setf %vk:s-type :acquire-profiling-lock-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:timeout (vk:timeout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-query-submit-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:counter-pass-index)
       ,ptr
       (:struct %vk:performance-query-submit-info-khr))
    (setf %vk:s-type :performance-query-submit-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:counter-pass-index (vk:counter-pass-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-headless-surface-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:headless-surface-create-info-ext))
    (setf %vk:s-type :headless-surface-create-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-coverage-reduction-mode-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:coverage-reduction-mode)
       ,ptr
       (:struct %vk:physical-device-coverage-reduction-mode-features-nv))
    (setf %vk:s-type :physical-device-coverage-reduction-mode-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:coverage-reduction-mode (vk:coverage-reduction-mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-coverage-reduction-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:coverage-reduction-mode)
       ,ptr
       (:struct %vk:pipeline-coverage-reduction-state-create-info-nv))
    (setf %vk:s-type :pipeline-coverage-reduction-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:coverage-reduction-mode (vk:coverage-reduction-mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-framebuffer-mixed-samples-combination-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:coverage-reduction-mode
        %vk:rasterization-samples
        %vk:depth-stencil-samples
        %vk:color-samples)
       ,ptr
       (:struct %vk:framebuffer-mixed-samples-combination-nv))
    (setf %vk:s-type :framebuffer-mixed-samples-combination-nv
          %vk:p-next (cffi:null-pointer)
          %vk:coverage-reduction-mode (vk:coverage-reduction-mode ,value)
          %vk:rasterization-samples (vk:rasterization-samples ,value)
          %vk:depth-stencil-samples (vk:depth-stencil-samples ,value)
          %vk:color-samples (vk:color-samples ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-integer-functions-2-features-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-integer-functions-2)
       ,ptr
       (:struct %vk:physical-device-shader-integer-functions-2-features-intel))
    (setf %vk:s-type :physical-device-shader-integer-functions-2-features-intel
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-integer-functions-2 (vk:shader-integer-functions-2 ,value))))

(defmethod cffi:expand-into-foreign-memory ((value vk:performance-value-data-intel) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:value-32
        %vk:value-64
        %vk:value-float
        %vk:value-bool
        %vk:value-string)
       ,ptr
       (:union %vk:performance-value-data-intel))
     (cond
      ((slot-boundp ,value 'vk:value-32)
       (setf %vk:value-32
             (vk:value-32 ,value)))
      ((slot-boundp ,value 'vk:value-64)
       (setf %vk:value-64
             (vk:value-64 ,value)))
      ((slot-boundp ,value 'vk:value-float)
       (setf %vk:value-float
             (vk:value-float ,value)))
      ((slot-boundp ,value 'vk:value-bool)
       (setf %vk:value-bool
             (vk:value-bool ,value)))
      ((slot-boundp ,value 'vk:value-string)
       (setf %vk:value-string
             (vk:value-string ,value))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-value-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:type
        %vk:data)
       ,ptr
       (:struct %vk:performance-value-intel))
    (setf %vk:type (vk:type ,value)
          %vk:data (vk-alloc:foreign-allocate-and-fill '(:union %vk:performance-value-data-intel) (vk:data ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-initialize-performance-api-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-user-data)
       ,ptr
       (:struct %vk:initialize-performance-api-info-intel))
    (setf %vk:s-type :initialize-performance-api-info-intel
          %vk:p-next (cffi:null-pointer)
          %vk:p-user-data (if (vk:user-data ,value) (vk:user-data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-query-pool-performance-query-create-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:performance-counters-sampling)
       ,ptr
       (:struct %vk:query-pool-performance-query-create-info-intel))
    (setf %vk:s-type :query-pool-performance-query-create-info-intel
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:performance-counters-sampling (vk:performance-counters-sampling ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-marker-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:marker)
       ,ptr
       (:struct %vk:performance-marker-info-intel))
    (setf %vk:s-type :performance-marker-info-intel
          %vk:p-next (cffi:null-pointer)
          %vk:marker (vk:marker ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-stream-marker-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:marker)
       ,ptr
       (:struct %vk:performance-stream-marker-info-intel))
    (setf %vk:s-type :performance-stream-marker-info-intel
          %vk:p-next (cffi:null-pointer)
          %vk:marker (vk:marker ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-override-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:enable
        %vk:parameter)
       ,ptr
       (:struct %vk:performance-override-info-intel))
    (setf %vk:s-type :performance-override-info-intel
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:enable (vk:enable ,value)
          %vk:parameter (vk:parameter ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-performance-configuration-acquire-info-intel) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type)
       ,ptr
       (:struct %vk:performance-configuration-acquire-info-intel))
    (setf %vk:s-type :performance-configuration-acquire-info-intel
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-clock-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-subgroup-clock
        %vk:shader-device-clock)
       ,ptr
       (:struct %vk:physical-device-shader-clock-features-khr))
    (setf %vk:s-type :physical-device-shader-clock-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-subgroup-clock (vk:shader-subgroup-clock ,value)
          %vk:shader-device-clock (vk:shader-device-clock ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-index-type-uint-8-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:index-type-uint-8)
       ,ptr
       (:struct %vk:physical-device-index-type-uint-8-features-ext))
    (setf %vk:s-type :physical-device-index-type-uint8-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:index-type-uint-8 (vk:index-type-uint-8 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-s-m-builtins-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-s-m-count
        %vk:shader-warps-per-s-m)
       ,ptr
       (:struct %vk:physical-device-shader-s-m-builtins-properties-nv))
    (setf %vk:s-type :physical-device-shader-sm-builtins-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-s-m-count (vk:shader-s-m-count ,value)
          %vk:shader-warps-per-s-m (vk:shader-warps-per-s-m ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-s-m-builtins-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-s-m-builtins)
       ,ptr
       (:struct %vk:physical-device-shader-s-m-builtins-features-nv))
    (setf %vk:s-type :physical-device-shader-sm-builtins-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-s-m-builtins (vk:shader-s-m-builtins ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shader-interlock-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-shader-sample-interlock
        %vk:fragment-shader-pixel-interlock
        %vk:fragment-shader-shading-rate-interlock)
       ,ptr
       (:struct %vk:physical-device-fragment-shader-interlock-features-ext))
    (setf %vk:s-type :physical-device-fragment-shader-interlock-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-shader-sample-interlock (vk:fragment-shader-sample-interlock ,value)
          %vk:fragment-shader-pixel-interlock (vk:fragment-shader-pixel-interlock ,value)
          %vk:fragment-shader-shading-rate-interlock (vk:fragment-shader-shading-rate-interlock ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-separate-depth-stencil-layouts-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:separate-depth-stencil-layouts)
       ,ptr
       (:struct %vk:physical-device-separate-depth-stencil-layouts-features))
    (setf %vk:s-type :physical-device-separate-depth-stencil-layouts-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:separate-depth-stencil-layouts (vk:separate-depth-stencil-layouts ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-reference-stencil-layout) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stencil-layout)
       ,ptr
       (:struct %vk:attachment-reference-stencil-layout))
    (setf %vk:s-type :attachment-reference-stencil-layout
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:stencil-layout (vk:stencil-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-attachment-description-stencil-layout) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stencil-initial-layout
        %vk:stencil-final-layout)
       ,ptr
       (:struct %vk:attachment-description-stencil-layout))
    (setf %vk:s-type :attachment-description-stencil-layout
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:stencil-initial-layout (vk:stencil-initial-layout ,value)
          %vk:stencil-final-layout (vk:stencil-final-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-pipeline-executable-properties-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline-executable-info)
       ,ptr
       (:struct %vk:physical-device-pipeline-executable-properties-features-khr))
    (setf %vk:s-type :physical-device-pipeline-executable-properties-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:pipeline-executable-info (vk:pipeline-executable-info ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline)
       ,ptr
       (:struct %vk:pipeline-info-khr))
    (setf %vk:s-type :pipeline-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:pipeline (if (vk:pipeline ,value) (vk:pipeline ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-executable-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stages
        %vk:name
        %vk:description
        %vk:subgroup-size)
       ,ptr
       (:struct %vk:pipeline-executable-properties-khr))
    (setf %vk:s-type :pipeline-executable-properties-khr
          %vk:p-next (cffi:null-pointer)
          %vk:stages (vk:stages ,value)
          %vk:name (vk:name ,value)
          %vk:description (vk:description ,value)
          %vk:subgroup-size (vk:subgroup-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-executable-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline
        %vk:executable-index)
       ,ptr
       (:struct %vk:pipeline-executable-info-khr))
    (setf %vk:s-type :pipeline-executable-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:pipeline (if (vk:pipeline ,value) (vk:pipeline ,value) (cffi:null-pointer))
          %vk:executable-index (vk:executable-index ,value))))

(defmethod cffi:expand-into-foreign-memory ((value vk:pipeline-executable-statistic-value-khr) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:b32
        %vk:i64
        %vk:u64
        %vk:f64)
       ,ptr
       (:union %vk:pipeline-executable-statistic-value-khr))
     (cond
      ((slot-boundp ,value 'vk:b32)
       (setf %vk:b32
             (vk:b32 ,value)))
      ((slot-boundp ,value 'vk:i64)
       (setf %vk:i64
             (vk:i64 ,value)))
      ((slot-boundp ,value 'vk:u64)
       (setf %vk:u64
             (vk:u64 ,value)))
      ((slot-boundp ,value 'vk:f64)
       (setf %vk:f64
             (vk:f64 ,value))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-executable-statistic-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:name
        %vk:description
        %vk:format
        %vk:value)
       ,ptr
       (:struct %vk:pipeline-executable-statistic-khr))
    (setf %vk:s-type :pipeline-executable-statistic-khr
          %vk:p-next (cffi:null-pointer)
          %vk:name (vk:name ,value)
          %vk:description (vk:description ,value)
          %vk:format (vk:format ,value)
          %vk:value (vk-alloc:foreign-allocate-and-fill '(:union %vk:pipeline-executable-statistic-value-khr) (vk:value ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-executable-internal-representation-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:name
        %vk:description
        %vk:is-text
        %vk:data-size
        %vk:p-data)
       ,ptr
       (:struct %vk:pipeline-executable-internal-representation-khr))
    (setf %vk:s-type :pipeline-executable-internal-representation-khr
          %vk:p-next (cffi:null-pointer)
          %vk:name (vk:name ,value)
          %vk:description (vk:description ,value)
          %vk:is-text (vk:is-text ,value)
          %vk:data-size (vk:data-size ,value)
          %vk:p-data (if (vk:data ,value) (vk:data ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-demote-to-helper-invocation-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-demote-to-helper-invocation)
       ,ptr
       (:struct %vk:physical-device-shader-demote-to-helper-invocation-features-ext))
    (setf %vk:s-type :physical-device-shader-demote-to-helper-invocation-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-demote-to-helper-invocation (vk:shader-demote-to-helper-invocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-texel-buffer-alignment-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:texel-buffer-alignment)
       ,ptr
       (:struct %vk:physical-device-texel-buffer-alignment-features-ext))
    (setf %vk:s-type :physical-device-texel-buffer-alignment-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:texel-buffer-alignment (vk:texel-buffer-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-texel-buffer-alignment-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:storage-texel-buffer-offset-alignment-bytes
        %vk:storage-texel-buffer-offset-single-texel-alignment
        %vk:uniform-texel-buffer-offset-alignment-bytes
        %vk:uniform-texel-buffer-offset-single-texel-alignment)
       ,ptr
       (:struct %vk:physical-device-texel-buffer-alignment-properties-ext))
    (setf %vk:s-type :physical-device-texel-buffer-alignment-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:storage-texel-buffer-offset-alignment-bytes (vk:storage-texel-buffer-offset-alignment-bytes ,value)
          %vk:storage-texel-buffer-offset-single-texel-alignment (vk:storage-texel-buffer-offset-single-texel-alignment ,value)
          %vk:uniform-texel-buffer-offset-alignment-bytes (vk:uniform-texel-buffer-offset-alignment-bytes ,value)
          %vk:uniform-texel-buffer-offset-single-texel-alignment (vk:uniform-texel-buffer-offset-single-texel-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-subgroup-size-control-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:subgroup-size-control
        %vk:compute-full-subgroups)
       ,ptr
       (:struct %vk:physical-device-subgroup-size-control-features-ext))
    (setf %vk:s-type :physical-device-subgroup-size-control-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:subgroup-size-control (vk:subgroup-size-control ,value)
          %vk:compute-full-subgroups (vk:compute-full-subgroups ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-subgroup-size-control-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-subgroup-size
        %vk:max-subgroup-size
        %vk:max-compute-workgroup-subgroups
        %vk:required-subgroup-size-stages)
       ,ptr
       (:struct %vk:physical-device-subgroup-size-control-properties-ext))
    (setf %vk:s-type :physical-device-subgroup-size-control-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:min-subgroup-size (vk:min-subgroup-size ,value)
          %vk:max-subgroup-size (vk:max-subgroup-size ,value)
          %vk:max-compute-workgroup-subgroups (vk:max-compute-workgroup-subgroups ,value)
          %vk:required-subgroup-size-stages (vk:required-subgroup-size-stages ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-shader-stage-required-subgroup-size-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:required-subgroup-size)
       ,ptr
       (:struct %vk:pipeline-shader-stage-required-subgroup-size-create-info-ext))
    (setf %vk:s-type :pipeline-shader-stage-required-subgroup-size-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:required-subgroup-size (vk:required-subgroup-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-opaque-capture-address-allocate-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:opaque-capture-address)
       ,ptr
       (:struct %vk:memory-opaque-capture-address-allocate-info))
    (setf %vk:s-type :memory-opaque-capture-address-allocate-info
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:opaque-capture-address (vk:opaque-capture-address ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-memory-opaque-capture-address-info) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory)
       ,ptr
       (:struct %vk:device-memory-opaque-capture-address-info))
    (setf %vk:s-type :device-memory-opaque-capture-address-info
          %vk:p-next (cffi:null-pointer)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-line-rasterization-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:rectangular-lines
        %vk:bresenham-lines
        %vk:smooth-lines
        %vk:stippled-rectangular-lines
        %vk:stippled-bresenham-lines
        %vk:stippled-smooth-lines)
       ,ptr
       (:struct %vk:physical-device-line-rasterization-features-ext))
    (setf %vk:s-type :physical-device-line-rasterization-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:rectangular-lines (vk:rectangular-lines ,value)
          %vk:bresenham-lines (vk:bresenham-lines ,value)
          %vk:smooth-lines (vk:smooth-lines ,value)
          %vk:stippled-rectangular-lines (vk:stippled-rectangular-lines ,value)
          %vk:stippled-bresenham-lines (vk:stippled-bresenham-lines ,value)
          %vk:stippled-smooth-lines (vk:stippled-smooth-lines ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-line-rasterization-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:line-sub-pixel-precision-bits)
       ,ptr
       (:struct %vk:physical-device-line-rasterization-properties-ext))
    (setf %vk:s-type :physical-device-line-rasterization-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:line-sub-pixel-precision-bits (vk:line-sub-pixel-precision-bits ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-rasterization-line-state-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:line-rasterization-mode
        %vk:stippled-line-enable
        %vk:line-stipple-factor
        %vk:line-stipple-pattern)
       ,ptr
       (:struct %vk:pipeline-rasterization-line-state-create-info-ext))
    (setf %vk:s-type :pipeline-rasterization-line-state-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:line-rasterization-mode (vk:line-rasterization-mode ,value)
          %vk:stippled-line-enable (vk:stippled-line-enable ,value)
          %vk:line-stipple-factor (vk:line-stipple-factor ,value)
          %vk:line-stipple-pattern (vk:line-stipple-pattern ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-pipeline-creation-cache-control-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline-creation-cache-control)
       ,ptr
       (:struct %vk:physical-device-pipeline-creation-cache-control-features-ext))
    (setf %vk:s-type :physical-device-pipeline-creation-cache-control-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:pipeline-creation-cache-control (vk:pipeline-creation-cache-control ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vulkan-1-1-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:storage-buffer-16-bit-access
        %vk:uniform-and-storage-buffer-16-bit-access
        %vk:storage-push-constant-16
        %vk:storage-input-output-16
        %vk:multiview
        %vk:multiview-geometry-shader
        %vk:multiview-tessellation-shader
        %vk:variable-pointers-storage-buffer
        %vk:variable-pointers
        %vk:protected-memory
        %vk:sampler-ycbcr-conversion
        %vk:shader-draw-parameters)
       ,ptr
       (:struct %vk:physical-device-vulkan-1-1-features))
    (setf %vk:s-type :physical-device-vulkan-1-1-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:storage-buffer-16-bit-access (vk:storage-buffer-16-bit-access ,value)
          %vk:uniform-and-storage-buffer-16-bit-access (vk:uniform-and-storage-buffer-16-bit-access ,value)
          %vk:storage-push-constant-16 (vk:storage-push-constant-16 ,value)
          %vk:storage-input-output-16 (vk:storage-input-output-16 ,value)
          %vk:multiview (vk:multiview ,value)
          %vk:multiview-geometry-shader (vk:multiview-geometry-shader ,value)
          %vk:multiview-tessellation-shader (vk:multiview-tessellation-shader ,value)
          %vk:variable-pointers-storage-buffer (vk:variable-pointers-storage-buffer ,value)
          %vk:variable-pointers (vk:variable-pointers ,value)
          %vk:protected-memory (vk:protected-memory ,value)
          %vk:sampler-ycbcr-conversion (vk:sampler-ycbcr-conversion ,value)
          %vk:shader-draw-parameters (vk:shader-draw-parameters ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vulkan-1-1-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-uuid
        %vk:driver-uuid
        %vk:device-luid
        %vk:device-node-mask
        %vk:device-luid-valid
        %vk:subgroup-size
        %vk:subgroup-supported-stages
        %vk:subgroup-supported-operations
        %vk:subgroup-quad-operations-in-all-stages
        %vk:point-clipping-behavior
        %vk:max-multiview-view-count
        %vk:max-multiview-instance-index
        %vk:protected-no-fault
        %vk:max-per-set-descriptors
        %vk:max-memory-allocation-size)
       ,ptr
       (:struct %vk:physical-device-vulkan-1-1-properties))
    (setf %vk:s-type :physical-device-vulkan-1-1-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-node-mask (vk:device-node-mask ,value)
          %vk:device-luid-valid (vk:device-luid-valid ,value)
          %vk:subgroup-size (vk:subgroup-size ,value)
          %vk:subgroup-supported-stages (vk:subgroup-supported-stages ,value)
          %vk:subgroup-supported-operations (vk:subgroup-supported-operations ,value)
          %vk:subgroup-quad-operations-in-all-stages (vk:subgroup-quad-operations-in-all-stages ,value)
          %vk:point-clipping-behavior (vk:point-clipping-behavior ,value)
          %vk:max-multiview-view-count (vk:max-multiview-view-count ,value)
          %vk:max-multiview-instance-index (vk:max-multiview-instance-index ,value)
          %vk:protected-no-fault (vk:protected-no-fault ,value)
          %vk:max-per-set-descriptors (vk:max-per-set-descriptors ,value)
          %vk:max-memory-allocation-size (vk:max-memory-allocation-size ,value))
    (cffi:lisp-array-to-foreign (vk:device-uuid ,value) %vk:device-uuid '(:array :uint8 vk_uuid_size))
    (cffi:lisp-array-to-foreign (vk:driver-uuid ,value) %vk:driver-uuid '(:array :uint8 vk_uuid_size))
    (cffi:lisp-array-to-foreign (vk:device-luid ,value) %vk:device-luid '(:array :uint8 vk_luid_size))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vulkan-1-2-features) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sampler-mirror-clamp-to-edge
        %vk:draw-indirect-count
        %vk:storage-buffer-8-bit-access
        %vk:uniform-and-storage-buffer-8-bit-access
        %vk:storage-push-constant-8
        %vk:shader-buffer-int-64-atomics
        %vk:shader-shared-int-64-atomics
        %vk:shader-float-16
        %vk:shader-int-8
        %vk:descriptor-indexing
        %vk:shader-input-attachment-array-dynamic-indexing
        %vk:shader-uniform-texel-buffer-array-dynamic-indexing
        %vk:shader-storage-texel-buffer-array-dynamic-indexing
        %vk:shader-uniform-buffer-array-non-uniform-indexing
        %vk:shader-sampled-image-array-non-uniform-indexing
        %vk:shader-storage-buffer-array-non-uniform-indexing
        %vk:shader-storage-image-array-non-uniform-indexing
        %vk:shader-input-attachment-array-non-uniform-indexing
        %vk:shader-uniform-texel-buffer-array-non-uniform-indexing
        %vk:shader-storage-texel-buffer-array-non-uniform-indexing
        %vk:descriptor-binding-uniform-buffer-update-after-bind
        %vk:descriptor-binding-sampled-image-update-after-bind
        %vk:descriptor-binding-storage-image-update-after-bind
        %vk:descriptor-binding-storage-buffer-update-after-bind
        %vk:descriptor-binding-uniform-texel-buffer-update-after-bind
        %vk:descriptor-binding-storage-texel-buffer-update-after-bind
        %vk:descriptor-binding-update-unused-while-pending
        %vk:descriptor-binding-partially-bound
        %vk:descriptor-binding-variable-descriptor-count
        %vk:runtime-descriptor-array
        %vk:sampler-filter-minmax
        %vk:scalar-block-layout
        %vk:imageless-framebuffer
        %vk:uniform-buffer-standard-layout
        %vk:shader-subgroup-extended-types
        %vk:separate-depth-stencil-layouts
        %vk:host-query-reset
        %vk:timeline-semaphore
        %vk:buffer-device-address
        %vk:buffer-device-address-capture-replay
        %vk:buffer-device-address-multi-device
        %vk:vulkan-memory-model
        %vk:vulkan-memory-model-device-scope
        %vk:vulkan-memory-model-availability-visibility-chains
        %vk:shader-output-viewport-index
        %vk:shader-output-layer
        %vk:subgroup-broadcast-dynamic-id)
       ,ptr
       (:struct %vk:physical-device-vulkan-1-2-features))
    (setf %vk:s-type :physical-device-vulkan-1-2-features
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sampler-mirror-clamp-to-edge (vk:sampler-mirror-clamp-to-edge ,value)
          %vk:draw-indirect-count (vk:draw-indirect-count ,value)
          %vk:storage-buffer-8-bit-access (vk:storage-buffer-8-bit-access ,value)
          %vk:uniform-and-storage-buffer-8-bit-access (vk:uniform-and-storage-buffer-8-bit-access ,value)
          %vk:storage-push-constant-8 (vk:storage-push-constant-8 ,value)
          %vk:shader-buffer-int-64-atomics (vk:shader-buffer-int-64-atomics ,value)
          %vk:shader-shared-int-64-atomics (vk:shader-shared-int-64-atomics ,value)
          %vk:shader-float-16 (vk:shader-float-16 ,value)
          %vk:shader-int-8 (vk:shader-int-8 ,value)
          %vk:descriptor-indexing (vk:descriptor-indexing ,value)
          %vk:shader-input-attachment-array-dynamic-indexing (vk:shader-input-attachment-array-dynamic-indexing ,value)
          %vk:shader-uniform-texel-buffer-array-dynamic-indexing (vk:shader-uniform-texel-buffer-array-dynamic-indexing ,value)
          %vk:shader-storage-texel-buffer-array-dynamic-indexing (vk:shader-storage-texel-buffer-array-dynamic-indexing ,value)
          %vk:shader-uniform-buffer-array-non-uniform-indexing (vk:shader-uniform-buffer-array-non-uniform-indexing ,value)
          %vk:shader-sampled-image-array-non-uniform-indexing (vk:shader-sampled-image-array-non-uniform-indexing ,value)
          %vk:shader-storage-buffer-array-non-uniform-indexing (vk:shader-storage-buffer-array-non-uniform-indexing ,value)
          %vk:shader-storage-image-array-non-uniform-indexing (vk:shader-storage-image-array-non-uniform-indexing ,value)
          %vk:shader-input-attachment-array-non-uniform-indexing (vk:shader-input-attachment-array-non-uniform-indexing ,value)
          %vk:shader-uniform-texel-buffer-array-non-uniform-indexing (vk:shader-uniform-texel-buffer-array-non-uniform-indexing ,value)
          %vk:shader-storage-texel-buffer-array-non-uniform-indexing (vk:shader-storage-texel-buffer-array-non-uniform-indexing ,value)
          %vk:descriptor-binding-uniform-buffer-update-after-bind (vk:descriptor-binding-uniform-buffer-update-after-bind ,value)
          %vk:descriptor-binding-sampled-image-update-after-bind (vk:descriptor-binding-sampled-image-update-after-bind ,value)
          %vk:descriptor-binding-storage-image-update-after-bind (vk:descriptor-binding-storage-image-update-after-bind ,value)
          %vk:descriptor-binding-storage-buffer-update-after-bind (vk:descriptor-binding-storage-buffer-update-after-bind ,value)
          %vk:descriptor-binding-uniform-texel-buffer-update-after-bind (vk:descriptor-binding-uniform-texel-buffer-update-after-bind ,value)
          %vk:descriptor-binding-storage-texel-buffer-update-after-bind (vk:descriptor-binding-storage-texel-buffer-update-after-bind ,value)
          %vk:descriptor-binding-update-unused-while-pending (vk:descriptor-binding-update-unused-while-pending ,value)
          %vk:descriptor-binding-partially-bound (vk:descriptor-binding-partially-bound ,value)
          %vk:descriptor-binding-variable-descriptor-count (vk:descriptor-binding-variable-descriptor-count ,value)
          %vk:runtime-descriptor-array (vk:runtime-descriptor-array ,value)
          %vk:sampler-filter-minmax (vk:sampler-filter-minmax ,value)
          %vk:scalar-block-layout (vk:scalar-block-layout ,value)
          %vk:imageless-framebuffer (vk:imageless-framebuffer ,value)
          %vk:uniform-buffer-standard-layout (vk:uniform-buffer-standard-layout ,value)
          %vk:shader-subgroup-extended-types (vk:shader-subgroup-extended-types ,value)
          %vk:separate-depth-stencil-layouts (vk:separate-depth-stencil-layouts ,value)
          %vk:host-query-reset (vk:host-query-reset ,value)
          %vk:timeline-semaphore (vk:timeline-semaphore ,value)
          %vk:buffer-device-address (vk:buffer-device-address ,value)
          %vk:buffer-device-address-capture-replay (vk:buffer-device-address-capture-replay ,value)
          %vk:buffer-device-address-multi-device (vk:buffer-device-address-multi-device ,value)
          %vk:vulkan-memory-model (vk:vulkan-memory-model ,value)
          %vk:vulkan-memory-model-device-scope (vk:vulkan-memory-model-device-scope ,value)
          %vk:vulkan-memory-model-availability-visibility-chains (vk:vulkan-memory-model-availability-visibility-chains ,value)
          %vk:shader-output-viewport-index (vk:shader-output-viewport-index ,value)
          %vk:shader-output-layer (vk:shader-output-layer ,value)
          %vk:subgroup-broadcast-dynamic-id (vk:subgroup-broadcast-dynamic-id ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vulkan-1-2-properties) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:driver-id
        %vk:driver-name
        %vk:driver-info
        %vk:conformance-version
        %vk:denorm-behavior-independence
        %vk:rounding-mode-independence
        %vk:shader-signed-zero-inf-nan-preserve-float-16
        %vk:shader-signed-zero-inf-nan-preserve-float-32
        %vk:shader-signed-zero-inf-nan-preserve-float-64
        %vk:shader-denorm-preserve-float-16
        %vk:shader-denorm-preserve-float-32
        %vk:shader-denorm-preserve-float-64
        %vk:shader-denorm-flush-to-zero-float-16
        %vk:shader-denorm-flush-to-zero-float-32
        %vk:shader-denorm-flush-to-zero-float-64
        %vk:shader-rounding-mode-rte-float-16
        %vk:shader-rounding-mode-rte-float-32
        %vk:shader-rounding-mode-rte-float-64
        %vk:shader-rounding-mode-rtz-float-16
        %vk:shader-rounding-mode-rtz-float-32
        %vk:shader-rounding-mode-rtz-float-64
        %vk:max-update-after-bind-descriptors-in-all-pools
        %vk:shader-uniform-buffer-array-non-uniform-indexing-native
        %vk:shader-sampled-image-array-non-uniform-indexing-native
        %vk:shader-storage-buffer-array-non-uniform-indexing-native
        %vk:shader-storage-image-array-non-uniform-indexing-native
        %vk:shader-input-attachment-array-non-uniform-indexing-native
        %vk:robust-buffer-access-update-after-bind
        %vk:quad-divergent-implicit-lod
        %vk:max-per-stage-descriptor-update-after-bind-samplers
        %vk:max-per-stage-descriptor-update-after-bind-uniform-buffers
        %vk:max-per-stage-descriptor-update-after-bind-storage-buffers
        %vk:max-per-stage-descriptor-update-after-bind-sampled-images
        %vk:max-per-stage-descriptor-update-after-bind-storage-images
        %vk:max-per-stage-descriptor-update-after-bind-input-attachments
        %vk:max-per-stage-update-after-bind-resources
        %vk:max-descriptor-set-update-after-bind-samplers
        %vk:max-descriptor-set-update-after-bind-uniform-buffers
        %vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic
        %vk:max-descriptor-set-update-after-bind-storage-buffers
        %vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic
        %vk:max-descriptor-set-update-after-bind-sampled-images
        %vk:max-descriptor-set-update-after-bind-storage-images
        %vk:max-descriptor-set-update-after-bind-input-attachments
        %vk:supported-depth-resolve-modes
        %vk:supported-stencil-resolve-modes
        %vk:independent-resolve-none
        %vk:independent-resolve
        %vk:filter-minmax-single-component-formats
        %vk:filter-minmax-image-component-mapping
        %vk:max-timeline-semaphore-value-difference
        %vk:framebuffer-integer-color-sample-counts)
       ,ptr
       (:struct %vk:physical-device-vulkan-1-2-properties))
    (setf %vk:s-type :physical-device-vulkan-1-2-properties
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:driver-id (vk:driver-id ,value)
          %vk:driver-name (vk:driver-name ,value)
          %vk:driver-info (vk:driver-info ,value)
          %vk:conformance-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:conformance-version) (vk:conformance-version ,value) ,ptr)
          %vk:denorm-behavior-independence (vk:denorm-behavior-independence ,value)
          %vk:rounding-mode-independence (vk:rounding-mode-independence ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-16 (vk:shader-signed-zero-inf-nan-preserve-float-16 ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-32 (vk:shader-signed-zero-inf-nan-preserve-float-32 ,value)
          %vk:shader-signed-zero-inf-nan-preserve-float-64 (vk:shader-signed-zero-inf-nan-preserve-float-64 ,value)
          %vk:shader-denorm-preserve-float-16 (vk:shader-denorm-preserve-float-16 ,value)
          %vk:shader-denorm-preserve-float-32 (vk:shader-denorm-preserve-float-32 ,value)
          %vk:shader-denorm-preserve-float-64 (vk:shader-denorm-preserve-float-64 ,value)
          %vk:shader-denorm-flush-to-zero-float-16 (vk:shader-denorm-flush-to-zero-float-16 ,value)
          %vk:shader-denorm-flush-to-zero-float-32 (vk:shader-denorm-flush-to-zero-float-32 ,value)
          %vk:shader-denorm-flush-to-zero-float-64 (vk:shader-denorm-flush-to-zero-float-64 ,value)
          %vk:shader-rounding-mode-rte-float-16 (vk:shader-rounding-mode-rte-float-16 ,value)
          %vk:shader-rounding-mode-rte-float-32 (vk:shader-rounding-mode-rte-float-32 ,value)
          %vk:shader-rounding-mode-rte-float-64 (vk:shader-rounding-mode-rte-float-64 ,value)
          %vk:shader-rounding-mode-rtz-float-16 (vk:shader-rounding-mode-rtz-float-16 ,value)
          %vk:shader-rounding-mode-rtz-float-32 (vk:shader-rounding-mode-rtz-float-32 ,value)
          %vk:shader-rounding-mode-rtz-float-64 (vk:shader-rounding-mode-rtz-float-64 ,value)
          %vk:max-update-after-bind-descriptors-in-all-pools (vk:max-update-after-bind-descriptors-in-all-pools ,value)
          %vk:shader-uniform-buffer-array-non-uniform-indexing-native (vk:shader-uniform-buffer-array-non-uniform-indexing-native ,value)
          %vk:shader-sampled-image-array-non-uniform-indexing-native (vk:shader-sampled-image-array-non-uniform-indexing-native ,value)
          %vk:shader-storage-buffer-array-non-uniform-indexing-native (vk:shader-storage-buffer-array-non-uniform-indexing-native ,value)
          %vk:shader-storage-image-array-non-uniform-indexing-native (vk:shader-storage-image-array-non-uniform-indexing-native ,value)
          %vk:shader-input-attachment-array-non-uniform-indexing-native (vk:shader-input-attachment-array-non-uniform-indexing-native ,value)
          %vk:robust-buffer-access-update-after-bind (vk:robust-buffer-access-update-after-bind ,value)
          %vk:quad-divergent-implicit-lod (vk:quad-divergent-implicit-lod ,value)
          %vk:max-per-stage-descriptor-update-after-bind-samplers (vk:max-per-stage-descriptor-update-after-bind-samplers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-uniform-buffers (vk:max-per-stage-descriptor-update-after-bind-uniform-buffers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-storage-buffers (vk:max-per-stage-descriptor-update-after-bind-storage-buffers ,value)
          %vk:max-per-stage-descriptor-update-after-bind-sampled-images (vk:max-per-stage-descriptor-update-after-bind-sampled-images ,value)
          %vk:max-per-stage-descriptor-update-after-bind-storage-images (vk:max-per-stage-descriptor-update-after-bind-storage-images ,value)
          %vk:max-per-stage-descriptor-update-after-bind-input-attachments (vk:max-per-stage-descriptor-update-after-bind-input-attachments ,value)
          %vk:max-per-stage-update-after-bind-resources (vk:max-per-stage-update-after-bind-resources ,value)
          %vk:max-descriptor-set-update-after-bind-samplers (vk:max-descriptor-set-update-after-bind-samplers ,value)
          %vk:max-descriptor-set-update-after-bind-uniform-buffers (vk:max-descriptor-set-update-after-bind-uniform-buffers ,value)
          %vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic (vk:max-descriptor-set-update-after-bind-uniform-buffers-dynamic ,value)
          %vk:max-descriptor-set-update-after-bind-storage-buffers (vk:max-descriptor-set-update-after-bind-storage-buffers ,value)
          %vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic (vk:max-descriptor-set-update-after-bind-storage-buffers-dynamic ,value)
          %vk:max-descriptor-set-update-after-bind-sampled-images (vk:max-descriptor-set-update-after-bind-sampled-images ,value)
          %vk:max-descriptor-set-update-after-bind-storage-images (vk:max-descriptor-set-update-after-bind-storage-images ,value)
          %vk:max-descriptor-set-update-after-bind-input-attachments (vk:max-descriptor-set-update-after-bind-input-attachments ,value)
          %vk:supported-depth-resolve-modes (vk:supported-depth-resolve-modes ,value)
          %vk:supported-stencil-resolve-modes (vk:supported-stencil-resolve-modes ,value)
          %vk:independent-resolve-none (vk:independent-resolve-none ,value)
          %vk:independent-resolve (vk:independent-resolve ,value)
          %vk:filter-minmax-single-component-formats (vk:filter-minmax-single-component-formats ,value)
          %vk:filter-minmax-image-component-mapping (vk:filter-minmax-image-component-mapping ,value)
          %vk:max-timeline-semaphore-value-difference (vk:max-timeline-semaphore-value-difference ,value)
          %vk:framebuffer-integer-color-sample-counts (vk:framebuffer-integer-color-sample-counts ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-compiler-control-create-info-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:compiler-control-flags)
       ,ptr
       (:struct %vk:pipeline-compiler-control-create-info-amd))
    (setf %vk:s-type :pipeline-compiler-control-create-info-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:compiler-control-flags (vk:compiler-control-flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-coherent-memory-features-amd) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:device-coherent-memory)
       ,ptr
       (:struct %vk:physical-device-coherent-memory-features-amd))
    (setf %vk:s-type :physical-device-coherent-memory-features-amd
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:device-coherent-memory (vk:device-coherent-memory ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-tool-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:name
        %vk:version
        %vk:purposes
        %vk:description
        %vk:layer)
       ,ptr
       (:struct %vk:physical-device-tool-properties-ext))
    (setf %vk:s-type :physical-device-tool-properties-ext
          %vk:p-next (cffi:null-pointer)
          %vk:name (vk:name ,value)
          %vk:version (vk:version ,value)
          %vk:purposes (vk:purposes ,value)
          %vk:description (vk:description ,value)
          %vk:layer (vk:layer ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-sampler-custom-border-color-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:custom-border-color
        %vk:format)
       ,ptr
       (:struct %vk:sampler-custom-border-color-create-info-ext))
    (setf %vk:s-type :sampler-custom-border-color-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:custom-border-color (vk-alloc:foreign-allocate-and-fill '(:union %vk:clear-color-value) (vk:custom-border-color ,value) ,ptr)
          %vk:format (vk:format ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-custom-border-color-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-custom-border-color-samplers)
       ,ptr
       (:struct %vk:physical-device-custom-border-color-properties-ext))
    (setf %vk:s-type :physical-device-custom-border-color-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-custom-border-color-samplers (vk:max-custom-border-color-samplers ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-custom-border-color-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:custom-border-colors
        %vk:custom-border-color-without-format)
       ,ptr
       (:struct %vk:physical-device-custom-border-color-features-ext))
    (setf %vk:s-type :physical-device-custom-border-color-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:custom-border-colors (vk:custom-border-colors ,value)
          %vk:custom-border-color-without-format (vk:custom-border-color-without-format ,value))))

(defmethod cffi:expand-into-foreign-memory ((value vk:device-or-host-address-khr) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:device-address
        %vk:host-address)
       ,ptr
       (:union %vk:device-or-host-address-khr))
     (cond
      ((slot-boundp ,value 'vk:device-address)
       (setf %vk:device-address
             (vk:device-address ,value)))
      ((slot-boundp ,value 'vk:host-address)
       (setf %vk:host-address
             (vk:host-address ,value))))))

(defmethod cffi:expand-into-foreign-memory ((value vk:device-or-host-address-const-khr) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:device-address
        %vk:host-address)
       ,ptr
       (:union %vk:device-or-host-address-const-khr))
     (cond
      ((slot-boundp ,value 'vk:device-address)
       (setf %vk:device-address
             (vk:device-address ,value)))
      ((slot-boundp ,value 'vk:host-address)
       (setf %vk:host-address
             (vk:host-address ,value))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-geometry-triangles-data-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vertex-format
        %vk:vertex-data
        %vk:vertex-stride
        %vk:max-vertex
        %vk:index-type
        %vk:index-data
        %vk:transform-data)
       ,ptr
       (:struct %vk:acceleration-structure-geometry-triangles-data-khr))
    (setf %vk:s-type :acceleration-structure-geometry-triangles-data-khr
          %vk:p-next (cffi:null-pointer)
          %vk:vertex-format (vk:vertex-format ,value)
          %vk:vertex-data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:vertex-data ,value) ,ptr)
          %vk:vertex-stride (vk:vertex-stride ,value)
          %vk:max-vertex (vk:max-vertex ,value)
          %vk:index-type (vk:index-type ,value)
          %vk:index-data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:index-data ,value) ,ptr)
          %vk:transform-data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:transform-data ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-geometry-aabbs-data-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:data
        %vk:stride)
       ,ptr
       (:struct %vk:acceleration-structure-geometry-aabbs-data-khr))
    (setf %vk:s-type :acceleration-structure-geometry-aabbs-data-khr
          %vk:p-next (cffi:null-pointer)
          %vk:data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:data ,value) ,ptr)
          %vk:stride (vk:stride ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-geometry-instances-data-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:array-of-pointers
        %vk:data)
       ,ptr
       (:struct %vk:acceleration-structure-geometry-instances-data-khr))
    (setf %vk:s-type :acceleration-structure-geometry-instances-data-khr
          %vk:p-next (cffi:null-pointer)
          %vk:array-of-pointers (vk:array-of-pointers ,value)
          %vk:data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:data ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory ((value vk:acceleration-structure-geometry-data-khr) type ptr)
  `(cffi:with-foreign-slots
      ((%vk:triangles
        %vk:aabbs
        %vk:instances)
       ,ptr
       (:union %vk:acceleration-structure-geometry-data-khr))
     (cond
      ((slot-boundp ,value 'vk:triangles)
       (setf %vk:triangles
             (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-geometry-triangles-data-khr)
                                                  (vk:triangles ,value)
                                                  ,ptr)))
      ((slot-boundp ,value 'vk:aabbs)
       (setf %vk:aabbs
             (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-geometry-aabbs-data-khr)
                                                  (vk:aabbs ,value)
                                                  ,ptr)))
      ((slot-boundp ,value 'vk:instances)
       (setf %vk:instances
             (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-geometry-instances-data-khr)
                                                  (vk:instances ,value)
                                                  ,ptr))))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-geometry-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:geometry-type
        %vk:geometry
        %vk:flags)
       ,ptr
       (:struct %vk:acceleration-structure-geometry-khr))
    (setf %vk:s-type :acceleration-structure-geometry-khr
          %vk:p-next (cffi:null-pointer)
          %vk:geometry-type (vk:geometry-type ,value)
          %vk:geometry (vk-alloc:foreign-allocate-and-fill '(:union %vk:acceleration-structure-geometry-data-khr) (vk:geometry ,value) ,ptr)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-build-geometry-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:type
        %vk:flags
        %vk:mode
        %vk:src-acceleration-structure
        %vk:dst-acceleration-structure
        %vk:geometry-count
        %vk:p-geometries
        %vk:pp-geometries
        %vk:scratch-data)
       ,ptr
       (:struct %vk:acceleration-structure-build-geometry-info-khr))
    (setf %vk:s-type :acceleration-structure-build-geometry-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:type (vk:type ,value)
          %vk:flags (vk:flags ,value)
          %vk:mode (vk:mode ,value)
          %vk:src-acceleration-structure (if (vk:src-acceleration-structure ,value) (vk:src-acceleration-structure ,value) (cffi:null-pointer))
          %vk:dst-acceleration-structure (if (vk:dst-acceleration-structure ,value) (vk:dst-acceleration-structure ,value) (cffi:null-pointer))
          %vk:geometry-count (reduce #'max (list (length (vk:geometries ,value))(length (vk:p-geometries ,value))))
          %vk:p-geometries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-geometry-khr) (vk:geometries ,value) ,ptr)
          %vk:pp-geometries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:acceleration-structure-geometry-khr) (vk:p-geometries ,value) ,ptr)
          %vk:scratch-data (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-khr) (vk:scratch-data ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-build-range-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:primitive-count
        %vk:primitive-offset
        %vk:first-vertex
        %vk:transform-offset)
       ,ptr
       (:struct %vk:acceleration-structure-build-range-info-khr))
    (setf %vk:primitive-count (vk:primitive-count ,value)
          %vk:primitive-offset (vk:primitive-offset ,value)
          %vk:first-vertex (vk:first-vertex ,value)
          %vk:transform-offset (vk:transform-offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:create-flags
        %vk:buffer
        %vk:offset
        %vk:size
        %vk:type
        %vk:device-address)
       ,ptr
       (:struct %vk:acceleration-structure-create-info-khr))
    (setf %vk:s-type :acceleration-structure-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:create-flags (vk:create-flags ,value)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value)
          %vk:type (vk:type ,value)
          %vk:device-address (vk:device-address ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-aabb-positions-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:min-x
        %vk:min-y
        %vk:min-z
        %vk:max-x
        %vk:max-y
        %vk:max-z)
       ,ptr
       (:struct %vk:aabb-positions-khr))
    (setf %vk:min-x (vk:min-x ,value)
          %vk:min-y (vk:min-y ,value)
          %vk:min-z (vk:min-z ,value)
          %vk:max-x (vk:max-x ,value)
          %vk:max-y (vk:max-y ,value)
          %vk:max-z (vk:max-z ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-transform-matrix-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:matrix)
       ,ptr
       (:struct %vk:transform-matrix-khr))
    (cffi:lisp-array-to-foreign (vk:matrix ,value) %vk:matrix '(:array :float 4 3))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-instance-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:transform
        %vk:instance-custom-index
        %vk:mask
        %vk:instance-shader-binding-table-record-offset
        %vk:flags
        %vk:acceleration-structure-reference)
       ,ptr
       (:struct %vk:acceleration-structure-instance-khr))
    (setf %vk:transform (vk-alloc:foreign-allocate-and-fill '(:struct %vk:transform-matrix-khr) (vk:transform ,value) ,ptr)
          %vk:instance-custom-index (vk:instance-custom-index ,value)
          %vk:mask (vk:mask ,value)
          %vk:instance-shader-binding-table-record-offset (vk:instance-shader-binding-table-record-offset ,value)
          %vk:flags (vk:flags ,value)
          %vk:acceleration-structure-reference (vk:acceleration-structure-reference ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-device-address-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure)
       ,ptr
       (:struct %vk:acceleration-structure-device-address-info-khr))
    (setf %vk:s-type :acceleration-structure-device-address-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:acceleration-structure (if (vk:acceleration-structure ,value) (vk:acceleration-structure ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-version-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-version-data)
       ,ptr
       (:struct %vk:acceleration-structure-version-info-khr))
    (setf %vk:s-type :acceleration-structure-version-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:p-version-data (vk:version-data ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-acceleration-structure-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src
        %vk:dst
        %vk:mode)
       ,ptr
       (:struct %vk:copy-acceleration-structure-info-khr))
    (setf %vk:s-type :copy-acceleration-structure-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src (if (vk:src ,value) (vk:src ,value) (cffi:null-pointer))
          %vk:dst (if (vk:dst ,value) (vk:dst ,value) (cffi:null-pointer))
          %vk:mode (vk:mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-acceleration-structure-to-memory-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src
        %vk:dst
        %vk:mode)
       ,ptr
       (:struct %vk:copy-acceleration-structure-to-memory-info-khr))
    (setf %vk:s-type :copy-acceleration-structure-to-memory-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src (if (vk:src ,value) (vk:src ,value) (cffi:null-pointer))
          %vk:dst (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-khr) (vk:dst ,value) ,ptr)
          %vk:mode (vk:mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-memory-to-acceleration-structure-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src
        %vk:dst
        %vk:mode)
       ,ptr
       (:struct %vk:copy-memory-to-acceleration-structure-info-khr))
    (setf %vk:s-type :copy-memory-to-acceleration-structure-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src (vk-alloc:foreign-allocate-and-fill '(:union %vk:device-or-host-address-const-khr) (vk:src ,value) ,ptr)
          %vk:dst (if (vk:dst ,value) (vk:dst ,value) (cffi:null-pointer))
          %vk:mode (vk:mode ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-ray-tracing-pipeline-interface-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-pipeline-ray-payload-size
        %vk:max-pipeline-ray-hit-attribute-size)
       ,ptr
       (:struct %vk:ray-tracing-pipeline-interface-create-info-khr))
    (setf %vk:s-type :ray-tracing-pipeline-interface-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:max-pipeline-ray-payload-size (vk:max-pipeline-ray-payload-size ,value)
          %vk:max-pipeline-ray-hit-attribute-size (vk:max-pipeline-ray-hit-attribute-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-library-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:library-count
        %vk:p-libraries)
       ,ptr
       (:struct %vk:pipeline-library-create-info-khr))
    (setf %vk:s-type :pipeline-library-create-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:library-count (length (vk:libraries ,value))
          %vk:p-libraries (vk-alloc:foreign-allocate-and-fill '%vk:pipeline (vk:libraries ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-extended-dynamic-state-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:extended-dynamic-state)
       ,ptr
       (:struct %vk:physical-device-extended-dynamic-state-features-ext))
    (setf %vk:s-type :physical-device-extended-dynamic-state-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:extended-dynamic-state (vk:extended-dynamic-state ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-render-pass-transform-begin-info-qcom) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:transform)
       ,ptr
       (:struct %vk:render-pass-transform-begin-info-qcom))
    (setf %vk:s-type :render-pass-transform-begin-info-qcom
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:transform (vk:transform ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-command-transform-info-qcom) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:transform)
       ,ptr
       (:struct %vk:copy-command-transform-info-qcom))
    (setf %vk:s-type :copy-command-transform-info-qcom
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:transform (vk:transform ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-inheritance-render-pass-transform-info-qcom) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:transform
        %vk:render-area)
       ,ptr
       (:struct %vk:command-buffer-inheritance-render-pass-transform-info-qcom))
    (setf %vk:s-type :command-buffer-inheritance-render-pass-transform-info-qcom
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:transform (vk:transform ,value)
          %vk:render-area (vk-alloc:foreign-allocate-and-fill '(:struct %vk:rect-2d) (vk:render-area ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-diagnostics-config-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:diagnostics-config)
       ,ptr
       (:struct %vk:physical-device-diagnostics-config-features-nv))
    (setf %vk:s-type :physical-device-diagnostics-config-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:diagnostics-config (vk:diagnostics-config ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-device-diagnostics-config-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:device-diagnostics-config-create-info-nv))
    (setf %vk:s-type :device-diagnostics-config-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-zero-initialize-workgroup-memory-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-zero-initialize-workgroup-memory)
       ,ptr
       (:struct %vk:physical-device-zero-initialize-workgroup-memory-features-khr))
    (setf %vk:s-type :physical-device-zero-initialize-workgroup-memory-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-zero-initialize-workgroup-memory (vk:shader-zero-initialize-workgroup-memory ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-robustness-2-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:robust-buffer-access-2
        %vk:robust-image-access-2
        %vk:null-descriptor)
       ,ptr
       (:struct %vk:physical-device-robustness-2-features-ext))
    (setf %vk:s-type :physical-device-robustness-2-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:robust-buffer-access-2 (vk:robust-buffer-access-2 ,value)
          %vk:robust-image-access-2 (vk:robust-image-access-2 ,value)
          %vk:null-descriptor (vk:null-descriptor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-robustness-2-properties-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:robust-storage-buffer-access-size-alignment
        %vk:robust-uniform-buffer-access-size-alignment)
       ,ptr
       (:struct %vk:physical-device-robustness-2-properties-ext))
    (setf %vk:s-type :physical-device-robustness-2-properties-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:robust-storage-buffer-access-size-alignment (vk:robust-storage-buffer-access-size-alignment ,value)
          %vk:robust-uniform-buffer-access-size-alignment (vk:robust-uniform-buffer-access-size-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-image-robustness-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:robust-image-access)
       ,ptr
       (:struct %vk:physical-device-image-robustness-features-ext))
    (setf %vk:s-type :physical-device-image-robustness-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:robust-image-access (vk:robust-image-access ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-workgroup-memory-explicit-layout-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:workgroup-memory-explicit-layout
        %vk:workgroup-memory-explicit-layout-scalar-block-layout
        %vk:workgroup-memory-explicit-layout-8-bit-access
        %vk:workgroup-memory-explicit-layout-16-bit-access)
       ,ptr
       (:struct %vk:physical-device-workgroup-memory-explicit-layout-features-khr))
    (setf %vk:s-type :physical-device-workgroup-memory-explicit-layout-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:workgroup-memory-explicit-layout (vk:workgroup-memory-explicit-layout ,value)
          %vk:workgroup-memory-explicit-layout-scalar-block-layout (vk:workgroup-memory-explicit-layout-scalar-block-layout ,value)
          %vk:workgroup-memory-explicit-layout-8-bit-access (vk:workgroup-memory-explicit-layout-8-bit-access ,value)
          %vk:workgroup-memory-explicit-layout-16-bit-access (vk:workgroup-memory-explicit-layout-16-bit-access ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-portability-subset-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:constant-alpha-color-blend-factors
        %vk:events
        %vk:image-view-format-reinterpretation
        %vk:image-view-format-swizzle
        %vk:image-view-2d-on-3d-image
        %vk:multisample-array-image
        %vk:mutable-comparison-samplers
        %vk:point-polygons
        %vk:sampler-mip-lod-bias
        %vk:separate-stencil-mask-ref
        %vk:shader-sample-rate-interpolation-functions
        %vk:tessellation-isolines
        %vk:tessellation-point-mode
        %vk:triangle-fans
        %vk:vertex-attribute-access-beyond-stride)
       ,ptr
       (:struct %vk:physical-device-portability-subset-features-khr))
    (setf %vk:s-type :physical-device-portability-subset-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:constant-alpha-color-blend-factors (vk:constant-alpha-color-blend-factors ,value)
          %vk:events (vk:events ,value)
          %vk:image-view-format-reinterpretation (vk:image-view-format-reinterpretation ,value)
          %vk:image-view-format-swizzle (vk:image-view-format-swizzle ,value)
          %vk:image-view-2d-on-3d-image (vk:image-view-2d-on-3d-image ,value)
          %vk:multisample-array-image (vk:multisample-array-image ,value)
          %vk:mutable-comparison-samplers (vk:mutable-comparison-samplers ,value)
          %vk:point-polygons (vk:point-polygons ,value)
          %vk:sampler-mip-lod-bias (vk:sampler-mip-lod-bias ,value)
          %vk:separate-stencil-mask-ref (vk:separate-stencil-mask-ref ,value)
          %vk:shader-sample-rate-interpolation-functions (vk:shader-sample-rate-interpolation-functions ,value)
          %vk:tessellation-isolines (vk:tessellation-isolines ,value)
          %vk:tessellation-point-mode (vk:tessellation-point-mode ,value)
          %vk:triangle-fans (vk:triangle-fans ,value)
          %vk:vertex-attribute-access-beyond-stride (vk:vertex-attribute-access-beyond-stride ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-portability-subset-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-vertex-input-binding-stride-alignment)
       ,ptr
       (:struct %vk:physical-device-portability-subset-properties-khr))
    (setf %vk:s-type :physical-device-portability-subset-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:min-vertex-input-binding-stride-alignment (vk:min-vertex-input-binding-stride-alignment ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-4444-formats-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format-a4r4g4b4
        %vk:format-a4b4g4r4)
       ,ptr
       (:struct %vk:physical-device-4444-formats-features-ext))
    (setf %vk:s-type :physical-device-4444-formats-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:format-a4r4g4b4 (vk:format-a4r4g4b4 ,value)
          %vk:format-a4b4g4r4 (vk:format-a4b4g4r4 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-copy-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-offset
        %vk:dst-offset
        %vk:size)
       ,ptr
       (:struct %vk:buffer-copy-2-khr))
    (setf %vk:s-type :buffer-copy-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-offset (vk:src-offset ,value)
          %vk:dst-offset (vk:dst-offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-copy-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-subresource
        %vk:src-offset
        %vk:dst-subresource
        %vk:dst-offset
        %vk:extent)
       ,ptr
       (:struct %vk:image-copy-2-khr))
    (setf %vk:s-type :image-copy-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offset ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-blit-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-subresource
        %vk:src-offsets
        %vk:dst-subresource
        %vk:dst-offsets)
       ,ptr
       (:struct %vk:image-blit-2-khr))
    (setf %vk:s-type :image-blit-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offsets (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offsets ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offsets (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offsets ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-image-copy-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:buffer-offset
        %vk:buffer-row-length
        %vk:buffer-image-height
        %vk:image-subresource
        %vk:image-offset
        %vk:image-extent)
       ,ptr
       (:struct %vk:buffer-image-copy-2-khr))
    (setf %vk:s-type :buffer-image-copy-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:buffer-offset (vk:buffer-offset ,value)
          %vk:buffer-row-length (vk:buffer-row-length ,value)
          %vk:buffer-image-height (vk:buffer-image-height ,value)
          %vk:image-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:image-subresource ,value) ,ptr)
          %vk:image-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:image-offset ,value) ,ptr)
          %vk:image-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:image-extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-resolve-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-subresource
        %vk:src-offset
        %vk:dst-subresource
        %vk:dst-offset
        %vk:extent)
       ,ptr
       (:struct %vk:image-resolve-2-khr))
    (setf %vk:s-type :image-resolve-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:src-subresource ,value) ,ptr)
          %vk:src-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:src-offset ,value) ,ptr)
          %vk:dst-subresource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-layers) (vk:dst-subresource ,value) ,ptr)
          %vk:dst-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-3d) (vk:dst-offset ,value) ,ptr)
          %vk:extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-3d) (vk:extent ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-buffer-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-buffer
        %vk:dst-buffer
        %vk:region-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:copy-buffer-info-2-khr))
    (setf %vk:s-type :copy-buffer-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-buffer (if (vk:src-buffer ,value) (vk:src-buffer ,value) (cffi:null-pointer))
          %vk:dst-buffer (if (vk:dst-buffer ,value) (vk:dst-buffer ,value) (cffi:null-pointer))
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:buffer-copy-2-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-image-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-image
        %vk:src-image-layout
        %vk:dst-image
        %vk:dst-image-layout
        %vk:region-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:copy-image-info-2-khr))
    (setf %vk:s-type :copy-image-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-image (if (vk:src-image ,value) (vk:src-image ,value) (cffi:null-pointer))
          %vk:src-image-layout (vk:src-image-layout ,value)
          %vk:dst-image (if (vk:dst-image ,value) (vk:dst-image ,value) (cffi:null-pointer))
          %vk:dst-image-layout (vk:dst-image-layout ,value)
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-copy-2-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-blit-image-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-image
        %vk:src-image-layout
        %vk:dst-image
        %vk:dst-image-layout
        %vk:region-count
        %vk:p-regions
        %vk:filter)
       ,ptr
       (:struct %vk:blit-image-info-2-khr))
    (setf %vk:s-type :blit-image-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-image (if (vk:src-image ,value) (vk:src-image ,value) (cffi:null-pointer))
          %vk:src-image-layout (vk:src-image-layout ,value)
          %vk:dst-image (if (vk:dst-image ,value) (vk:dst-image ,value) (cffi:null-pointer))
          %vk:dst-image-layout (vk:dst-image-layout ,value)
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-blit-2-khr) (vk:regions ,value) ,ptr)
          %vk:filter (vk:filter ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-buffer-to-image-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-buffer
        %vk:dst-image
        %vk:dst-image-layout
        %vk:region-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:copy-buffer-to-image-info-2-khr))
    (setf %vk:s-type :copy-buffer-to-image-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-buffer (if (vk:src-buffer ,value) (vk:src-buffer ,value) (cffi:null-pointer))
          %vk:dst-image (if (vk:dst-image ,value) (vk:dst-image ,value) (cffi:null-pointer))
          %vk:dst-image-layout (vk:dst-image-layout ,value)
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:buffer-image-copy-2-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-copy-image-to-buffer-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-image
        %vk:src-image-layout
        %vk:dst-buffer
        %vk:region-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:copy-image-to-buffer-info-2-khr))
    (setf %vk:s-type :copy-image-to-buffer-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-image (if (vk:src-image ,value) (vk:src-image ,value) (cffi:null-pointer))
          %vk:src-image-layout (vk:src-image-layout ,value)
          %vk:dst-buffer (if (vk:dst-buffer ,value) (vk:dst-buffer ,value) (cffi:null-pointer))
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:buffer-image-copy-2-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-resolve-image-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-image
        %vk:src-image-layout
        %vk:dst-image
        %vk:dst-image-layout
        %vk:region-count
        %vk:p-regions)
       ,ptr
       (:struct %vk:resolve-image-info-2-khr))
    (setf %vk:s-type :resolve-image-info-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-image (if (vk:src-image ,value) (vk:src-image ,value) (cffi:null-pointer))
          %vk:src-image-layout (vk:src-image-layout ,value)
          %vk:dst-image (if (vk:dst-image ,value) (vk:dst-image ,value) (cffi:null-pointer))
          %vk:dst-image-layout (vk:dst-image-layout ,value)
          %vk:region-count (length (vk:regions ,value))
          %vk:p-regions (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-resolve-2-khr) (vk:regions ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-image-atomic-int-64-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-image-int-64-atomics
        %vk:sparse-image-int-64-atomics)
       ,ptr
       (:struct %vk:physical-device-shader-image-atomic-int-64-features-ext))
    (setf %vk:s-type :physical-device-shader-image-atomic-int64-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-image-int-64-atomics (vk:shader-image-int-64-atomics ,value)
          %vk:sparse-image-int-64-atomics (vk:sparse-image-int-64-atomics ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-fragment-shading-rate-attachment-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-fragment-shading-rate-attachment
        %vk:shading-rate-attachment-texel-size)
       ,ptr
       (:struct %vk:fragment-shading-rate-attachment-info-khr))
    (setf %vk:s-type :fragment-shading-rate-attachment-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-fragment-shading-rate-attachment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:attachment-reference-2) (vk:fragment-shading-rate-attachment ,value) ,ptr)
          %vk:shading-rate-attachment-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:shading-rate-attachment-texel-size ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-fragment-shading-rate-state-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-size
        %vk:combiner-ops)
       ,ptr
       (:struct %vk:pipeline-fragment-shading-rate-state-create-info-khr))
    (setf %vk:s-type :pipeline-fragment-shading-rate-state-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:fragment-size ,value) ,ptr)
          %vk:combiner-ops (vk:combiner-ops ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shading-rate-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:pipeline-fragment-shading-rate
        %vk:primitive-fragment-shading-rate
        %vk:attachment-fragment-shading-rate)
       ,ptr
       (:struct %vk:physical-device-fragment-shading-rate-features-khr))
    (setf %vk:s-type :physical-device-fragment-shading-rate-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:pipeline-fragment-shading-rate (vk:pipeline-fragment-shading-rate ,value)
          %vk:primitive-fragment-shading-rate (vk:primitive-fragment-shading-rate ,value)
          %vk:attachment-fragment-shading-rate (vk:attachment-fragment-shading-rate ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shading-rate-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:min-fragment-shading-rate-attachment-texel-size
        %vk:max-fragment-shading-rate-attachment-texel-size
        %vk:max-fragment-shading-rate-attachment-texel-size-aspect-ratio
        %vk:primitive-fragment-shading-rate-with-multiple-viewports
        %vk:layered-shading-rate-attachments
        %vk:fragment-shading-rate-non-trivial-combiner-ops
        %vk:max-fragment-size
        %vk:max-fragment-size-aspect-ratio
        %vk:max-fragment-shading-rate-coverage-samples
        %vk:max-fragment-shading-rate-rasterization-samples
        %vk:fragment-shading-rate-with-shader-depth-stencil-writes
        %vk:fragment-shading-rate-with-sample-mask
        %vk:fragment-shading-rate-with-shader-sample-mask
        %vk:fragment-shading-rate-with-conservative-rasterization
        %vk:fragment-shading-rate-with-fragment-shader-interlock
        %vk:fragment-shading-rate-with-custom-sample-locations
        %vk:fragment-shading-rate-strict-multiply-combiner)
       ,ptr
       (:struct %vk:physical-device-fragment-shading-rate-properties-khr))
    (setf %vk:s-type :physical-device-fragment-shading-rate-properties-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:min-fragment-shading-rate-attachment-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-fragment-shading-rate-attachment-texel-size ,value) ,ptr)
          %vk:max-fragment-shading-rate-attachment-texel-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-fragment-shading-rate-attachment-texel-size ,value) ,ptr)
          %vk:max-fragment-shading-rate-attachment-texel-size-aspect-ratio (vk:max-fragment-shading-rate-attachment-texel-size-aspect-ratio ,value)
          %vk:primitive-fragment-shading-rate-with-multiple-viewports (vk:primitive-fragment-shading-rate-with-multiple-viewports ,value)
          %vk:layered-shading-rate-attachments (vk:layered-shading-rate-attachments ,value)
          %vk:fragment-shading-rate-non-trivial-combiner-ops (vk:fragment-shading-rate-non-trivial-combiner-ops ,value)
          %vk:max-fragment-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-fragment-size ,value) ,ptr)
          %vk:max-fragment-size-aspect-ratio (vk:max-fragment-size-aspect-ratio ,value)
          %vk:max-fragment-shading-rate-coverage-samples (vk:max-fragment-shading-rate-coverage-samples ,value)
          %vk:max-fragment-shading-rate-rasterization-samples (vk:max-fragment-shading-rate-rasterization-samples ,value)
          %vk:fragment-shading-rate-with-shader-depth-stencil-writes (vk:fragment-shading-rate-with-shader-depth-stencil-writes ,value)
          %vk:fragment-shading-rate-with-sample-mask (vk:fragment-shading-rate-with-sample-mask ,value)
          %vk:fragment-shading-rate-with-shader-sample-mask (vk:fragment-shading-rate-with-shader-sample-mask ,value)
          %vk:fragment-shading-rate-with-conservative-rasterization (vk:fragment-shading-rate-with-conservative-rasterization ,value)
          %vk:fragment-shading-rate-with-fragment-shader-interlock (vk:fragment-shading-rate-with-fragment-shader-interlock ,value)
          %vk:fragment-shading-rate-with-custom-sample-locations (vk:fragment-shading-rate-with-custom-sample-locations ,value)
          %vk:fragment-shading-rate-strict-multiply-combiner (vk:fragment-shading-rate-strict-multiply-combiner ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shading-rate-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sample-counts
        %vk:fragment-size)
       ,ptr
       (:struct %vk:physical-device-fragment-shading-rate-khr))
    (setf %vk:s-type :physical-device-fragment-shading-rate-khr
          %vk:p-next (cffi:null-pointer)
          %vk:sample-counts (vk:sample-counts ,value)
          %vk:fragment-size (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:fragment-size ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-shader-terminate-invocation-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shader-terminate-invocation)
       ,ptr
       (:struct %vk:physical-device-shader-terminate-invocation-features-khr))
    (setf %vk:s-type :physical-device-shader-terminate-invocation-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shader-terminate-invocation (vk:shader-terminate-invocation ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shading-rate-enums-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:fragment-shading-rate-enums
        %vk:supersample-fragment-shading-rates
        %vk:no-invocation-fragment-shading-rates)
       ,ptr
       (:struct %vk:physical-device-fragment-shading-rate-enums-features-nv))
    (setf %vk:s-type :physical-device-fragment-shading-rate-enums-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:fragment-shading-rate-enums (vk:fragment-shading-rate-enums ,value)
          %vk:supersample-fragment-shading-rates (vk:supersample-fragment-shading-rates ,value)
          %vk:no-invocation-fragment-shading-rates (vk:no-invocation-fragment-shading-rates ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-fragment-shading-rate-enums-properties-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-fragment-shading-rate-invocation-count)
       ,ptr
       (:struct %vk:physical-device-fragment-shading-rate-enums-properties-nv))
    (setf %vk:s-type :physical-device-fragment-shading-rate-enums-properties-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-fragment-shading-rate-invocation-count (vk:max-fragment-shading-rate-invocation-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-fragment-shading-rate-enum-state-create-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:shading-rate-type
        %vk:shading-rate
        %vk:combiner-ops)
       ,ptr
       (:struct %vk:pipeline-fragment-shading-rate-enum-state-create-info-nv))
    (setf %vk:s-type :pipeline-fragment-shading-rate-enum-state-create-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:shading-rate-type (vk:shading-rate-type ,value)
          %vk:shading-rate (vk:shading-rate ,value)
          %vk:combiner-ops (vk:combiner-ops ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-acceleration-structure-build-sizes-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:acceleration-structure-size
        %vk:update-scratch-size
        %vk:build-scratch-size)
       ,ptr
       (:struct %vk:acceleration-structure-build-sizes-info-khr))
    (setf %vk:s-type :acceleration-structure-build-sizes-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:acceleration-structure-size (vk:acceleration-structure-size ,value)
          %vk:update-scratch-size (vk:update-scratch-size ,value)
          %vk:build-scratch-size (vk:build-scratch-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-mutable-descriptor-type-features-valve) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:mutable-descriptor-type)
       ,ptr
       (:struct %vk:physical-device-mutable-descriptor-type-features-valve))
    (setf %vk:s-type :physical-device-mutable-descriptor-type-features-valve
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:mutable-descriptor-type (vk:mutable-descriptor-type ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-mutable-descriptor-type-list-valve) ptr)
  `(cffi:with-foreign-slots
      ((%vk:descriptor-type-count
        %vk:p-descriptor-types)
       ,ptr
       (:struct %vk:mutable-descriptor-type-list-valve))
    (setf %vk:descriptor-type-count (length (vk:descriptor-types ,value))
          %vk:p-descriptor-types (vk-alloc:foreign-allocate-and-fill '%vk:descriptor-type (vk:descriptor-types ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-mutable-descriptor-type-create-info-valve) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:mutable-descriptor-type-list-count
        %vk:p-mutable-descriptor-type-lists)
       ,ptr
       (:struct %vk:mutable-descriptor-type-create-info-valve))
    (setf %vk:s-type :mutable-descriptor-type-create-info-valve
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:mutable-descriptor-type-list-count (length (vk:mutable-descriptor-type-lists ,value))
          %vk:p-mutable-descriptor-type-lists (vk-alloc:foreign-allocate-and-fill '(:struct %vk:mutable-descriptor-type-list-valve) (vk:mutable-descriptor-type-lists ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-vertex-input-dynamic-state-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:vertex-input-dynamic-state)
       ,ptr
       (:struct %vk:physical-device-vertex-input-dynamic-state-features-ext))
    (setf %vk:s-type :physical-device-vertex-input-dynamic-state-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:vertex-input-dynamic-state (vk:vertex-input-dynamic-state ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vertex-input-binding-description-2-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:binding
        %vk:stride
        %vk:input-rate
        %vk:divisor)
       ,ptr
       (:struct %vk:vertex-input-binding-description-2-ext))
    (setf %vk:s-type :vertex-input-binding-description-2-ext
          %vk:p-next (cffi:null-pointer)
          %vk:binding (vk:binding ,value)
          %vk:stride (vk:stride ,value)
          %vk:input-rate (vk:input-rate ,value)
          %vk:divisor (vk:divisor ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-vertex-input-attribute-description-2-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:location
        %vk:binding
        %vk:format
        %vk:offset)
       ,ptr
       (:struct %vk:vertex-input-attribute-description-2-ext))
    (setf %vk:s-type :vertex-input-attribute-description-2-ext
          %vk:p-next (cffi:null-pointer)
          %vk:location (vk:location ,value)
          %vk:binding (vk:binding ,value)
          %vk:format (vk:format ,value)
          %vk:offset (vk:offset ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-color-write-enable-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:color-write-enable)
       ,ptr
       (:struct %vk:physical-device-color-write-enable-features-ext))
    (setf %vk:s-type :physical-device-color-write-enable-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:color-write-enable (vk:color-write-enable ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-pipeline-color-write-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:attachment-count
        %vk:p-color-write-enables)
       ,ptr
       (:struct %vk:pipeline-color-write-create-info-ext))
    (setf %vk:s-type :pipeline-color-write-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:attachment-count (length (vk:color-write-enables ,value))
          %vk:p-color-write-enables (vk-alloc:foreign-allocate-and-fill '%vk:bool32 (vk:color-write-enables ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-memory-barrier-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-stage-mask
        %vk:src-access-mask
        %vk:dst-stage-mask
        %vk:dst-access-mask)
       ,ptr
       (:struct %vk:memory-barrier-2-khr))
    (setf %vk:s-type :memory-barrier-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-stage-mask (vk:src-stage-mask ,value)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-stage-mask (vk:dst-stage-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-image-memory-barrier-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-stage-mask
        %vk:src-access-mask
        %vk:dst-stage-mask
        %vk:dst-access-mask
        %vk:old-layout
        %vk:new-layout
        %vk:src-queue-family-index
        %vk:dst-queue-family-index
        %vk:image
        %vk:subresource-range)
       ,ptr
       (:struct %vk:image-memory-barrier-2-khr))
    (setf %vk:s-type :image-memory-barrier-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:src-stage-mask (vk:src-stage-mask ,value)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-stage-mask (vk:dst-stage-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:old-layout (vk:old-layout ,value)
          %vk:new-layout (vk:new-layout ,value)
          %vk:src-queue-family-index (vk:src-queue-family-index ,value)
          %vk:dst-queue-family-index (vk:dst-queue-family-index ,value)
          %vk:image (if (vk:image ,value) (vk:image ,value) (cffi:null-pointer))
          %vk:subresource-range (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-subresource-range) (vk:subresource-range ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-buffer-memory-barrier-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:src-stage-mask
        %vk:src-access-mask
        %vk:dst-stage-mask
        %vk:dst-access-mask
        %vk:src-queue-family-index
        %vk:dst-queue-family-index
        %vk:buffer
        %vk:offset
        %vk:size)
       ,ptr
       (:struct %vk:buffer-memory-barrier-2-khr))
    (setf %vk:s-type :buffer-memory-barrier-2-khr
          %vk:p-next (cffi:null-pointer)
          %vk:src-stage-mask (vk:src-stage-mask ,value)
          %vk:src-access-mask (vk:src-access-mask ,value)
          %vk:dst-stage-mask (vk:dst-stage-mask ,value)
          %vk:dst-access-mask (vk:dst-access-mask ,value)
          %vk:src-queue-family-index (vk:src-queue-family-index ,value)
          %vk:dst-queue-family-index (vk:dst-queue-family-index ,value)
          %vk:buffer (if (vk:buffer ,value) (vk:buffer ,value) (cffi:null-pointer))
          %vk:offset (vk:offset ,value)
          %vk:size (vk:size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-dependency-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:dependency-flags
        %vk:memory-barrier-count
        %vk:p-memory-barriers
        %vk:buffer-memory-barrier-count
        %vk:p-buffer-memory-barriers
        %vk:image-memory-barrier-count
        %vk:p-image-memory-barriers)
       ,ptr
       (:struct %vk:dependency-info-khr))
    (setf %vk:s-type :dependency-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:dependency-flags (vk:dependency-flags ,value)
          %vk:memory-barrier-count (length (vk:memory-barriers ,value))
          %vk:p-memory-barriers (vk-alloc:foreign-allocate-and-fill '(:struct %vk:memory-barrier-2-khr) (vk:memory-barriers ,value) ,ptr)
          %vk:buffer-memory-barrier-count (length (vk:buffer-memory-barriers ,value))
          %vk:p-buffer-memory-barriers (vk-alloc:foreign-allocate-and-fill '(:struct %vk:buffer-memory-barrier-2-khr) (vk:buffer-memory-barriers ,value) ,ptr)
          %vk:image-memory-barrier-count (length (vk:image-memory-barriers ,value))
          %vk:p-image-memory-barriers (vk-alloc:foreign-allocate-and-fill '(:struct %vk:image-memory-barrier-2-khr) (vk:image-memory-barriers ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-semaphore-submit-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:semaphore
        %vk:value
        %vk:stage-mask
        %vk:device-index)
       ,ptr
       (:struct %vk:semaphore-submit-info-khr))
    (setf %vk:s-type :semaphore-submit-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:semaphore (if (vk:semaphore ,value) (vk:semaphore ,value) (cffi:null-pointer))
          %vk:value (vk:value ,value)
          %vk:stage-mask (vk:stage-mask ,value)
          %vk:device-index (vk:device-index ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-submit-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:command-buffer
        %vk:device-mask)
       ,ptr
       (:struct %vk:command-buffer-submit-info-khr))
    (setf %vk:s-type :command-buffer-submit-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:command-buffer (if (vk:command-buffer ,value) (vk:command-buffer ,value) (cffi:null-pointer))
          %vk:device-mask (vk:device-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-submit-info-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:wait-semaphore-info-count
        %vk:p-wait-semaphore-infos
        %vk:command-buffer-info-count
        %vk:p-command-buffer-infos
        %vk:signal-semaphore-info-count
        %vk:p-signal-semaphore-infos)
       ,ptr
       (:struct %vk:submit-info-2-khr))
    (setf %vk:s-type :submit-info-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:wait-semaphore-info-count (length (vk:wait-semaphore-infos ,value))
          %vk:p-wait-semaphore-infos (vk-alloc:foreign-allocate-and-fill '(:struct %vk:semaphore-submit-info-khr) (vk:wait-semaphore-infos ,value) ,ptr)
          %vk:command-buffer-info-count (length (vk:command-buffer-infos ,value))
          %vk:p-command-buffer-infos (vk-alloc:foreign-allocate-and-fill '(:struct %vk:command-buffer-submit-info-khr) (vk:command-buffer-infos ,value) ,ptr)
          %vk:signal-semaphore-info-count (length (vk:signal-semaphore-infos ,value))
          %vk:p-signal-semaphore-infos (vk-alloc:foreign-allocate-and-fill '(:struct %vk:semaphore-submit-info-khr) (vk:signal-semaphore-infos ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-queue-family-checkpoint-properties-2-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:checkpoint-execution-stage-mask)
       ,ptr
       (:struct %vk:queue-family-checkpoint-properties-2-nv))
    (setf %vk:s-type :queue-family-checkpoint-properties-2-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:checkpoint-execution-stage-mask (vk:checkpoint-execution-stage-mask ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-checkpoint-data-2-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:stage
        %vk:p-checkpoint-marker)
       ,ptr
       (:struct %vk:checkpoint-data-2-nv))
    (setf %vk:s-type :checkpoint-data-2-nv
          %vk:p-next (cffi:null-pointer)
          %vk:stage (vk:stage ,value)
          %vk:p-checkpoint-marker (if (vk:checkpoint-marker ,value) (vk:checkpoint-marker ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-synchronization-2-features-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:synchronization-2)
       ,ptr
       (:struct %vk:physical-device-synchronization-2-features-khr))
    (setf %vk:s-type :physical-device-synchronization-2-features-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:synchronization-2 (vk:synchronization-2 ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-queue-family-properties-2-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:video-codec-operations)
       ,ptr
       (:struct %vk:video-queue-family-properties-2-khr))
    (setf %vk:s-type :video-queue-family-properties-2-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:video-codec-operations (vk:video-codec-operations ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-profiles-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:profile-count
        %vk:p-profiles)
       ,ptr
       (:struct %vk:video-profiles-khr))
    (setf %vk:s-type :video-profiles-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:profile-count (vk:profile-count ,value)
          %vk:p-profiles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-profile-khr) (vk:profiles ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-video-format-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:image-usage
        %vk:p-video-profiles)
       ,ptr
       (:struct %vk:physical-device-video-format-info-khr))
    (setf %vk:s-type :physical-device-video-format-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:image-usage (vk:image-usage ,value)
          %vk:p-video-profiles (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-profiles-khr) (vk:video-profiles ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-format-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:format)
       ,ptr
       (:struct %vk:video-format-properties-khr))
    (setf %vk:s-type :video-format-properties-khr
          %vk:p-next (cffi:null-pointer)
          %vk:format (vk:format ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-profile-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:video-codec-operation
        %vk:chroma-subsampling
        %vk:luma-bit-depth
        %vk:chroma-bit-depth)
       ,ptr
       (:struct %vk:video-profile-khr))
    (setf %vk:s-type :video-profile-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:video-codec-operation (vk:video-codec-operation ,value)
          %vk:chroma-subsampling (vk:chroma-subsampling ,value)
          %vk:luma-bit-depth (vk:luma-bit-depth ,value)
          %vk:chroma-bit-depth (vk:chroma-bit-depth ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-capabilities-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:capability-flags
        %vk:min-bitstream-buffer-offset-alignment
        %vk:min-bitstream-buffer-size-alignment
        %vk:video-picture-extent-granularity
        %vk:min-extent
        %vk:max-extent
        %vk:max-reference-pictures-slots-count
        %vk:max-reference-pictures-active-count)
       ,ptr
       (:struct %vk:video-capabilities-khr))
    (setf %vk:s-type :video-capabilities-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:capability-flags (vk:capability-flags ,value)
          %vk:min-bitstream-buffer-offset-alignment (vk:min-bitstream-buffer-offset-alignment ,value)
          %vk:min-bitstream-buffer-size-alignment (vk:min-bitstream-buffer-size-alignment ,value)
          %vk:video-picture-extent-granularity (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:video-picture-extent-granularity ,value) ,ptr)
          %vk:min-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-extent ,value) ,ptr)
          %vk:max-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-extent ,value) ,ptr)
          %vk:max-reference-pictures-slots-count (vk:max-reference-pictures-slots-count ,value)
          %vk:max-reference-pictures-active-count (vk:max-reference-pictures-active-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-get-memory-properties-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-bind-index
        %vk:p-memory-requirements)
       ,ptr
       (:struct %vk:video-get-memory-properties-khr))
    (setf %vk:s-type :video-get-memory-properties-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory-bind-index (vk:memory-bind-index ,value)
          %vk:p-memory-requirements (vk-alloc:foreign-allocate-and-fill '(:struct %vk:memory-requirements-2) (vk:memory-requirements ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-bind-memory-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:memory-bind-index
        %vk:memory
        %vk:memory-offset
        %vk:memory-size)
       ,ptr
       (:struct %vk:video-bind-memory-khr))
    (setf %vk:s-type :video-bind-memory-khr
          %vk:p-next (cffi:null-pointer)
          %vk:memory-bind-index (vk:memory-bind-index ,value)
          %vk:memory (if (vk:memory ,value) (vk:memory ,value) (cffi:null-pointer))
          %vk:memory-offset (vk:memory-offset ,value)
          %vk:memory-size (vk:memory-size ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-picture-resource-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:coded-offset
        %vk:coded-extent
        %vk:base-array-layer
        %vk:image-view-binding)
       ,ptr
       (:struct %vk:video-picture-resource-khr))
    (setf %vk:s-type :video-picture-resource-khr
          %vk:p-next (cffi:null-pointer)
          %vk:coded-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:coded-offset ,value) ,ptr)
          %vk:coded-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:coded-extent ,value) ,ptr)
          %vk:base-array-layer (vk:base-array-layer ,value)
          %vk:image-view-binding (if (vk:image-view-binding ,value) (vk:image-view-binding ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-reference-slot-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:slot-index
        %vk:p-picture-resource)
       ,ptr
       (:struct %vk:video-reference-slot-khr))
    (setf %vk:s-type :video-reference-slot-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:slot-index (vk:slot-index ,value)
          %vk:p-picture-resource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-picture-resource-khr) (vk:picture-resource ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:coded-offset
        %vk:coded-extent
        %vk:src-buffer
        %vk:src-buffer-offset
        %vk:src-buffer-range
        %vk:dst-picture-resource
        %vk:p-setup-reference-slot
        %vk:reference-slot-count
        %vk:p-reference-slots)
       ,ptr
       (:struct %vk:video-decode-info-khr))
    (setf %vk:s-type :video-decode-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:coded-offset (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:coded-offset ,value) ,ptr)
          %vk:coded-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:coded-extent ,value) ,ptr)
          %vk:src-buffer (if (vk:src-buffer ,value) (vk:src-buffer ,value) (cffi:null-pointer))
          %vk:src-buffer-offset (vk:src-buffer-offset ,value)
          %vk:src-buffer-range (vk:src-buffer-range ,value)
          %vk:dst-picture-resource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-picture-resource-khr) (vk:dst-picture-resource ,value) ,ptr)
          %vk:p-setup-reference-slot (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-reference-slot-khr) (vk:setup-reference-slot ,value) ,ptr)
          %vk:reference-slot-count (length (vk:reference-slots ,value))
          %vk:p-reference-slots (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-reference-slot-khr) (vk:reference-slots ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-profile-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:std-profile-idc
        %vk:field-layout)
       ,ptr
       (:struct %vk:video-decode-h264-profile-ext))
    (setf %vk:s-type :video-decode-h264-profile-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:std-profile-idc (vk:std-profile-idc ,value)
          %vk:field-layout (vk:field-layout ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-capabilities-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-level
        %vk:field-offset-granularity
        %vk:std-extension-version)
       ,ptr
       (:struct %vk:video-decode-h264-capabilities-ext))
    (setf %vk:s-type :video-decode-h264-capabilities-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-level (vk:max-level ,value)
          %vk:field-offset-granularity (vk-alloc:foreign-allocate-and-fill '(:struct %vk:offset-2d) (vk:field-offset-granularity ,value) ,ptr)
          %vk:std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-session-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-std-extension-version)
       ,ptr
       (:struct %vk:video-decode-h264-session-create-info-ext))
    (setf %vk:s-type :video-decode-h264-session-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:p-std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-session-parameters-add-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sps-std-count
        %vk:p-sps-std
        %vk:pps-std-count
        %vk:p-pps-std)
       ,ptr
       (:struct %vk:video-decode-h264-session-parameters-add-info-ext))
    (setf %vk:s-type :video-decode-h264-session-parameters-add-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sps-std-count (length (vk:sps-std ,value))
          %vk:p-sps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h264-sequence-parameter-set) (vk:sps-std ,value) ,ptr)
          %vk:pps-std-count (length (vk:pps-std ,value))
          %vk:p-pps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h264-picture-parameter-set) (vk:pps-std ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-session-parameters-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-sps-std-count
        %vk:max-pps-std-count
        %vk:p-parameters-add-info)
       ,ptr
       (:struct %vk:video-decode-h264-session-parameters-create-info-ext))
    (setf %vk:s-type :video-decode-h264-session-parameters-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-sps-std-count (vk:max-sps-std-count ,value)
          %vk:max-pps-std-count (vk:max-pps-std-count ,value)
          %vk:p-parameters-add-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-decode-h264-session-parameters-add-info-ext) (vk:parameters-add-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-picture-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-std-picture-info
        %vk:slices-count
        %vk:p-slices-data-offsets)
       ,ptr
       (:struct %vk:video-decode-h264-picture-info-ext))
    (setf %vk:s-type :video-decode-h264-picture-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-std-picture-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-decode-h264-picture-info) (vk:std-picture-info ,value) ,ptr)
          %vk:slices-count (length (vk:slices-data-offsets ,value))
          %vk:p-slices-data-offsets (vk-alloc:foreign-allocate-and-fill :uint32 (vk:slices-data-offsets ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-dpb-slot-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-std-reference-info)
       ,ptr
       (:struct %vk:video-decode-h264-dpb-slot-info-ext))
    (setf %vk:s-type :video-decode-h264-dpb-slot-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-std-reference-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-decode-h264-reference-info) (vk:std-reference-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h264-mvc-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-std-mvc)
       ,ptr
       (:struct %vk:video-decode-h264-mvc-ext))
    (setf %vk:s-type :video-decode-h264-mvc-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-std-mvc (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-decode-h264-mvc) (vk:std-mvc ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-profile-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:std-profile-idc)
       ,ptr
       (:struct %vk:video-decode-h265-profile-ext))
    (setf %vk:s-type :video-decode-h265-profile-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:std-profile-idc (vk:std-profile-idc ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-capabilities-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-level
        %vk:std-extension-version)
       ,ptr
       (:struct %vk:video-decode-h265-capabilities-ext))
    (setf %vk:s-type :video-decode-h265-capabilities-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-level (vk:max-level ,value)
          %vk:std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-session-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:p-std-extension-version)
       ,ptr
       (:struct %vk:video-decode-h265-session-create-info-ext))
    (setf %vk:s-type :video-decode-h265-session-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:p-std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-session-parameters-add-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sps-std-count
        %vk:p-sps-std
        %vk:pps-std-count
        %vk:p-pps-std)
       ,ptr
       (:struct %vk:video-decode-h265-session-parameters-add-info-ext))
    (setf %vk:s-type :video-decode-h265-session-parameters-add-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sps-std-count (length (vk:sps-std ,value))
          %vk:p-sps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h265-sequence-parameter-set) (vk:sps-std ,value) ,ptr)
          %vk:pps-std-count (length (vk:pps-std ,value))
          %vk:p-pps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h265-picture-parameter-set) (vk:pps-std ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-session-parameters-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-sps-std-count
        %vk:max-pps-std-count
        %vk:p-parameters-add-info)
       ,ptr
       (:struct %vk:video-decode-h265-session-parameters-create-info-ext))
    (setf %vk:s-type :video-decode-h265-session-parameters-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-sps-std-count (vk:max-sps-std-count ,value)
          %vk:max-pps-std-count (vk:max-pps-std-count ,value)
          %vk:p-parameters-add-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-decode-h265-session-parameters-add-info-ext) (vk:parameters-add-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-picture-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-std-picture-info
        %vk:slices-count
        %vk:p-slices-data-offsets)
       ,ptr
       (:struct %vk:video-decode-h265-picture-info-ext))
    (setf %vk:s-type :video-decode-h265-picture-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-std-picture-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-decode-h265-picture-info) (vk:std-picture-info ,value) ,ptr)
          %vk:slices-count (length (vk:slices-data-offsets ,value))
          %vk:p-slices-data-offsets (vk-alloc:foreign-allocate-and-fill :uint32 (vk:slices-data-offsets ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-decode-h265-dpb-slot-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-std-reference-info)
       ,ptr
       (:struct %vk:video-decode-h265-dpb-slot-info-ext))
    (setf %vk:s-type :video-decode-h265-dpb-slot-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:p-std-reference-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-decode-h265-reference-info) (vk:std-reference-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-session-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:queue-family-index
        %vk:flags
        %vk:p-video-profile
        %vk:picture-format
        %vk:max-coded-extent
        %vk:reference-pictures-format
        %vk:max-reference-pictures-slots-count
        %vk:max-reference-pictures-active-count)
       ,ptr
       (:struct %vk:video-session-create-info-khr))
    (setf %vk:s-type :video-session-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:queue-family-index (vk:queue-family-index ,value)
          %vk:flags (vk:flags ,value)
          %vk:p-video-profile (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-profile-khr) (vk:video-profile ,value) ,ptr)
          %vk:picture-format (vk:picture-format ,value)
          %vk:max-coded-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-coded-extent ,value) ,ptr)
          %vk:reference-pictures-format (vk:reference-pictures-format ,value)
          %vk:max-reference-pictures-slots-count (vk:max-reference-pictures-slots-count ,value)
          %vk:max-reference-pictures-active-count (vk:max-reference-pictures-active-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-session-parameters-create-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:video-session-parameters-template
        %vk:video-session)
       ,ptr
       (:struct %vk:video-session-parameters-create-info-khr))
    (setf %vk:s-type :video-session-parameters-create-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:video-session-parameters-template (if (vk:video-session-parameters-template ,value) (vk:video-session-parameters-template ,value) (cffi:null-pointer))
          %vk:video-session (if (vk:video-session ,value) (vk:video-session ,value) (cffi:null-pointer)))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-session-parameters-update-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:update-sequence-count)
       ,ptr
       (:struct %vk:video-session-parameters-update-info-khr))
    (setf %vk:s-type :video-session-parameters-update-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:update-sequence-count (vk:update-sequence-count ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-begin-coding-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:codec-quality-preset
        %vk:video-session
        %vk:video-session-parameters
        %vk:reference-slot-count
        %vk:p-reference-slots)
       ,ptr
       (:struct %vk:video-begin-coding-info-khr))
    (setf %vk:s-type :video-begin-coding-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value)
          %vk:codec-quality-preset (vk:codec-quality-preset ,value)
          %vk:video-session (if (vk:video-session ,value) (vk:video-session ,value) (cffi:null-pointer))
          %vk:video-session-parameters (if (vk:video-session-parameters ,value) (vk:video-session-parameters ,value) (cffi:null-pointer))
          %vk:reference-slot-count (length (vk:reference-slots ,value))
          %vk:p-reference-slots (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-reference-slot-khr) (vk:reference-slots ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-end-coding-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:video-end-coding-info-khr))
    (setf %vk:s-type :video-end-coding-info-khr
          %vk:p-next (cffi:null-pointer)
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-coding-control-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags)
       ,ptr
       (:struct %vk:video-coding-control-info-khr))
    (setf %vk:s-type :video-coding-control-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:quality-level
        %vk:coded-extent
        %vk:dst-bitstream-buffer
        %vk:dst-bitstream-buffer-offset
        %vk:dst-bitstream-buffer-max-range
        %vk:src-picture-resource
        %vk:p-setup-reference-slot
        %vk:reference-slot-count
        %vk:p-reference-slots)
       ,ptr
       (:struct %vk:video-encode-info-khr))
    (setf %vk:s-type :video-encode-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:quality-level (vk:quality-level ,value)
          %vk:coded-extent (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:coded-extent ,value) ,ptr)
          %vk:dst-bitstream-buffer (if (vk:dst-bitstream-buffer ,value) (vk:dst-bitstream-buffer ,value) (cffi:null-pointer))
          %vk:dst-bitstream-buffer-offset (vk:dst-bitstream-buffer-offset ,value)
          %vk:dst-bitstream-buffer-max-range (vk:dst-bitstream-buffer-max-range ,value)
          %vk:src-picture-resource (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-picture-resource-khr) (vk:src-picture-resource ,value) ,ptr)
          %vk:p-setup-reference-slot (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-reference-slot-khr) (vk:setup-reference-slot ,value) ,ptr)
          %vk:reference-slot-count (length (vk:reference-slots ,value))
          %vk:p-reference-slots (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-reference-slot-khr) (vk:reference-slots ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-rate-control-info-khr) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:rate-control-mode
        %vk:average-bitrate
        %vk:peak-to-average-bitrate-ratio
        %vk:frame-rate-numerator
        %vk:frame-rate-denominator
        %vk:virtual-buffer-size-in-ms)
       ,ptr
       (:struct %vk:video-encode-rate-control-info-khr))
    (setf %vk:s-type :video-encode-rate-control-info-khr
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:rate-control-mode (vk:rate-control-mode ,value)
          %vk:average-bitrate (vk:average-bitrate ,value)
          %vk:peak-to-average-bitrate-ratio (vk:peak-to-average-bitrate-ratio ,value)
          %vk:frame-rate-numerator (vk:frame-rate-numerator ,value)
          %vk:frame-rate-denominator (vk:frame-rate-denominator ,value)
          %vk:virtual-buffer-size-in-ms (vk:virtual-buffer-size-in-ms ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-capabilities-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:input-mode-flags
        %vk:output-mode-flags
        %vk:min-picture-size-in-mbs
        %vk:max-picture-size-in-mbs
        %vk:input-image-data-alignment
        %vk:max-num-l-0-reference-for-p
        %vk:max-num-l-0-reference-for-b
        %vk:max-num-l-1-reference
        %vk:quality-level-count
        %vk:std-extension-version)
       ,ptr
       (:struct %vk:video-encode-h264-capabilities-ext))
    (setf %vk:s-type :video-encode-h264-capabilities-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:input-mode-flags (vk:input-mode-flags ,value)
          %vk:output-mode-flags (vk:output-mode-flags ,value)
          %vk:min-picture-size-in-mbs (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:min-picture-size-in-mbs ,value) ,ptr)
          %vk:max-picture-size-in-mbs (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-picture-size-in-mbs ,value) ,ptr)
          %vk:input-image-data-alignment (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:input-image-data-alignment ,value) ,ptr)
          %vk:max-num-l-0-reference-for-p (vk:max-num-l-0-reference-for-p ,value)
          %vk:max-num-l-0-reference-for-b (vk:max-num-l-0-reference-for-b ,value)
          %vk:max-num-l-1-reference (vk:max-num-l-1-reference ,value)
          %vk:quality-level-count (vk:quality-level-count ,value)
          %vk:std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-session-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:flags
        %vk:max-picture-size-in-mbs
        %vk:p-std-extension-version)
       ,ptr
       (:struct %vk:video-encode-h264-session-create-info-ext))
    (setf %vk:s-type :video-encode-h264-session-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:flags (vk:flags ,value)
          %vk:max-picture-size-in-mbs (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extent-2d) (vk:max-picture-size-in-mbs ,value) ,ptr)
          %vk:p-std-extension-version (vk-alloc:foreign-allocate-and-fill '(:struct %vk:extension-properties) (vk:std-extension-version ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-session-parameters-add-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sps-std-count
        %vk:p-sps-std
        %vk:pps-std-count
        %vk:p-pps-std)
       ,ptr
       (:struct %vk:video-encode-h264-session-parameters-add-info-ext))
    (setf %vk:s-type :video-encode-h264-session-parameters-add-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sps-std-count (length (vk:sps-std ,value))
          %vk:p-sps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h264-sequence-parameter-set) (vk:sps-std ,value) ,ptr)
          %vk:pps-std-count (length (vk:pps-std ,value))
          %vk:p-pps-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-h264-picture-parameter-set) (vk:pps-std ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-session-parameters-create-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:max-sps-std-count
        %vk:max-pps-std-count
        %vk:p-parameters-add-info)
       ,ptr
       (:struct %vk:video-encode-h264-session-parameters-create-info-ext))
    (setf %vk:s-type :video-encode-h264-session-parameters-create-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:max-sps-std-count (vk:max-sps-std-count ,value)
          %vk:max-pps-std-count (vk:max-pps-std-count ,value)
          %vk:p-parameters-add-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-session-parameters-add-info-ext) (vk:parameters-add-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-dpb-slot-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:slot-index
        %vk:p-std-picture-info)
       ,ptr
       (:struct %vk:video-encode-h264-dpb-slot-info-ext))
    (setf %vk:s-type :video-encode-h264-dpb-slot-info-ext
          %vk:p-next (cffi:null-pointer)
          %vk:slot-index (vk:slot-index ,value)
          %vk:p-std-picture-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-encode-h264-picture-info) (vk:std-picture-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-vcl-frame-info-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:ref-default-final-list-0-entry-count
        %vk:p-ref-default-final-list-0-entries
        %vk:ref-default-final-list-1-entry-count
        %vk:p-ref-default-final-list-1-entries
        %vk:nalu-slice-entry-count
        %vk:p-nalu-slice-entries
        %vk:p-current-picture-info)
       ,ptr
       (:struct %vk:video-encode-h264-vcl-frame-info-ext))
    (setf %vk:s-type :video-encode-h264-vcl-frame-info-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:ref-default-final-list-0-entry-count (length (vk:ref-default-final-list-0-entries ,value))
          %vk:p-ref-default-final-list-0-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-dpb-slot-info-ext) (vk:ref-default-final-list-0-entries ,value) ,ptr)
          %vk:ref-default-final-list-1-entry-count (length (vk:ref-default-final-list-1-entries ,value))
          %vk:p-ref-default-final-list-1-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-dpb-slot-info-ext) (vk:ref-default-final-list-1-entries ,value) ,ptr)
          %vk:nalu-slice-entry-count (length (vk:nalu-slice-entries ,value))
          %vk:p-nalu-slice-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-nalu-slice-ext) (vk:nalu-slice-entries ,value) ,ptr)
          %vk:p-current-picture-info (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-dpb-slot-info-ext) (vk:current-picture-info ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-emit-picture-parameters-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:sps-id
        %vk:emit-sps-enable
        %vk:pps-id-entry-count
        %vk:pps-id-entries)
       ,ptr
       (:struct %vk:video-encode-h264-emit-picture-parameters-ext))
    (setf %vk:s-type :video-encode-h264-emit-picture-parameters-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:sps-id (vk:sps-id ,value)
          %vk:emit-sps-enable (vk:emit-sps-enable ,value)
          %vk:pps-id-entry-count (length (vk:pps-id-entries ,value))
          %vk:pps-id-entries (vk-alloc:foreign-allocate-and-fill :uint8 (vk:pps-id-entries ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-profile-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:std-profile-idc)
       ,ptr
       (:struct %vk:video-encode-h264-profile-ext))
    (setf %vk:s-type :video-encode-h264-profile-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:std-profile-idc (vk:std-profile-idc ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-video-encode-h264-nalu-slice-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:p-slice-header-std
        %vk:mb-count
        %vk:ref-final-list-0-entry-count
        %vk:p-ref-final-list-0-entries
        %vk:ref-final-list-1-entry-count
        %vk:p-ref-final-list-1-entries
        %vk:preceding-nalu-bytes
        %vk:min-qp
        %vk:max-qp)
       ,ptr
       (:struct %vk:video-encode-h264-nalu-slice-ext))
    (setf %vk:s-type :video-encode-h264-nalu-slice-ext
          %vk:p-next (cffi:null-pointer)
          %vk:p-slice-header-std (vk-alloc:foreign-allocate-and-fill '(:struct %vk:std-video-encode-h264-slice-header) (vk:slice-header-std ,value) ,ptr)
          %vk:mb-count (vk:mb-count ,value)
          %vk:ref-final-list-0-entry-count (length (vk:ref-final-list-0-entries ,value))
          %vk:p-ref-final-list-0-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-dpb-slot-info-ext) (vk:ref-final-list-0-entries ,value) ,ptr)
          %vk:ref-final-list-1-entry-count (length (vk:ref-final-list-1-entries ,value))
          %vk:p-ref-final-list-1-entries (vk-alloc:foreign-allocate-and-fill '(:struct %vk:video-encode-h264-dpb-slot-info-ext) (vk:ref-final-list-1-entries ,value) ,ptr)
          %vk:preceding-nalu-bytes (vk:preceding-nalu-bytes ,value)
          %vk:min-qp (vk:min-qp ,value)
          %vk:max-qp (vk:max-qp ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-inherited-viewport-scissor-features-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:inherited-viewport-scissor-2d)
       ,ptr
       (:struct %vk:physical-device-inherited-viewport-scissor-features-nv))
    (setf %vk:s-type :physical-device-inherited-viewport-scissor-features-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:inherited-viewport-scissor-2d (vk:inherited-viewport-scissor-2d ,value))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-command-buffer-inheritance-viewport-scissor-info-nv) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:viewport-scissor-2d
        %vk:viewport-depth-count
        %vk:p-viewport-depths)
       ,ptr
       (:struct %vk:command-buffer-inheritance-viewport-scissor-info-nv))
    (setf %vk:s-type :command-buffer-inheritance-viewport-scissor-info-nv
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:viewport-scissor-2d (vk:viewport-scissor-2d ,value)
          %vk:viewport-depth-count (vk:viewport-depth-count ,value)
          %vk:p-viewport-depths (vk-alloc:foreign-allocate-and-fill '(:struct %vk:viewport) (vk:viewport-depths ,value) ,ptr))))

(defmethod cffi:expand-into-foreign-memory (value (type %vk:c-physical-device-ycbcr-2-plane-4-4-4-formats-features-ext) ptr)
  `(cffi:with-foreign-slots
      ((%vk:s-type
        %vk:p-next
        %vk:ycbcr-2plane-4-4-4-formats)
       ,ptr
       (:struct %vk:physical-device-ycbcr-2-plane-4-4-4-formats-features-ext))
    (setf %vk:s-type :physical-device-ycbcr-2-plane-444-formats-features-ext
          %vk:p-next (if (vk:next ,value) (vk-alloc:foreign-allocate-and-fill (list :struct (find-symbol (string (class-name (class-of (vk:next ,value)))) :%vk)) (vk:next ,value) ,ptr) (cffi:null-pointer))
          %vk:ycbcr-2plane-4-4-4-formats (vk:ycbcr-2plane-4-4-4-formats ,value))))

